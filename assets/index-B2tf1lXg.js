var Bg=h=>{throw TypeError(h)};var jc=(h,t,n)=>t.has(h)||Bg("Cannot "+n);var qt=(h,t,n)=>(jc(h,t,"read from private field"),n?n.call(h):t.get(h)),xn=(h,t,n)=>t.has(h)?Bg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,n),je=(h,t,n,s)=>(jc(h,t,"write to private field"),s?s.call(h,n):t.set(h,n),n),Cn=(h,t,n)=>(jc(h,t,"access private method"),n);var zg=(h,t,n,s)=>({set _(r){je(h,t,r,n)},get _(){return qt(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function i0(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Gc={exports:{}},ar={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function s0(){if(Hg)return ar;Hg=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var c in r)c!=="key"&&(l[c]=r[c])}else l=r;return r=l.ref,{$$typeof:h,type:s,key:u,ref:r!==void 0?r:null,props:l}}return ar.Fragment=t,ar.jsx=n,ar.jsxs=n,ar}var Ig;function a0(){return Ig||(Ig=1,Gc.exports=s0()),Gc.exports}var tt=a0(),qc={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function r0(){if(Fg)return St;Fg=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function T(R,q,W){this.props=R,this.context=q,this.refs=S,this.updater=W||v}T.prototype.isReactComponent={},T.prototype.setState=function(R,q){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,q,"setState")},T.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function w(){}w.prototype=T.prototype;function L(R,q,W){this.props=R,this.context=q,this.refs=S,this.updater=W||v}var C=L.prototype=new w;C.constructor=L,E(C,T.prototype),C.isPureReactComponent=!0;var N=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function H(R,q,W,K,nt,pt){return W=pt.ref,{$$typeof:h,type:R,key:q,ref:W!==void 0?W:null,props:pt}}function X(R,q){return H(R.type,q,void 0,void 0,void 0,R.props)}function $(R){return typeof R=="object"&&R!==null&&R.$$typeof===h}function Z(R){var q={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(W){return q[W]})}var Q=/\/+/g;function at(R,q){return typeof R=="object"&&R!==null&&R.key!=null?Z(""+R.key):q.toString(36)}function bt(){}function ut(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(bt,bt):(R.status="pending",R.then(function(q){R.status==="pending"&&(R.status="fulfilled",R.value=q)},function(q){R.status==="pending"&&(R.status="rejected",R.reason=q)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function lt(R,q,W,K,nt){var pt=typeof R;(pt==="undefined"||pt==="boolean")&&(R=null);var st=!1;if(R===null)st=!0;else switch(pt){case"bigint":case"string":case"number":st=!0;break;case"object":switch(R.$$typeof){case h:case t:st=!0;break;case g:return st=R._init,lt(st(R._payload),q,W,K,nt)}}if(st)return nt=nt(R),st=K===""?"."+at(R,0):K,N(nt)?(W="",st!=null&&(W=st.replace(Q,"$&/")+"/"),lt(nt,q,W,"",function(ce){return ce})):nt!=null&&($(nt)&&(nt=X(nt,W+(nt.key==null||R&&R.key===nt.key?"":(""+nt.key).replace(Q,"$&/")+"/")+st)),q.push(nt)),1;st=0;var At=K===""?".":K+":";if(N(R))for(var Rt=0;Rt<R.length;Rt++)K=R[Rt],pt=At+at(K,Rt),st+=lt(K,q,W,pt,nt);else if(Rt=b(R),typeof Rt=="function")for(R=Rt.call(R),Rt=0;!(K=R.next()).done;)K=K.value,pt=At+at(K,Rt++),st+=lt(K,q,W,pt,nt);else if(pt==="object"){if(typeof R.then=="function")return lt(ut(R),q,W,K,nt);throw q=String(R),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return st}function O(R,q,W){if(R==null)return R;var K=[],nt=0;return lt(R,K,"","",function(pt){return q.call(W,pt,nt++)}),K}function U(R){if(R._status===-1){var q=R._result;q=q(),q.then(function(W){(R._status===0||R._status===-1)&&(R._status=1,R._result=W)},function(W){(R._status===0||R._status===-1)&&(R._status=2,R._result=W)}),R._status===-1&&(R._status=0,R._result=q)}if(R._status===1)return R._result.default;throw R._result}var J=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function mt(){}return St.Children={map:O,forEach:function(R,q,W){O(R,function(){q.apply(this,arguments)},W)},count:function(R){var q=0;return O(R,function(){q++}),q},toArray:function(R){return O(R,function(q){return q})||[]},only:function(R){if(!$(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},St.Component=T,St.Fragment=n,St.Profiler=r,St.PureComponent=L,St.StrictMode=s,St.Suspense=d,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,St.__COMPILER_RUNTIME={__proto__:null,c:function(R){return M.H.useMemoCache(R)}},St.cache=function(R){return function(){return R.apply(null,arguments)}},St.cloneElement=function(R,q,W){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var K=E({},R.props),nt=R.key,pt=void 0;if(q!=null)for(st in q.ref!==void 0&&(pt=void 0),q.key!==void 0&&(nt=""+q.key),q)!I.call(q,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&q.ref===void 0||(K[st]=q[st]);var st=arguments.length-2;if(st===1)K.children=W;else if(1<st){for(var At=Array(st),Rt=0;Rt<st;Rt++)At[Rt]=arguments[Rt+2];K.children=At}return H(R.type,nt,void 0,void 0,pt,K)},St.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},St.createElement=function(R,q,W){var K,nt={},pt=null;if(q!=null)for(K in q.key!==void 0&&(pt=""+q.key),q)I.call(q,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(nt[K]=q[K]);var st=arguments.length-2;if(st===1)nt.children=W;else if(1<st){for(var At=Array(st),Rt=0;Rt<st;Rt++)At[Rt]=arguments[Rt+2];nt.children=At}if(R&&R.defaultProps)for(K in st=R.defaultProps,st)nt[K]===void 0&&(nt[K]=st[K]);return H(R,pt,void 0,void 0,null,nt)},St.createRef=function(){return{current:null}},St.forwardRef=function(R){return{$$typeof:c,render:R}},St.isValidElement=$,St.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:U}},St.memo=function(R,q){return{$$typeof:p,type:R,compare:q===void 0?null:q}},St.startTransition=function(R){var q=M.T,W={};M.T=W;try{var K=R(),nt=M.S;nt!==null&&nt(W,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(mt,J)}catch(pt){J(pt)}finally{M.T=q}},St.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},St.use=function(R){return M.H.use(R)},St.useActionState=function(R,q,W){return M.H.useActionState(R,q,W)},St.useCallback=function(R,q){return M.H.useCallback(R,q)},St.useContext=function(R){return M.H.useContext(R)},St.useDebugValue=function(){},St.useDeferredValue=function(R,q){return M.H.useDeferredValue(R,q)},St.useEffect=function(R,q,W){var K=M.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(R,q)},St.useId=function(){return M.H.useId()},St.useImperativeHandle=function(R,q,W){return M.H.useImperativeHandle(R,q,W)},St.useInsertionEffect=function(R,q){return M.H.useInsertionEffect(R,q)},St.useLayoutEffect=function(R,q){return M.H.useLayoutEffect(R,q)},St.useMemo=function(R,q){return M.H.useMemo(R,q)},St.useOptimistic=function(R,q){return M.H.useOptimistic(R,q)},St.useReducer=function(R,q,W){return M.H.useReducer(R,q,W)},St.useRef=function(R){return M.H.useRef(R)},St.useState=function(R){return M.H.useState(R)},St.useSyncExternalStore=function(R,q,W){return M.H.useSyncExternalStore(R,q,W)},St.useTransition=function(){return M.H.useTransition()},St.version="19.1.0",St}var Ug;function bh(){return Ug||(Ug=1,qc.exports=r0()),qc.exports}var P=bh(),Vc={exports:{}},rr={},Xc={exports:{}},Yc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function l0(){return jg||(jg=1,function(h){function t(O,U){var J=O.length;O.push(U);t:for(;0<J;){var mt=J-1>>>1,R=O[mt];if(0<r(R,U))O[mt]=U,O[J]=R,J=mt;else break t}}function n(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var U=O[0],J=O.pop();if(J!==U){O[0]=J;t:for(var mt=0,R=O.length,q=R>>>1;mt<q;){var W=2*(mt+1)-1,K=O[W],nt=W+1,pt=O[nt];if(0>r(K,J))nt<R&&0>r(pt,K)?(O[mt]=pt,O[nt]=J,mt=nt):(O[mt]=K,O[W]=J,mt=W);else if(nt<R&&0>r(pt,J))O[mt]=pt,O[nt]=J,mt=nt;else break t}}return U}function r(O,U){var J=O.sortIndex-U.sortIndex;return J!==0?J:O.id-U.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;h.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();h.unstable_now=function(){return u.now()-c}}var d=[],p=[],g=1,y=null,b=3,v=!1,E=!1,S=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function N(O){for(var U=n(p);U!==null;){if(U.callback===null)s(p);else if(U.startTime<=O)s(p),U.sortIndex=U.expirationTime,t(d,U);else break;U=n(p)}}function M(O){if(S=!1,N(O),!E)if(n(d)!==null)E=!0,I||(I=!0,at());else{var U=n(p);U!==null&&lt(M,U.startTime-O)}}var I=!1,H=-1,X=5,$=-1;function Z(){return T?!0:!(h.unstable_now()-$<X)}function Q(){if(T=!1,I){var O=h.unstable_now();$=O;var U=!0;try{t:{E=!1,S&&(S=!1,L(H),H=-1),v=!0;var J=b;try{e:{for(N(O),y=n(d);y!==null&&!(y.expirationTime>O&&Z());){var mt=y.callback;if(typeof mt=="function"){y.callback=null,b=y.priorityLevel;var R=mt(y.expirationTime<=O);if(O=h.unstable_now(),typeof R=="function"){y.callback=R,N(O),U=!0;break e}y===n(d)&&s(d),N(O)}else s(d);y=n(d)}if(y!==null)U=!0;else{var q=n(p);q!==null&&lt(M,q.startTime-O),U=!1}}break t}finally{y=null,b=J,v=!1}U=void 0}}finally{U?at():I=!1}}}var at;if(typeof C=="function")at=function(){C(Q)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,ut=bt.port2;bt.port1.onmessage=Q,at=function(){ut.postMessage(null)}}else at=function(){w(Q,0)};function lt(O,U){H=w(function(){O(h.unstable_now())},U)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(O){O.callback=null},h.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<O?Math.floor(1e3/O):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(O){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var J=b;b=U;try{return O()}finally{b=J}},h.unstable_requestPaint=function(){T=!0},h.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var J=b;b=O;try{return U()}finally{b=J}},h.unstable_scheduleCallback=function(O,U,J){var mt=h.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?mt+J:mt):J=mt,O){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=J+R,O={id:g++,callback:U,priorityLevel:O,startTime:J,expirationTime:R,sortIndex:-1},J>mt?(O.sortIndex=J,t(p,O),n(d)===null&&O===n(p)&&(S?(L(H),H=-1):S=!0,lt(M,J-mt))):(O.sortIndex=R,t(d,O),E||v||(E=!0,I||(I=!0,at()))),O},h.unstable_shouldYield=Z,h.unstable_wrapCallback=function(O){var U=b;return function(){var J=b;b=U;try{return O.apply(this,arguments)}finally{b=J}}}}(Yc)),Yc}var Gg;function o0(){return Gg||(Gg=1,Xc.exports=l0()),Xc.exports}var $c={exports:{}},Me={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function u0(){if(qg)return Me;qg=1;var h=bh();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var u=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Me.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Me.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(d,p,null,g)},Me.flushSync=function(d){var p=u.T,g=s.p;try{if(u.T=null,s.p=2,d)return d()}finally{u.T=p,s.p=g,s.d.f()}},Me.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},Me.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Me.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=c(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Me.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=c(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},Me.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=c(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Me.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=c(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},Me.requestFormReset=function(d){s.d.r(d)},Me.unstable_batchedUpdates=function(d,p){return d(p)},Me.useFormState=function(d,p,g){return u.H.useFormState(d,p,g)},Me.useFormStatus=function(){return u.H.useHostTransitionStatus()},Me.version="19.1.0",Me}var Vg;function c0(){if(Vg)return $c.exports;Vg=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),$c.exports=u0(),$c.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function h0(){if(Xg)return rr;Xg=1;var h=o0(),t=bh(),n=c0();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function u(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(s(188))}function d(e){var i=e.alternate;if(!i){if(i=l(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){a=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return c(f),e;if(m===o)return c(f),i;m=m.sibling}throw Error(s(188))}if(a.return!==o.return)a=f,o=m;else{for(var A=!1,_=f.child;_;){if(_===a){A=!0,a=f,o=m;break}if(_===o){A=!0,o=f,a=m;break}_=_.sibling}if(!A){for(_=m.child;_;){if(_===a){A=!0,a=m,o=f;break}if(_===o){A=!0,o=m,a=f;break}_=_.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function p(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=p(e),i!==null)return i;e=e.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function at(e){return e===null||typeof e!="object"?null:(e=Q&&e[Q]||e["@@iterator"],typeof e=="function"?e:null)}var bt=Symbol.for("react.client.reference");function ut(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===bt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case I:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case C:return(e.displayName||"Context")+".Provider";case L:return(e._context.displayName||"Context")+".Consumer";case N:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case H:return i=e.displayName||null,i!==null?i:ut(e.type)||"Memo";case X:i=e._payload,e=e._init;try{return ut(e(i))}catch{}}return null}var lt=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},mt=[],R=-1;function q(e){return{current:e}}function W(e){0>R||(e.current=mt[R],mt[R]=null,R--)}function K(e,i){R++,mt[R]=e.current,e.current=i}var nt=q(null),pt=q(null),st=q(null),At=q(null);function Rt(e,i){switch(K(st,i),K(pt,e),K(nt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?cg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=cg(i),e=hg(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(nt),K(nt,e)}function ce(){W(nt),W(pt),W(st)}function Pt(e){e.memoizedState!==null&&K(At,e);var i=nt.current,a=hg(i,e.type);i!==a&&(K(pt,e),K(nt,a))}function Be(e){pt.current===e&&(W(nt),W(pt)),At.current===e&&(W(At),tr._currentValue=J)}var Ve=Object.prototype.hasOwnProperty,he=h.unstable_scheduleCallback,Ot=h.unstable_cancelCallback,se=h.unstable_shouldYield,Xt=h.unstable_requestPaint,de=h.unstable_now,ai=h.unstable_getCurrentPriorityLevel,ri=h.unstable_ImmediatePriority,Br=h.unstable_UserBlockingPriority,Bn=h.unstable_NormalPriority,Ro=h.unstable_LowPriority,zr=h.unstable_IdlePriority,Mo=h.log,Do=h.unstable_setDisableYieldValue,Ni=null,ae=null;function Xe(e){if(typeof Mo=="function"&&Do(e),ae&&typeof ae.setStrictMode=="function")try{ae.setStrictMode(Ni,e)}catch{}}var me=Math.clz32?Math.clz32:Gy,oa=Math.log,jy=Math.LN2;function Gy(e){return e>>>=0,e===0?32:31-(oa(e)/jy|0)|0}var Hr=256,Ir=4194304;function ki(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fr(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var f=0,m=e.suspendedLanes,A=e.pingedLanes;e=e.warmLanes;var _=o&134217727;return _!==0?(o=_&~m,o!==0?f=ki(o):(A&=_,A!==0?f=ki(A):a||(a=_&~e,a!==0&&(f=ki(a))))):(_=o&~m,_!==0?f=ki(_):A!==0?f=ki(A):a||(a=o&~e,a!==0&&(f=ki(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function ua(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function qy(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xh(){var e=Hr;return Hr<<=1,(Hr&4194048)===0&&(Hr=256),e}function Yh(){var e=Ir;return Ir<<=1,(Ir&62914560)===0&&(Ir=4194304),e}function Lo(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function ca(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Vy(e,i,a,o,f,m){var A=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,x=e.expirationTimes,z=e.hiddenUpdates;for(a=A&~a;0<a;){var G=31-me(a),Y=1<<G;_[G]=0,x[G]=-1;var F=z[G];if(F!==null)for(z[G]=null,G=0;G<F.length;G++){var j=F[G];j!==null&&(j.lane&=-536870913)}a&=~Y}o!==0&&$h(e,o,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(A&~i))}function $h(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-me(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function Kh(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-me(a),f=1<<o;f&i|e[o]&i&&(e[o]|=i),a&=~f}}function Oo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function No(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wh(){var e=U.p;return e!==0?e:(e=window.event,e===void 0?32:Dg(e.type))}function Xy(e,i){var a=U.p;try{return U.p=e,i()}finally{U.p=a}}var li=Math.random().toString(36).slice(2),Ce="__reactFiber$"+li,ze="__reactProps$"+li,cs="__reactContainer$"+li,ko="__reactEvents$"+li,Yy="__reactListeners$"+li,$y="__reactHandles$"+li,Qh="__reactResources$"+li,ha="__reactMarker$"+li;function Po(e){delete e[Ce],delete e[ze],delete e[ko],delete e[Yy],delete e[$y]}function hs(e){var i=e[Ce];if(i)return i;for(var a=e.parentNode;a;){if(i=a[cs]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=gg(e);e!==null;){if(a=e[Ce])return a;e=gg(e)}return i}e=a,a=e.parentNode}return null}function ds(e){if(e=e[Ce]||e[cs]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function da(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function fs(e){var i=e[Qh];return i||(i=e[Qh]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ye(e){e[ha]=!0}var Zh=new Set,Jh={};function Pi(e,i){ps(e,i),ps(e+"Capture",i)}function ps(e,i){for(Jh[e]=i,e=0;e<i.length;e++)Zh.add(i[e])}var Ky=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),td={},ed={};function Wy(e){return Ve.call(ed,e)?!0:Ve.call(td,e)?!1:Ky.test(e)?ed[e]=!0:(td[e]=!0,!1)}function Ur(e,i,a){if(Wy(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function jr(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function zn(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var Bo,nd;function gs(e){if(Bo===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Bo=i&&i[1]||"",nd=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bo+e+nd}var zo=!1;function Ho(e,i){if(!e||zo)return"";zo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(j){var F=j}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(j){F=j}e.call(Y.prototype)}}else{try{throw Error()}catch(j){F=j}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(j){if(j&&F&&typeof j.stack=="string")return[j.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),A=m[0],_=m[1];if(A&&_){var x=A.split(`
`),z=_.split(`
`);for(f=o=0;o<x.length&&!x[o].includes("DetermineComponentFrameRoot");)o++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(o===x.length||f===z.length)for(o=x.length-1,f=z.length-1;1<=o&&0<=f&&x[o]!==z[f];)f--;for(;1<=o&&0<=f;o--,f--)if(x[o]!==z[f]){if(o!==1||f!==1)do if(o--,f--,0>f||x[o]!==z[f]){var G=`
`+x[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=f);break}}}finally{zo=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?gs(a):""}function Qy(e){switch(e.tag){case 26:case 27:case 5:return gs(e.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 15:return Ho(e.type,!1);case 11:return Ho(e.type.render,!1);case 1:return Ho(e.type,!0);case 31:return gs("Activity");default:return""}}function id(e){try{var i="";do i+=Qy(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sd(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Zy(e){var i=sd(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(A){o=""+A,m.call(this,A)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(A){o=""+A},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Gr(e){e._valueTracker||(e._valueTracker=Zy(e))}function ad(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=sd(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function qr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Jy=/[\n"\\]/g;function an(e){return e.replace(Jy,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Io(e,i,a,o,f,m,A,_){e.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.type=A:e.removeAttribute("type"),i!=null?A==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+sn(i)):e.value!==""+sn(i)&&(e.value=""+sn(i)):A!=="submit"&&A!=="reset"||e.removeAttribute("value"),i!=null?Fo(e,A,sn(i)):a!=null?Fo(e,A,sn(a)):o!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+sn(_):e.removeAttribute("name")}function rd(e,i,a,o,f,m,A,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;a=a!=null?""+sn(a):"",i=i!=null?""+sn(i):a,_||i===e.value||(e.value=i),e.defaultValue=i}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=_?e.checked:!!o,e.defaultChecked=!!o,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(e.name=A)}function Fo(e,i,a){i==="number"&&qr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ms(e,i,a,o){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&o&&(e[a].defaultSelected=!0)}else{for(a=""+sn(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function ld(e,i,a){if(i!=null&&(i=""+sn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+sn(a):""}function od(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(lt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=sn(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function ys(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var tb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ud(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||tb.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function cd(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in i)o=i[f],i.hasOwnProperty(f)&&a[f]!==o&&ud(e,f,o)}else for(var m in i)i.hasOwnProperty(m)&&ud(e,m,i[m])}function Uo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vr(e){return nb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jo=null;function Go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bs=null,vs=null;function hd(e){var i=ds(e);if(i&&(e=i.stateNode)){var a=e[ze]||null;t:switch(e=i.stateNode,i.type){case"input":if(Io(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+an(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var f=o[ze]||null;if(!f)throw Error(s(90));Io(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&ad(o)}break t;case"textarea":ld(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&ms(e,!!a.multiple,i,!1)}}}var qo=!1;function dd(e,i,a){if(qo)return e(i,a);qo=!0;try{var o=e(i);return o}finally{if(qo=!1,(bs!==null||vs!==null)&&(Dl(),bs&&(i=bs,e=vs,vs=bs=null,hd(i),e)))for(i=0;i<e.length;i++)hd(e[i])}}function fa(e,i){var a=e.stateNode;if(a===null)return null;var o=a[ze]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vo=!1;if(Hn)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Vo=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Vo=!1}var oi=null,Xo=null,Xr=null;function fd(){if(Xr)return Xr;var e,i=Xo,a=i.length,o,f="value"in oi?oi.value:oi.textContent,m=f.length;for(e=0;e<a&&i[e]===f[e];e++);var A=a-e;for(o=1;o<=A&&i[a-o]===f[m-o];o++);return Xr=f.slice(e,1<o?1-o:void 0)}function Yr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function $r(){return!0}function pd(){return!1}function He(e){function i(a,o,f,m,A){this._reactName=a,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=A,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?$r:pd,this.isPropagationStopped=pd,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),i}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kr=He(Bi),ga=g({},Bi,{view:0,detail:0}),ib=He(ga),Yo,$o,ma,Wr=g({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ma&&(ma&&e.type==="mousemove"?(Yo=e.screenX-ma.screenX,$o=e.screenY-ma.screenY):$o=Yo=0,ma=e),Yo)},movementY:function(e){return"movementY"in e?e.movementY:$o}}),gd=He(Wr),sb=g({},Wr,{dataTransfer:0}),ab=He(sb),rb=g({},ga,{relatedTarget:0}),Ko=He(rb),lb=g({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),ob=He(lb),ub=g({},Bi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cb=He(ub),hb=g({},Bi,{data:0}),md=He(hb),db={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gb(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=pb[e])?!!i[e]:!1}function Wo(){return gb}var mb=g({},ga,{key:function(e){if(e.key){var i=db[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Yr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wo,charCode:function(e){return e.type==="keypress"?Yr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yb=He(mb),bb=g({},Wr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yd=He(bb),vb=g({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wo}),Ab=He(vb),Sb=g({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eb=He(Sb),_b=g({},Wr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wb=He(_b),Tb=g({},Bi,{newState:0,oldState:0}),xb=He(Tb),Cb=[9,13,27,32],Qo=Hn&&"CompositionEvent"in window,ya=null;Hn&&"documentMode"in document&&(ya=document.documentMode);var Rb=Hn&&"TextEvent"in window&&!ya,bd=Hn&&(!Qo||ya&&8<ya&&11>=ya),vd=" ",Ad=!1;function Sd(e,i){switch(e){case"keyup":return Cb.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var As=!1;function Mb(e,i){switch(e){case"compositionend":return Ed(i);case"keypress":return i.which!==32?null:(Ad=!0,vd);case"textInput":return e=i.data,e===vd&&Ad?null:e;default:return null}}function Db(e,i){if(As)return e==="compositionend"||!Qo&&Sd(e,i)?(e=fd(),Xr=Xo=oi=null,As=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return bd&&i.locale!=="ko"?null:i.data;default:return null}}var Lb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Lb[e.type]:i==="textarea"}function wd(e,i,a,o){bs?vs?vs.push(o):vs=[o]:bs=o,i=Bl(i,"onChange"),0<i.length&&(a=new Kr("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var ba=null,va=null;function Ob(e){ag(e,0)}function Qr(e){var i=da(e);if(ad(i))return e}function Td(e,i){if(e==="change")return i}var xd=!1;if(Hn){var Zo;if(Hn){var Jo="oninput"in document;if(!Jo){var Cd=document.createElement("div");Cd.setAttribute("oninput","return;"),Jo=typeof Cd.oninput=="function"}Zo=Jo}else Zo=!1;xd=Zo&&(!document.documentMode||9<document.documentMode)}function Rd(){ba&&(ba.detachEvent("onpropertychange",Md),va=ba=null)}function Md(e){if(e.propertyName==="value"&&Qr(va)){var i=[];wd(i,va,e,Go(e)),dd(Ob,i)}}function Nb(e,i,a){e==="focusin"?(Rd(),ba=i,va=a,ba.attachEvent("onpropertychange",Md)):e==="focusout"&&Rd()}function kb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qr(va)}function Pb(e,i){if(e==="click")return Qr(i)}function Bb(e,i){if(e==="input"||e==="change")return Qr(i)}function zb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Ye=typeof Object.is=="function"?Object.is:zb;function Aa(e,i){if(Ye(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var f=a[o];if(!Ve.call(i,f)||!Ye(e[f],i[f]))return!1}return!0}function Dd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ld(e,i){var a=Dd(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Dd(a)}}function Od(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Od(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Nd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=qr(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=qr(e.document)}return i}function tu(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Hb=Hn&&"documentMode"in document&&11>=document.documentMode,Ss=null,eu=null,Sa=null,nu=!1;function kd(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nu||Ss==null||Ss!==qr(o)||(o=Ss,"selectionStart"in o&&tu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Sa&&Aa(Sa,o)||(Sa=o,o=Bl(eu,"onSelect"),0<o.length&&(i=new Kr("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=Ss)))}function zi(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Es={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionrun:zi("Transition","TransitionRun"),transitionstart:zi("Transition","TransitionStart"),transitioncancel:zi("Transition","TransitionCancel"),transitionend:zi("Transition","TransitionEnd")},iu={},Pd={};Hn&&(Pd=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Hi(e){if(iu[e])return iu[e];if(!Es[e])return e;var i=Es[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Pd)return iu[e]=i[a];return e}var Bd=Hi("animationend"),zd=Hi("animationiteration"),Hd=Hi("animationstart"),Ib=Hi("transitionrun"),Fb=Hi("transitionstart"),Ub=Hi("transitioncancel"),Id=Hi("transitionend"),Fd=new Map,su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");su.push("scrollEnd");function mn(e,i){Fd.set(e,i),Pi(i,[e])}var Ud=new WeakMap;function rn(e,i){if(typeof e=="object"&&e!==null){var a=Ud.get(e);return a!==void 0?a:(i={value:e,source:i,stack:id(i)},Ud.set(e,i),i)}return{value:e,source:i,stack:id(i)}}var ln=[],_s=0,au=0;function Zr(){for(var e=_s,i=au=_s=0;i<e;){var a=ln[i];ln[i++]=null;var o=ln[i];ln[i++]=null;var f=ln[i];ln[i++]=null;var m=ln[i];if(ln[i++]=null,o!==null&&f!==null){var A=o.pending;A===null?f.next=f:(f.next=A.next,A.next=f),o.pending=f}m!==0&&jd(a,f,m)}}function Jr(e,i,a,o){ln[_s++]=e,ln[_s++]=i,ln[_s++]=a,ln[_s++]=o,au|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function ru(e,i,a,o){return Jr(e,i,a,o),tl(e)}function ws(e,i){return Jr(e,null,null,i),tl(e)}function jd(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var f=!1,m=e.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&i!==null&&(f=31-me(a),e=m.hiddenUpdates,o=e[f],o===null?e[f]=[i]:o.push(i),i.lane=a|536870912),m):null}function tl(e){if(50<Xa)throw Xa=0,dc=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ts={};function jb(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $e(e,i,a,o){return new jb(e,i,a,o)}function lu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function In(e,i){var a=e.alternate;return a===null?(a=$e(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Gd(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function el(e,i,a,o,f,m){var A=0;if(o=e,typeof e=="function")lu(e)&&(A=1);else if(typeof e=="string")A=qv(e,a,nt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case $:return e=$e(31,a,i,f),e.elementType=$,e.lanes=m,e;case E:return Ii(a.children,f,m,i);case S:A=8,f|=24;break;case T:return e=$e(12,a,i,f|2),e.elementType=T,e.lanes=m,e;case M:return e=$e(13,a,i,f),e.elementType=M,e.lanes=m,e;case I:return e=$e(19,a,i,f),e.elementType=I,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w:case C:A=10;break t;case L:A=9;break t;case N:A=11;break t;case H:A=14;break t;case X:A=16,o=null;break t}A=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=$e(A,a,i,f),i.elementType=e,i.type=o,i.lanes=m,i}function Ii(e,i,a,o){return e=$e(7,e,o,i),e.lanes=a,e}function ou(e,i,a){return e=$e(6,e,null,i),e.lanes=a,e}function uu(e,i,a){return i=$e(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var xs=[],Cs=0,nl=null,il=0,on=[],un=0,Fi=null,Fn=1,Un="";function Ui(e,i){xs[Cs++]=il,xs[Cs++]=nl,nl=e,il=i}function qd(e,i,a){on[un++]=Fn,on[un++]=Un,on[un++]=Fi,Fi=e;var o=Fn;e=Un;var f=32-me(o)-1;o&=~(1<<f),a+=1;var m=32-me(i)+f;if(30<m){var A=f-f%5;m=(o&(1<<A)-1).toString(32),o>>=A,f-=A,Fn=1<<32-me(i)+f|a<<f|o,Un=m+e}else Fn=1<<m|a<<f|o,Un=e}function cu(e){e.return!==null&&(Ui(e,1),qd(e,1,0))}function hu(e){for(;e===nl;)nl=xs[--Cs],xs[Cs]=null,il=xs[--Cs],xs[Cs]=null;for(;e===Fi;)Fi=on[--un],on[un]=null,Un=on[--un],on[un]=null,Fn=on[--un],on[un]=null}var Ne=null,Wt=null,Lt=!1,ji=null,Sn=!1,du=Error(s(519));function Gi(e){var i=Error(s(418,""));throw wa(rn(i,e)),du}function Vd(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Ce]=e,i[ze]=o,a){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(a=0;a<$a.length;a++)Tt($a[a],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":Tt("invalid",i),rd(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Gr(i);break;case"select":Tt("invalid",i);break;case"textarea":Tt("invalid",i),od(i,o.value,o.defaultValue,o.children),Gr(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||ug(i.textContent,a)?(o.popover!=null&&(Tt("beforetoggle",i),Tt("toggle",i)),o.onScroll!=null&&Tt("scroll",i),o.onScrollEnd!=null&&Tt("scrollend",i),o.onClick!=null&&(i.onclick=zl),i=!0):i=!1,i||Gi(e)}function Xd(e){for(Ne=e.return;Ne;)switch(Ne.tag){case 5:case 13:Sn=!1;return;case 27:case 3:Sn=!0;return;default:Ne=Ne.return}}function Ea(e){if(e!==Ne)return!1;if(!Lt)return Xd(e),Lt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Rc(e.type,e.memoizedProps)),a=!a),a&&Wt&&Gi(e),Xd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){Wt=bn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}Wt=null}}else i===27?(i=Wt,wi(e.type)?(e=Oc,Oc=null,Wt=e):Wt=i):Wt=Ne?bn(e.stateNode.nextSibling):null;return!0}function _a(){Wt=Ne=null,Lt=!1}function Yd(){var e=ji;return e!==null&&(Ue===null?Ue=e:Ue.push.apply(Ue,e),ji=null),e}function wa(e){ji===null?ji=[e]:ji.push(e)}var fu=q(null),qi=null,jn=null;function ui(e,i,a){K(fu,i._currentValue),i._currentValue=a}function Gn(e){e._currentValue=fu.current,W(fu)}function pu(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function gu(e,i,a,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var A=f.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=f;for(var x=0;x<i.length;x++)if(_.context===i[x]){m.lanes|=a,_=m.alternate,_!==null&&(_.lanes|=a),pu(m.return,a,e),o||(A=null);break t}m=_.next}}else if(f.tag===18){if(A=f.return,A===null)throw Error(s(341));A.lanes|=a,m=A.alternate,m!==null&&(m.lanes|=a),pu(A,a,e),A=null}else A=f.child;if(A!==null)A.return=f;else for(A=f;A!==null;){if(A===e){A=null;break}if(f=A.sibling,f!==null){f.return=A.return,A=f;break}A=A.return}f=A}}function Ta(e,i,a,o){e=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var A=f.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var _=f.type;Ye(f.pendingProps.value,A.value)||(e!==null?e.push(_):e=[_])}}else if(f===At.current){if(A=f.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(tr):e=[tr])}f=f.return}e!==null&&gu(i,e,a,o),i.flags|=262144}function sl(e){for(e=e.firstContext;e!==null;){if(!Ye(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vi(e){qi=e,jn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Re(e){return $d(qi,e)}function al(e,i){return qi===null&&Vi(e),$d(e,i)}function $d(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},jn===null){if(e===null)throw Error(s(308));jn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else jn=jn.next=i;return a}var Gb=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},qb=h.unstable_scheduleCallback,Vb=h.unstable_NormalPriority,fe={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mu(){return{controller:new Gb,data:new Map,refCount:0}}function xa(e){e.refCount--,e.refCount===0&&qb(Vb,function(){e.controller.abort()})}var Ca=null,yu=0,Rs=0,Ms=null;function Xb(e,i){if(Ca===null){var a=Ca=[];yu=0,Rs=vc(),Ms={status:"pending",value:void 0,then:function(o){a.push(o)}}}return yu++,i.then(Kd,Kd),i}function Kd(){if(--yu===0&&Ca!==null){Ms!==null&&(Ms.status="fulfilled");var e=Ca;Ca=null,Rs=0,Ms=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Yb(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(o.status="rejected",o.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),o}var Wd=O.S;O.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Xb(e,i),Wd!==null&&Wd(e,i)};var Xi=q(null);function bu(){var e=Xi.current;return e!==null?e:jt.pooledCache}function rl(e,i){i===null?K(Xi,Xi.current):K(Xi,i.pool)}function Qd(){var e=bu();return e===null?null:{parent:fe._currentValue,pool:e}}var Ra=Error(s(460)),Zd=Error(s(474)),ll=Error(s(542)),vu={then:function(){}};function Jd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ol(){}function tf(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(ol,ol),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,nf(e),e;default:if(typeof i.status=="string")i.then(ol,ol);else{if(e=jt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=o}},function(o){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,nf(e),e}throw Ma=i,Ra}}var Ma=null;function ef(){if(Ma===null)throw Error(s(459));var e=Ma;return Ma=null,e}function nf(e){if(e===Ra||e===ll)throw Error(s(483))}var ci=!1;function Au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Su(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function hi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function di(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Nt&2)!==0){var f=o.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),o.pending=i,i=tl(e),jd(e,null,a),i}return Jr(e,o,i,a),tl(e)}function Da(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,Kh(e,a)}}function Eu(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=A:m=m.next=A,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var _u=!1;function La(){if(_u){var e=Ms;if(e!==null)throw e}}function Oa(e,i,a,o){_u=!1;var f=e.updateQueue;ci=!1;var m=f.firstBaseUpdate,A=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var x=_,z=x.next;x.next=null,A===null?m=z:A.next=z,A=x;var G=e.alternate;G!==null&&(G=G.updateQueue,_=G.lastBaseUpdate,_!==A&&(_===null?G.firstBaseUpdate=z:_.next=z,G.lastBaseUpdate=x))}if(m!==null){var Y=f.baseState;A=0,G=z=x=null,_=m;do{var F=_.lane&-536870913,j=F!==_.lane;if(j?(Mt&F)===F:(o&F)===F){F!==0&&F===Rs&&(_u=!0),G!==null&&(G=G.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var gt=e,ht=_;F=i;var Ht=a;switch(ht.tag){case 1:if(gt=ht.payload,typeof gt=="function"){Y=gt.call(Ht,Y,F);break t}Y=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=ht.payload,F=typeof gt=="function"?gt.call(Ht,Y,F):gt,F==null)break t;Y=g({},Y,F);break t;case 2:ci=!0}}F=_.callback,F!==null&&(e.flags|=64,j&&(e.flags|=8192),j=f.callbacks,j===null?f.callbacks=[F]:j.push(F))}else j={lane:F,tag:_.tag,payload:_.payload,callback:_.callback,next:null},G===null?(z=G=j,x=Y):G=G.next=j,A|=F;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;j=_,_=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);G===null&&(x=Y),f.baseState=x,f.firstBaseUpdate=z,f.lastBaseUpdate=G,m===null&&(f.shared.lanes=0),Ai|=A,e.lanes=A,e.memoizedState=Y}}function sf(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function af(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)sf(a[e],i)}var Ds=q(null),ul=q(0);function rf(e,i){e=Wn,K(ul,e),K(Ds,i),Wn=e|i.baseLanes}function wu(){K(ul,Wn),K(Ds,Ds.current)}function Tu(){Wn=ul.current,W(Ds),W(ul)}var fi=0,Et=null,Bt=null,re=null,cl=!1,Ls=!1,Yi=!1,hl=0,Na=0,Os=null,$b=0;function Zt(){throw Error(s(321))}function xu(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Ye(e[a],i[a]))return!1;return!0}function Cu(e,i,a,o,f,m){return fi=m,Et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,O.H=e===null||e.memoizedState===null?Gf:qf,Yi=!1,m=a(o,f),Yi=!1,Ls&&(m=of(i,a,o,f)),lf(e),m}function lf(e){O.H=yl;var i=Bt!==null&&Bt.next!==null;if(fi=0,re=Bt=Et=null,cl=!1,Na=0,Os=null,i)throw Error(s(300));e===null||be||(e=e.dependencies,e!==null&&sl(e)&&(be=!0))}function of(e,i,a,o){Et=e;var f=0;do{if(Ls&&(Os=null),Na=0,Ls=!1,25<=f)throw Error(s(301));if(f+=1,re=Bt=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}O.H=ev,m=i(a,o)}while(Ls);return m}function Kb(){var e=O.H,i=e.useState()[0];return i=typeof i.then=="function"?ka(i):i,e=e.useState()[0],(Bt!==null?Bt.memoizedState:null)!==e&&(Et.flags|=1024),i}function Ru(){var e=hl!==0;return hl=0,e}function Mu(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Du(e){if(cl){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}cl=!1}fi=0,re=Bt=Et=null,Ls=!1,Na=hl=0,Os=null}function Ie(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?Et.memoizedState=re=e:re=re.next=e,re}function le(){if(Bt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var i=re===null?Et.memoizedState:re.next;if(i!==null)re=i,Bt=e;else{if(e===null)throw Et.alternate===null?Error(s(467)):Error(s(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},re===null?Et.memoizedState=re=e:re=re.next=e}return re}function Lu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ka(e){var i=Na;return Na+=1,Os===null&&(Os=[]),e=tf(Os,e,i),i=Et,(re===null?i.memoizedState:re.next)===null&&(i=i.alternate,O.H=i===null||i.memoizedState===null?Gf:qf),e}function dl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ka(e);if(e.$$typeof===C)return Re(e)}throw Error(s(438,String(e)))}function Ou(e){var i=null,a=Et.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Et.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Lu(),Et.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=Z;return i.index++,a}function qn(e,i){return typeof i=="function"?i(e):i}function fl(e){var i=le();return Nu(i,Bt,e)}function Nu(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var f=e.baseQueue,m=o.pending;if(m!==null){if(f!==null){var A=f.next;f.next=m.next,m.next=A}i.baseQueue=f=m,o.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{i=f.next;var _=A=null,x=null,z=i,G=!1;do{var Y=z.lane&-536870913;if(Y!==z.lane?(Mt&Y)===Y:(fi&Y)===Y){var F=z.revertLane;if(F===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),Y===Rs&&(G=!0);else if((fi&F)===F){z=z.next,F===Rs&&(G=!0);continue}else Y={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(_=x=Y,A=m):x=x.next=Y,Et.lanes|=F,Ai|=F;Y=z.action,Yi&&a(m,Y),m=z.hasEagerState?z.eagerState:a(m,Y)}else F={lane:Y,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(_=x=F,A=m):x=x.next=F,Et.lanes|=Y,Ai|=Y;z=z.next}while(z!==null&&z!==i);if(x===null?A=m:x.next=_,!Ye(m,e.memoizedState)&&(be=!0,G&&(a=Ms,a!==null)))throw a;e.memoizedState=m,e.baseState=A,e.baseQueue=x,o.lastRenderedState=m}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function ku(e){var i=le(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var A=f=f.next;do m=e(m,A.action),A=A.next;while(A!==f);Ye(m,i.memoizedState)||(be=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,o]}function uf(e,i,a){var o=Et,f=le(),m=Lt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=i();var A=!Ye((Bt||f).memoizedState,a);A&&(f.memoizedState=a,be=!0),f=f.queue;var _=df.bind(null,o,f,e);if(Pa(2048,8,_,[e]),f.getSnapshot!==i||A||re!==null&&re.memoizedState.tag&1){if(o.flags|=2048,Ns(9,pl(),hf.bind(null,o,f,a,i),null),jt===null)throw Error(s(349));m||(fi&124)!==0||cf(o,i,a)}return a}function cf(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Et.updateQueue,i===null?(i=Lu(),Et.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function hf(e,i,a,o){i.value=a,i.getSnapshot=o,ff(i)&&pf(e)}function df(e,i,a){return a(function(){ff(i)&&pf(e)})}function ff(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Ye(e,a)}catch{return!0}}function pf(e){var i=ws(e,2);i!==null&&Je(i,e,2)}function Pu(e){var i=Ie();if(typeof e=="function"){var a=e;if(e=a(),Yi){Xe(!0);try{a()}finally{Xe(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:e},i}function gf(e,i,a,o){return e.baseState=a,Nu(e,Bt,typeof o=="function"?o:qn)}function Wb(e,i,a,o,f){if(ml(e))throw Error(s(485));if(e=i.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){m.listeners.push(A)}};O.T!==null?a(!0):m.isTransition=!1,o(m),a=i.pending,a===null?(m.next=i.pending=m,mf(i,m)):(m.next=a.next,i.pending=a.next=m)}}function mf(e,i){var a=i.action,o=i.payload,f=e.state;if(i.isTransition){var m=O.T,A={};O.T=A;try{var _=a(f,o),x=O.S;x!==null&&x(A,_),yf(e,i,_)}catch(z){Bu(e,i,z)}finally{O.T=m}}else try{m=a(f,o),yf(e,i,m)}catch(z){Bu(e,i,z)}}function yf(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){bf(e,i,o)},function(o){return Bu(e,i,o)}):bf(e,i,a)}function bf(e,i,a){i.status="fulfilled",i.value=a,vf(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,mf(e,a)))}function Bu(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,vf(i),i=i.next;while(i!==o)}e.action=null}function vf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Af(e,i){return i}function Sf(e,i){if(Lt){var a=jt.formState;if(a!==null){t:{var o=Et;if(Lt){if(Wt){e:{for(var f=Wt,m=Sn;f.nodeType!==8;){if(!m){f=null;break e}if(f=bn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Wt=bn(f.nextSibling),o=f.data==="F!";break t}}Gi(o)}o=!1}o&&(i=a[0])}}return a=Ie(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Af,lastRenderedState:i},a.queue=o,a=Ff.bind(null,Et,o),o.dispatch=a,o=Pu(!1),m=Uu.bind(null,Et,!1,o.queue),o=Ie(),f={state:i,dispatch:null,action:e,pending:null},o.queue=f,a=Wb.bind(null,Et,f,m,a),f.dispatch=a,o.memoizedState=e,[i,a,!1]}function Ef(e){var i=le();return _f(i,Bt,e)}function _f(e,i,a){if(i=Nu(e,i,Af)[0],e=fl(qn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=ka(i)}catch(A){throw A===Ra?ll:A}else o=i;i=le();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(Et.flags|=2048,Ns(9,pl(),Qb.bind(null,f,a),null)),[o,m,e]}function Qb(e,i){e.action=i}function wf(e){var i=le(),a=Bt;if(a!==null)return _f(i,a,e);le(),i=i.memoizedState,a=le();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function Ns(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Et.updateQueue,i===null&&(i=Lu(),Et.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function pl(){return{destroy:void 0,resource:void 0}}function Tf(){return le().memoizedState}function gl(e,i,a,o){var f=Ie();o=o===void 0?null:o,Et.flags|=e,f.memoizedState=Ns(1|i,pl(),a,o)}function Pa(e,i,a,o){var f=le();o=o===void 0?null:o;var m=f.memoizedState.inst;Bt!==null&&o!==null&&xu(o,Bt.memoizedState.deps)?f.memoizedState=Ns(i,m,a,o):(Et.flags|=e,f.memoizedState=Ns(1|i,m,a,o))}function xf(e,i){gl(8390656,8,e,i)}function Cf(e,i){Pa(2048,8,e,i)}function Rf(e,i){return Pa(4,2,e,i)}function Mf(e,i){return Pa(4,4,e,i)}function Df(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Lf(e,i,a){a=a!=null?a.concat([e]):null,Pa(4,4,Df.bind(null,i,e),a)}function zu(){}function Of(e,i){var a=le();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&xu(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Nf(e,i){var a=le();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&xu(i,o[1]))return o[0];if(o=e(),Yi){Xe(!0);try{e()}finally{Xe(!1)}}return a.memoizedState=[o,i],o}function Hu(e,i,a){return a===void 0||(fi&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Bp(),Et.lanes|=e,Ai|=e,a)}function kf(e,i,a,o){return Ye(a,i)?a:Ds.current!==null?(e=Hu(e,a,o),Ye(e,i)||(be=!0),e):(fi&42)===0?(be=!0,e.memoizedState=a):(e=Bp(),Et.lanes|=e,Ai|=e,i)}function Pf(e,i,a,o,f){var m=U.p;U.p=m!==0&&8>m?m:8;var A=O.T,_={};O.T=_,Uu(e,!1,i,a);try{var x=f(),z=O.S;if(z!==null&&z(_,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var G=Yb(x,o);Ba(e,i,G,Ze(e))}else Ba(e,i,o,Ze(e))}catch(Y){Ba(e,i,{then:function(){},status:"rejected",reason:Y},Ze())}finally{U.p=m,O.T=A}}function Zb(){}function Iu(e,i,a,o){if(e.tag!==5)throw Error(s(476));var f=Bf(e).queue;Pf(e,f,i,J,a===null?Zb:function(){return zf(e),a(o)})}function Bf(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:J},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function zf(e){var i=Bf(e).next.queue;Ba(e,i,{},Ze())}function Fu(){return Re(tr)}function Hf(){return le().memoizedState}function If(){return le().memoizedState}function Jb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=Ze();e=hi(a);var o=di(i,e,a);o!==null&&(Je(o,i,a),Da(o,i,a)),i={cache:mu()},e.payload=i;return}i=i.return}}function tv(e,i,a){var o=Ze();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ml(e)?Uf(i,a):(a=ru(e,i,a,o),a!==null&&(Je(a,e,o),jf(a,i,o)))}function Ff(e,i,a){var o=Ze();Ba(e,i,a,o)}function Ba(e,i,a,o){var f={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ml(e))Uf(i,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var A=i.lastRenderedState,_=m(A,a);if(f.hasEagerState=!0,f.eagerState=_,Ye(_,A))return Jr(e,i,f,0),jt===null&&Zr(),!1}catch{}finally{}if(a=ru(e,i,f,o),a!==null)return Je(a,e,o),jf(a,i,o),!0}return!1}function Uu(e,i,a,o){if(o={lane:2,revertLane:vc(),action:o,hasEagerState:!1,eagerState:null,next:null},ml(e)){if(i)throw Error(s(479))}else i=ru(e,a,o,2),i!==null&&Je(i,e,2)}function ml(e){var i=e.alternate;return e===Et||i!==null&&i===Et}function Uf(e,i){Ls=cl=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function jf(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,Kh(e,a)}}var yl={readContext:Re,use:dl,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt},Gf={readContext:Re,use:dl,useCallback:function(e,i){return Ie().memoizedState=[e,i===void 0?null:i],e},useContext:Re,useEffect:xf,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,gl(4194308,4,Df.bind(null,i,e),a)},useLayoutEffect:function(e,i){return gl(4194308,4,e,i)},useInsertionEffect:function(e,i){gl(4,2,e,i)},useMemo:function(e,i){var a=Ie();i=i===void 0?null:i;var o=e();if(Yi){Xe(!0);try{e()}finally{Xe(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=Ie();if(a!==void 0){var f=a(i);if(Yi){Xe(!0);try{a(i)}finally{Xe(!1)}}}else f=i;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=tv.bind(null,Et,e),[o.memoizedState,e]},useRef:function(e){var i=Ie();return e={current:e},i.memoizedState=e},useState:function(e){e=Pu(e);var i=e.queue,a=Ff.bind(null,Et,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:zu,useDeferredValue:function(e,i){var a=Ie();return Hu(a,e,i)},useTransition:function(){var e=Pu(!1);return e=Pf.bind(null,Et,e.queue,!0,!1),Ie().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Et,f=Ie();if(Lt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),jt===null)throw Error(s(349));(Mt&124)!==0||cf(o,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,xf(df.bind(null,o,m,e),[e]),o.flags|=2048,Ns(9,pl(),hf.bind(null,o,m,a,i),null),a},useId:function(){var e=Ie(),i=jt.identifierPrefix;if(Lt){var a=Un,o=Fn;a=(o&~(1<<32-me(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=hl++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=$b++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:Fu,useFormState:Sf,useActionState:Sf,useOptimistic:function(e){var i=Ie();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Uu.bind(null,Et,!0,a),a.dispatch=i,[e,i]},useMemoCache:Ou,useCacheRefresh:function(){return Ie().memoizedState=Jb.bind(null,Et)}},qf={readContext:Re,use:dl,useCallback:Of,useContext:Re,useEffect:Cf,useImperativeHandle:Lf,useInsertionEffect:Rf,useLayoutEffect:Mf,useMemo:Nf,useReducer:fl,useRef:Tf,useState:function(){return fl(qn)},useDebugValue:zu,useDeferredValue:function(e,i){var a=le();return kf(a,Bt.memoizedState,e,i)},useTransition:function(){var e=fl(qn)[0],i=le().memoizedState;return[typeof e=="boolean"?e:ka(e),i]},useSyncExternalStore:uf,useId:Hf,useHostTransitionStatus:Fu,useFormState:Ef,useActionState:Ef,useOptimistic:function(e,i){var a=le();return gf(a,Bt,e,i)},useMemoCache:Ou,useCacheRefresh:If},ev={readContext:Re,use:dl,useCallback:Of,useContext:Re,useEffect:Cf,useImperativeHandle:Lf,useInsertionEffect:Rf,useLayoutEffect:Mf,useMemo:Nf,useReducer:ku,useRef:Tf,useState:function(){return ku(qn)},useDebugValue:zu,useDeferredValue:function(e,i){var a=le();return Bt===null?Hu(a,e,i):kf(a,Bt.memoizedState,e,i)},useTransition:function(){var e=ku(qn)[0],i=le().memoizedState;return[typeof e=="boolean"?e:ka(e),i]},useSyncExternalStore:uf,useId:Hf,useHostTransitionStatus:Fu,useFormState:wf,useActionState:wf,useOptimistic:function(e,i){var a=le();return Bt!==null?gf(a,Bt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ou,useCacheRefresh:If},ks=null,za=0;function bl(e){var i=za;return za+=1,ks===null&&(ks=[]),tf(ks,e,i)}function Ha(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function vl(e,i){throw i.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Vf(e){var i=e._init;return i(e._payload)}function Xf(e){function i(k,D){if(e){var B=k.deletions;B===null?(k.deletions=[D],k.flags|=16):B.push(D)}}function a(k,D){if(!e)return null;for(;D!==null;)i(k,D),D=D.sibling;return null}function o(k){for(var D=new Map;k!==null;)k.key!==null?D.set(k.key,k):D.set(k.index,k),k=k.sibling;return D}function f(k,D){return k=In(k,D),k.index=0,k.sibling=null,k}function m(k,D,B){return k.index=B,e?(B=k.alternate,B!==null?(B=B.index,B<D?(k.flags|=67108866,D):B):(k.flags|=67108866,D)):(k.flags|=1048576,D)}function A(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function _(k,D,B,V){return D===null||D.tag!==6?(D=ou(B,k.mode,V),D.return=k,D):(D=f(D,B),D.return=k,D)}function x(k,D,B,V){var it=B.type;return it===E?G(k,D,B.props.children,V,B.key):D!==null&&(D.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===X&&Vf(it)===D.type)?(D=f(D,B.props),Ha(D,B),D.return=k,D):(D=el(B.type,B.key,B.props,null,k.mode,V),Ha(D,B),D.return=k,D)}function z(k,D,B,V){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=uu(B,k.mode,V),D.return=k,D):(D=f(D,B.children||[]),D.return=k,D)}function G(k,D,B,V,it){return D===null||D.tag!==7?(D=Ii(B,k.mode,V,it),D.return=k,D):(D=f(D,B),D.return=k,D)}function Y(k,D,B){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=ou(""+D,k.mode,B),D.return=k,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case b:return B=el(D.type,D.key,D.props,null,k.mode,B),Ha(B,D),B.return=k,B;case v:return D=uu(D,k.mode,B),D.return=k,D;case X:var V=D._init;return D=V(D._payload),Y(k,D,B)}if(lt(D)||at(D))return D=Ii(D,k.mode,B,null),D.return=k,D;if(typeof D.then=="function")return Y(k,bl(D),B);if(D.$$typeof===C)return Y(k,al(k,D),B);vl(k,D)}return null}function F(k,D,B,V){var it=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return it!==null?null:_(k,D,""+B,V);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return B.key===it?x(k,D,B,V):null;case v:return B.key===it?z(k,D,B,V):null;case X:return it=B._init,B=it(B._payload),F(k,D,B,V)}if(lt(B)||at(B))return it!==null?null:G(k,D,B,V,null);if(typeof B.then=="function")return F(k,D,bl(B),V);if(B.$$typeof===C)return F(k,D,al(k,B),V);vl(k,B)}return null}function j(k,D,B,V,it){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return k=k.get(B)||null,_(D,k,""+V,it);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case b:return k=k.get(V.key===null?B:V.key)||null,x(D,k,V,it);case v:return k=k.get(V.key===null?B:V.key)||null,z(D,k,V,it);case X:var _t=V._init;return V=_t(V._payload),j(k,D,B,V,it)}if(lt(V)||at(V))return k=k.get(B)||null,G(D,k,V,it,null);if(typeof V.then=="function")return j(k,D,B,bl(V),it);if(V.$$typeof===C)return j(k,D,B,al(D,V),it);vl(D,V)}return null}function gt(k,D,B,V){for(var it=null,_t=null,rt=D,dt=D=0,Ae=null;rt!==null&&dt<B.length;dt++){rt.index>dt?(Ae=rt,rt=null):Ae=rt.sibling;var Dt=F(k,rt,B[dt],V);if(Dt===null){rt===null&&(rt=Ae);break}e&&rt&&Dt.alternate===null&&i(k,rt),D=m(Dt,D,dt),_t===null?it=Dt:_t.sibling=Dt,_t=Dt,rt=Ae}if(dt===B.length)return a(k,rt),Lt&&Ui(k,dt),it;if(rt===null){for(;dt<B.length;dt++)rt=Y(k,B[dt],V),rt!==null&&(D=m(rt,D,dt),_t===null?it=rt:_t.sibling=rt,_t=rt);return Lt&&Ui(k,dt),it}for(rt=o(rt);dt<B.length;dt++)Ae=j(rt,k,dt,B[dt],V),Ae!==null&&(e&&Ae.alternate!==null&&rt.delete(Ae.key===null?dt:Ae.key),D=m(Ae,D,dt),_t===null?it=Ae:_t.sibling=Ae,_t=Ae);return e&&rt.forEach(function(Mi){return i(k,Mi)}),Lt&&Ui(k,dt),it}function ht(k,D,B,V){if(B==null)throw Error(s(151));for(var it=null,_t=null,rt=D,dt=D=0,Ae=null,Dt=B.next();rt!==null&&!Dt.done;dt++,Dt=B.next()){rt.index>dt?(Ae=rt,rt=null):Ae=rt.sibling;var Mi=F(k,rt,Dt.value,V);if(Mi===null){rt===null&&(rt=Ae);break}e&&rt&&Mi.alternate===null&&i(k,rt),D=m(Mi,D,dt),_t===null?it=Mi:_t.sibling=Mi,_t=Mi,rt=Ae}if(Dt.done)return a(k,rt),Lt&&Ui(k,dt),it;if(rt===null){for(;!Dt.done;dt++,Dt=B.next())Dt=Y(k,Dt.value,V),Dt!==null&&(D=m(Dt,D,dt),_t===null?it=Dt:_t.sibling=Dt,_t=Dt);return Lt&&Ui(k,dt),it}for(rt=o(rt);!Dt.done;dt++,Dt=B.next())Dt=j(rt,k,dt,Dt.value,V),Dt!==null&&(e&&Dt.alternate!==null&&rt.delete(Dt.key===null?dt:Dt.key),D=m(Dt,D,dt),_t===null?it=Dt:_t.sibling=Dt,_t=Dt);return e&&rt.forEach(function(n0){return i(k,n0)}),Lt&&Ui(k,dt),it}function Ht(k,D,B,V){if(typeof B=="object"&&B!==null&&B.type===E&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case b:t:{for(var it=B.key;D!==null;){if(D.key===it){if(it=B.type,it===E){if(D.tag===7){a(k,D.sibling),V=f(D,B.props.children),V.return=k,k=V;break t}}else if(D.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===X&&Vf(it)===D.type){a(k,D.sibling),V=f(D,B.props),Ha(V,B),V.return=k,k=V;break t}a(k,D);break}else i(k,D);D=D.sibling}B.type===E?(V=Ii(B.props.children,k.mode,V,B.key),V.return=k,k=V):(V=el(B.type,B.key,B.props,null,k.mode,V),Ha(V,B),V.return=k,k=V)}return A(k);case v:t:{for(it=B.key;D!==null;){if(D.key===it)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){a(k,D.sibling),V=f(D,B.children||[]),V.return=k,k=V;break t}else{a(k,D);break}else i(k,D);D=D.sibling}V=uu(B,k.mode,V),V.return=k,k=V}return A(k);case X:return it=B._init,B=it(B._payload),Ht(k,D,B,V)}if(lt(B))return gt(k,D,B,V);if(at(B)){if(it=at(B),typeof it!="function")throw Error(s(150));return B=it.call(B),ht(k,D,B,V)}if(typeof B.then=="function")return Ht(k,D,bl(B),V);if(B.$$typeof===C)return Ht(k,D,al(k,B),V);vl(k,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,D!==null&&D.tag===6?(a(k,D.sibling),V=f(D,B),V.return=k,k=V):(a(k,D),V=ou(B,k.mode,V),V.return=k,k=V),A(k)):a(k,D)}return function(k,D,B,V){try{za=0;var it=Ht(k,D,B,V);return ks=null,it}catch(rt){if(rt===Ra||rt===ll)throw rt;var _t=$e(29,rt,null,k.mode);return _t.lanes=V,_t.return=k,_t}finally{}}}var Ps=Xf(!0),Yf=Xf(!1),cn=q(null),En=null;function pi(e){var i=e.alternate;K(pe,pe.current&1),K(cn,e),En===null&&(i===null||Ds.current!==null||i.memoizedState!==null)&&(En=e)}function $f(e){if(e.tag===22){if(K(pe,pe.current),K(cn,e),En===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(En=e)}}else gi()}function gi(){K(pe,pe.current),K(cn,cn.current)}function Vn(e){W(cn),En===e&&(En=null),W(pe)}var pe=q(0);function Al(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Lc(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function ju(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:g({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Gu={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=Ze(),f=hi(o);f.payload=i,a!=null&&(f.callback=a),i=di(e,f,o),i!==null&&(Je(i,e,o),Da(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=Ze(),f=hi(o);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=di(e,f,o),i!==null&&(Je(i,e,o),Da(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Ze(),o=hi(a);o.tag=2,i!=null&&(o.callback=i),i=di(e,o,a),i!==null&&(Je(i,e,a),Da(i,e,a))}};function Kf(e,i,a,o,f,m,A){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,A):i.prototype&&i.prototype.isPureReactComponent?!Aa(a,o)||!Aa(f,m):!0}function Wf(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Gu.enqueueReplaceState(i,i.state,null)}function $i(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=g({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}var Sl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Qf(e){Sl(e)}function Zf(e){console.error(e)}function Jf(e){Sl(e)}function El(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function tp(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qu(e,i,a){return a=hi(a),a.tag=3,a.payload={element:null},a.callback=function(){El(e,i)},a}function ep(e){return e=hi(e),e.tag=3,e}function np(e,i,a,o){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;e.payload=function(){return f(m)},e.callback=function(){tp(i,a,o)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(e.callback=function(){tp(i,a,o),typeof f!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var _=o.stack;this.componentDidCatch(o.value,{componentStack:_!==null?_:""})})}function nv(e,i,a,o,f){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Ta(i,a,f,!0),a=cn.current,a!==null){switch(a.tag){case 13:return En===null?pc():a.alternate===null&&Qt===0&&(Qt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,o===vu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),mc(e,o,f)),!1;case 22:return a.flags|=65536,o===vu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),mc(e,o,f)),!1}throw Error(s(435,a.tag))}return mc(e,o,f),pc(),!1}if(Lt)return i=cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,o!==du&&(e=Error(s(422),{cause:o}),wa(rn(e,a)))):(o!==du&&(i=Error(s(423),{cause:o}),wa(rn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=rn(o,a),f=qu(e.stateNode,o,f),Eu(e,f),Qt!==4&&(Qt=2)),!1;var m=Error(s(520),{cause:o});if(m=rn(m,a),Va===null?Va=[m]:Va.push(m),Qt!==4&&(Qt=2),i===null)return!0;o=rn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=qu(a.stateNode,o,e),Eu(a,e),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Si===null||!Si.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=ep(f),np(f,e,a,o),Eu(a,f),!1}a=a.return}while(a!==null);return!1}var ip=Error(s(461)),be=!1;function _e(e,i,a,o){i.child=e===null?Yf(i,null,a,o):Ps(i,e.child,a,o)}function sp(e,i,a,o,f){a=a.render;var m=i.ref;if("ref"in o){var A={};for(var _ in o)_!=="ref"&&(A[_]=o[_])}else A=o;return Vi(i),o=Cu(e,i,a,A,m,f),_=Ru(),e!==null&&!be?(Mu(e,i,f),Xn(e,i,f)):(Lt&&_&&cu(i),i.flags|=1,_e(e,i,o,f),i.child)}function ap(e,i,a,o,f){if(e===null){var m=a.type;return typeof m=="function"&&!lu(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,rp(e,i,m,o,f)):(e=el(a.type,null,o,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(m=e.child,!Zu(e,f)){var A=m.memoizedProps;if(a=a.compare,a=a!==null?a:Aa,a(A,o)&&e.ref===i.ref)return Xn(e,i,f)}return i.flags|=1,e=In(m,o),e.ref=i.ref,e.return=i,i.child=e}function rp(e,i,a,o,f){if(e!==null){var m=e.memoizedProps;if(Aa(m,o)&&e.ref===i.ref)if(be=!1,i.pendingProps=o=m,Zu(e,f))(e.flags&131072)!==0&&(be=!0);else return i.lanes=e.lanes,Xn(e,i,f)}return Vu(e,i,a,o,f)}function lp(e,i,a){var o=i.pendingProps,f=o.children,m=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=m!==null?m.baseLanes|a:a,e!==null){for(f=i.child=e.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~o}else i.childLanes=0,i.child=null;return op(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&rl(i,m!==null?m.cachePool:null),m!==null?rf(i,m):wu(),$f(i);else return i.lanes=i.childLanes=536870912,op(e,i,m!==null?m.baseLanes|a:a,a)}else m!==null?(rl(i,m.cachePool),rf(i,m),gi(),i.memoizedState=null):(e!==null&&rl(i,null),wu(),gi());return _e(e,i,f,a),i.child}function op(e,i,a,o){var f=bu();return f=f===null?null:{parent:fe._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},e!==null&&rl(i,null),wu(),$f(i),e!==null&&Ta(e,i,o,!0),null}function _l(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Vu(e,i,a,o,f){return Vi(i),a=Cu(e,i,a,o,void 0,f),o=Ru(),e!==null&&!be?(Mu(e,i,f),Xn(e,i,f)):(Lt&&o&&cu(i),i.flags|=1,_e(e,i,a,f),i.child)}function up(e,i,a,o,f,m){return Vi(i),i.updateQueue=null,a=of(i,o,a,f),lf(e),o=Ru(),e!==null&&!be?(Mu(e,i,m),Xn(e,i,m)):(Lt&&o&&cu(i),i.flags|=1,_e(e,i,a,m),i.child)}function cp(e,i,a,o,f){if(Vi(i),i.stateNode===null){var m=Ts,A=a.contextType;typeof A=="object"&&A!==null&&(m=Re(A)),m=new a(o,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Gu,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=o,m.state=i.memoizedState,m.refs={},Au(i),A=a.contextType,m.context=typeof A=="object"&&A!==null?Re(A):Ts,m.state=i.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(ju(i,a,A,o),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(A=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),A!==m.state&&Gu.enqueueReplaceState(m,m.state,null),Oa(i,o,m,f),La(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){m=i.stateNode;var _=i.memoizedProps,x=$i(a,_);m.props=x;var z=m.context,G=a.contextType;A=Ts,typeof G=="object"&&G!==null&&(A=Re(G));var Y=a.getDerivedStateFromProps;G=typeof Y=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,G||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||z!==A)&&Wf(i,m,o,A),ci=!1;var F=i.memoizedState;m.state=F,Oa(i,o,m,f),La(),z=i.memoizedState,_||F!==z||ci?(typeof Y=="function"&&(ju(i,a,Y,o),z=i.memoizedState),(x=ci||Kf(i,a,x,o,F,z,A))?(G||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=z),m.props=o,m.state=z,m.context=A,o=x):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{m=i.stateNode,Su(e,i),A=i.memoizedProps,G=$i(a,A),m.props=G,Y=i.pendingProps,F=m.context,z=a.contextType,x=Ts,typeof z=="object"&&z!==null&&(x=Re(z)),_=a.getDerivedStateFromProps,(z=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A!==Y||F!==x)&&Wf(i,m,o,x),ci=!1,F=i.memoizedState,m.state=F,Oa(i,o,m,f),La();var j=i.memoizedState;A!==Y||F!==j||ci||e!==null&&e.dependencies!==null&&sl(e.dependencies)?(typeof _=="function"&&(ju(i,a,_,o),j=i.memoizedState),(G=ci||Kf(i,a,G,o,F,j,x)||e!==null&&e.dependencies!==null&&sl(e.dependencies))?(z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,j,x),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,j,x)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||A===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=j),m.props=o,m.state=j,m.context=x,o=G):(typeof m.componentDidUpdate!="function"||A===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),o=!1)}return m=o,_l(e,i),o=(i.flags&128)!==0,m||o?(m=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,e!==null&&o?(i.child=Ps(i,e.child,null,f),i.child=Ps(i,null,a,f)):_e(e,i,a,f),i.memoizedState=m.state,e=i.child):e=Xn(e,i,f),e}function hp(e,i,a,o){return _a(),i.flags|=256,_e(e,i,a,o),i.child}var Xu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yu(e){return{baseLanes:e,cachePool:Qd()}}function $u(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=hn),e}function dp(e,i,a){var o=i.pendingProps,f=!1,m=(i.flags&128)!==0,A;if((A=m)||(A=e!==null&&e.memoizedState===null?!1:(pe.current&2)!==0),A&&(f=!0,i.flags&=-129),A=(i.flags&32)!==0,i.flags&=-33,e===null){if(Lt){if(f?pi(i):gi(),Lt){var _=Wt,x;if(x=_){t:{for(x=_,_=Sn;x.nodeType!==8;){if(!_){_=null;break t}if(x=bn(x.nextSibling),x===null){_=null;break t}}_=x}_!==null?(i.memoizedState={dehydrated:_,treeContext:Fi!==null?{id:Fn,overflow:Un}:null,retryLane:536870912,hydrationErrors:null},x=$e(18,null,null,0),x.stateNode=_,x.return=i,i.child=x,Ne=i,Wt=null,x=!0):x=!1}x||Gi(i)}if(_=i.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Lc(_)?i.lanes=32:i.lanes=536870912,null;Vn(i)}return _=o.children,o=o.fallback,f?(gi(),f=i.mode,_=wl({mode:"hidden",children:_},f),o=Ii(o,f,a,null),_.return=i,o.return=i,_.sibling=o,i.child=_,f=i.child,f.memoizedState=Yu(a),f.childLanes=$u(e,A,a),i.memoizedState=Xu,o):(pi(i),Ku(i,_))}if(x=e.memoizedState,x!==null&&(_=x.dehydrated,_!==null)){if(m)i.flags&256?(pi(i),i.flags&=-257,i=Wu(e,i,a)):i.memoizedState!==null?(gi(),i.child=e.child,i.flags|=128,i=null):(gi(),f=o.fallback,_=i.mode,o=wl({mode:"visible",children:o.children},_),f=Ii(f,_,a,null),f.flags|=2,o.return=i,f.return=i,o.sibling=f,i.child=o,Ps(i,e.child,null,a),o=i.child,o.memoizedState=Yu(a),o.childLanes=$u(e,A,a),i.memoizedState=Xu,i=f);else if(pi(i),Lc(_)){if(A=_.nextSibling&&_.nextSibling.dataset,A)var z=A.dgst;A=z,o=Error(s(419)),o.stack="",o.digest=A,wa({value:o,source:null,stack:null}),i=Wu(e,i,a)}else if(be||Ta(e,i,a,!1),A=(a&e.childLanes)!==0,be||A){if(A=jt,A!==null&&(o=a&-a,o=(o&42)!==0?1:Oo(o),o=(o&(A.suspendedLanes|a))!==0?0:o,o!==0&&o!==x.retryLane))throw x.retryLane=o,ws(e,o),Je(A,e,o),ip;_.data==="$?"||pc(),i=Wu(e,i,a)}else _.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=x.treeContext,Wt=bn(_.nextSibling),Ne=i,Lt=!0,ji=null,Sn=!1,e!==null&&(on[un++]=Fn,on[un++]=Un,on[un++]=Fi,Fn=e.id,Un=e.overflow,Fi=i),i=Ku(i,o.children),i.flags|=4096);return i}return f?(gi(),f=o.fallback,_=i.mode,x=e.child,z=x.sibling,o=In(x,{mode:"hidden",children:o.children}),o.subtreeFlags=x.subtreeFlags&65011712,z!==null?f=In(z,f):(f=Ii(f,_,a,null),f.flags|=2),f.return=i,o.return=i,o.sibling=f,i.child=o,o=f,f=i.child,_=e.child.memoizedState,_===null?_=Yu(a):(x=_.cachePool,x!==null?(z=fe._currentValue,x=x.parent!==z?{parent:z,pool:z}:x):x=Qd(),_={baseLanes:_.baseLanes|a,cachePool:x}),f.memoizedState=_,f.childLanes=$u(e,A,a),i.memoizedState=Xu,o):(pi(i),a=e.child,e=a.sibling,a=In(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(A=i.deletions,A===null?(i.deletions=[e],i.flags|=16):A.push(e)),i.child=a,i.memoizedState=null,a)}function Ku(e,i){return i=wl({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function wl(e,i){return e=$e(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wu(e,i,a){return Ps(i,e.child,null,a),e=Ku(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function fp(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),pu(e.return,i,a)}function Qu(e,i,a,o,f){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=o,m.tail=a,m.tailMode=f)}function pp(e,i,a){var o=i.pendingProps,f=o.revealOrder,m=o.tail;if(_e(e,i,o.children,a),o=pe.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fp(e,a,i);else if(e.tag===19)fp(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(K(pe,o),f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&Al(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Qu(i,!1,f,a,m);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&Al(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Qu(i,!0,a,null,m);break;case"together":Qu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Xn(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ai|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ta(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=In(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=In(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Zu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&sl(e)))}function iv(e,i,a){switch(i.tag){case 3:Rt(i,i.stateNode.containerInfo),ui(i,fe,e.memoizedState.cache),_a();break;case 27:case 5:Pt(i);break;case 4:Rt(i,i.stateNode.containerInfo);break;case 10:ui(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(pi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?dp(e,i,a):(pi(i),e=Xn(e,i,a),e!==null?e.sibling:null);pi(i);break;case 19:var f=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Ta(e,i,a,!1),o=(a&i.childLanes)!==0),f){if(o)return pp(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),K(pe,pe.current),o)break;return null;case 22:case 23:return i.lanes=0,lp(e,i,a);case 24:ui(i,fe,e.memoizedState.cache)}return Xn(e,i,a)}function gp(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)be=!0;else{if(!Zu(e,a)&&(i.flags&128)===0)return be=!1,iv(e,i,a);be=(e.flags&131072)!==0}else be=!1,Lt&&(i.flags&1048576)!==0&&qd(i,il,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,f=o._init;if(o=f(o._payload),i.type=o,typeof o=="function")lu(o)?(e=$i(o,e),i.tag=1,i=cp(null,i,o,e,a)):(i.tag=0,i=Vu(null,i,o,e,a));else{if(o!=null){if(f=o.$$typeof,f===N){i.tag=11,i=sp(null,i,o,e,a);break t}else if(f===H){i.tag=14,i=ap(null,i,o,e,a);break t}}throw i=ut(o)||o,Error(s(306,i,""))}}return i;case 0:return Vu(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,f=$i(o,i.pendingProps),cp(e,i,o,f,a);case 3:t:{if(Rt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var m=i.memoizedState;f=m.element,Su(e,i),Oa(i,o,null,a);var A=i.memoizedState;if(o=A.cache,ui(i,fe,o),o!==m.cache&&gu(i,[fe],a,!0),La(),o=A.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:A.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=hp(e,i,o,a);break t}else if(o!==f){f=rn(Error(s(424)),i),wa(f),i=hp(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Wt=bn(e.firstChild),Ne=i,Lt=!0,ji=null,Sn=!0,a=Yf(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(_a(),o===f){i=Xn(e,i,a);break t}_e(e,i,o,a)}i=i.child}return i;case 26:return _l(e,i),e===null?(a=vg(i.type,null,i.pendingProps,null))?i.memoizedState=a:Lt||(a=i.type,e=i.pendingProps,o=Hl(st.current).createElement(a),o[Ce]=i,o[ze]=e,Te(o,a,e),ye(o),i.stateNode=o):i.memoizedState=vg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Pt(i),e===null&&Lt&&(o=i.stateNode=mg(i.type,i.pendingProps,st.current),Ne=i,Sn=!0,f=Wt,wi(i.type)?(Oc=f,Wt=bn(o.firstChild)):Wt=f),_e(e,i,i.pendingProps.children,a),_l(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Lt&&((f=o=Wt)&&(o=Lv(o,i.type,i.pendingProps,Sn),o!==null?(i.stateNode=o,Ne=i,Wt=bn(o.firstChild),Sn=!1,f=!0):f=!1),f||Gi(i)),Pt(i),f=i.type,m=i.pendingProps,A=e!==null?e.memoizedProps:null,o=m.children,Rc(f,m)?o=null:A!==null&&Rc(f,A)&&(i.flags|=32),i.memoizedState!==null&&(f=Cu(e,i,Kb,null,null,a),tr._currentValue=f),_l(e,i),_e(e,i,o,a),i.child;case 6:return e===null&&Lt&&((e=a=Wt)&&(a=Ov(a,i.pendingProps,Sn),a!==null?(i.stateNode=a,Ne=i,Wt=null,e=!0):e=!1),e||Gi(i)),null;case 13:return dp(e,i,a);case 4:return Rt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Ps(i,null,o,a):_e(e,i,o,a),i.child;case 11:return sp(e,i,i.type,i.pendingProps,a);case 7:return _e(e,i,i.pendingProps,a),i.child;case 8:return _e(e,i,i.pendingProps.children,a),i.child;case 12:return _e(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ui(i,i.type,o.value),_e(e,i,o.children,a),i.child;case 9:return f=i.type._context,o=i.pendingProps.children,Vi(i),f=Re(f),o=o(f),i.flags|=1,_e(e,i,o,a),i.child;case 14:return ap(e,i,i.type,i.pendingProps,a);case 15:return rp(e,i,i.type,i.pendingProps,a);case 19:return pp(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=wl(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=In(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return lp(e,i,a);case 24:return Vi(i),o=Re(fe),e===null?(f=bu(),f===null&&(f=jt,m=mu(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:o,cache:f},Au(i),ui(i,fe,f)):((e.lanes&a)!==0&&(Su(e,i),Oa(i,null,null,a),La()),f=e.memoizedState,m=i.memoizedState,f.parent!==o?(f={parent:o,cache:o},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),ui(i,fe,o)):(o=m.cache,ui(i,fe,o),o!==f.cache&&gu(i,[fe],a,!0))),_e(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Yn(e){e.flags|=4}function mp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!wg(i)){if(i=cn.current,i!==null&&((Mt&4194048)===Mt?En!==null:(Mt&62914560)!==Mt&&(Mt&536870912)===0||i!==En))throw Ma=vu,Zd;e.flags|=8192}}function Tl(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Yh():536870912,e.lanes|=i,Is|=i)}function Ia(e,i){if(!Lt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Yt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function sv(e,i,a){var o=i.pendingProps;switch(hu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(i),null;case 1:return Yt(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Gn(fe),ce(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ea(i)?Yn(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yd())),Yt(i),null;case 26:return a=i.memoizedState,e===null?(Yn(i),a!==null?(Yt(i),mp(i,a)):(Yt(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Yn(i),Yt(i),mp(i,a)):(Yt(i),i.flags&=-16777217):(e.memoizedProps!==o&&Yn(i),Yt(i),i.flags&=-16777217),null;case 27:Be(i),a=st.current;var f=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Yn(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Yt(i),null}e=nt.current,Ea(i)?Vd(i):(e=mg(f,o,a),i.stateNode=e,Yn(i))}return Yt(i),null;case 5:if(Be(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Yn(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Yt(i),null}if(e=nt.current,Ea(i))Vd(i);else{switch(f=Hl(st.current),e){case 1:e=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?f.createElement("select",{is:o.is}):f.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?f.createElement(a,{is:o.is}):f.createElement(a)}}e[Ce]=i,e[ze]=o;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)e.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=e;t:switch(Te(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Yn(i)}}return Yt(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Yn(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=st.current,Ea(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,f=Ne,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Ce]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||ug(e.nodeValue,a)),e||Gi(i)}else e=Hl(e).createTextNode(o),e[Ce]=i,i.stateNode=e}return Yt(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ea(i),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ce]=i}else _a(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),f=!1}else f=Yd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Vn(i),i):(Vn(i),null)}if(Vn(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool);var m=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Tl(i,i.updateQueue),Yt(i),null;case 4:return ce(),e===null&&_c(i.stateNode.containerInfo),Yt(i),null;case 10:return Gn(i.type),Yt(i),null;case 19:if(W(pe),f=i.memoizedState,f===null)return Yt(i),null;if(o=(i.flags&128)!==0,m=f.rendering,m===null)if(o)Ia(f,!1);else{if(Qt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(m=Al(e),m!==null){for(i.flags|=128,Ia(f,!1),e=m.updateQueue,i.updateQueue=e,Tl(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Gd(a,e),a=a.sibling;return K(pe,pe.current&1|2),i.child}e=e.sibling}f.tail!==null&&de()>Rl&&(i.flags|=128,o=!0,Ia(f,!1),i.lanes=4194304)}else{if(!o)if(e=Al(m),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Tl(i,e),Ia(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Lt)return Yt(i),null}else 2*de()-f.renderingStartTime>Rl&&a!==536870912&&(i.flags|=128,o=!0,Ia(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(e=f.last,e!==null?e.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=de(),i.sibling=null,e=pe.current,K(pe,o?e&1|2:e&1),i):(Yt(i),null);case 22:case 23:return Vn(i),Tu(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(Yt(i),i.subtreeFlags&6&&(i.flags|=8192)):Yt(i),a=i.updateQueue,a!==null&&Tl(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&W(Xi),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Gn(fe),Yt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function av(e,i){switch(hu(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Gn(fe),ce(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Be(i),null;case 13:if(Vn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));_a()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return W(pe),null;case 4:return ce(),null;case 10:return Gn(i.type),null;case 22:case 23:return Vn(i),Tu(),e!==null&&W(Xi),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Gn(fe),null;case 25:return null;default:return null}}function yp(e,i){switch(hu(i),i.tag){case 3:Gn(fe),ce();break;case 26:case 27:case 5:Be(i);break;case 4:ce();break;case 13:Vn(i);break;case 19:W(pe);break;case 10:Gn(i.type);break;case 22:case 23:Vn(i),Tu(),e!==null&&W(Xi);break;case 24:Gn(fe)}}function Fa(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var f=o.next;a=f;do{if((a.tag&e)===e){o=void 0;var m=a.create,A=a.inst;o=m(),A.destroy=o}a=a.next}while(a!==f)}}catch(_){Ft(i,i.return,_)}}function mi(e,i,a){try{var o=i.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&e)===e){var A=o.inst,_=A.destroy;if(_!==void 0){A.destroy=void 0,f=i;var x=a,z=_;try{z()}catch(G){Ft(f,x,G)}}}o=o.next}while(o!==m)}}catch(G){Ft(i,i.return,G)}}function bp(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{af(i,a)}catch(o){Ft(e,e.return,o)}}}function vp(e,i,a){a.props=$i(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Ft(e,i,o)}}function Ua(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(f){Ft(e,i,f)}}function _n(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(f){Ft(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Ft(e,i,f)}else a.current=null}function Ap(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(f){Ft(e,e.return,f)}}function Ju(e,i,a){try{var o=e.stateNode;xv(o,e.type,a,i),o[ze]=i}catch(f){Ft(e,e.return,f)}}function Sp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wi(e.type)||e.tag===4}function tc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Sp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ec(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=zl));else if(o!==4&&(o===27&&wi(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(ec(e,i,a),e=e.sibling;e!==null;)ec(e,i,a),e=e.sibling}function xl(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&wi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(xl(e,i,a),e=e.sibling;e!==null;)xl(e,i,a),e=e.sibling}function Ep(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Te(i,o,a),i[Ce]=e,i[ze]=a}catch(m){Ft(e,e.return,m)}}var $n=!1,Jt=!1,nc=!1,_p=typeof WeakSet=="function"?WeakSet:Set,ve=null;function rv(e,i){if(e=e.containerInfo,xc=ql,e=Nd(e),tu(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var A=0,_=-1,x=-1,z=0,G=0,Y=e,F=null;e:for(;;){for(var j;Y!==a||f!==0&&Y.nodeType!==3||(_=A+f),Y!==m||o!==0&&Y.nodeType!==3||(x=A+o),Y.nodeType===3&&(A+=Y.nodeValue.length),(j=Y.firstChild)!==null;)F=Y,Y=j;for(;;){if(Y===e)break e;if(F===a&&++z===f&&(_=A),F===m&&++G===o&&(x=A),(j=Y.nextSibling)!==null)break;Y=F,F=Y.parentNode}Y=j}a=_===-1||x===-1?null:{start:_,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cc={focusedElem:e,selectionRange:a},ql=!1,ve=i;ve!==null;)if(i=ve,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,ve=e;else for(;ve!==null;){switch(i=ve,m=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var gt=$i(a.type,f,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(gt,m),o.__reactInternalSnapshotBeforeUpdate=e}catch(ht){Ft(a,a.return,ht)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Dc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,ve=e;break}ve=i.return}}function wp(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:yi(e,a),o&4&&Fa(5,a);break;case 1:if(yi(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(A){Ft(a,a.return,A)}else{var f=$i(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(A){Ft(a,a.return,A)}}o&64&&bp(a),o&512&&Ua(a,a.return);break;case 3:if(yi(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{af(e,i)}catch(A){Ft(a,a.return,A)}}break;case 27:i===null&&o&4&&Ep(a);case 26:case 5:yi(e,a),i===null&&o&4&&Ap(a),o&512&&Ua(a,a.return);break;case 12:yi(e,a);break;case 13:yi(e,a),o&4&&Cp(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=gv.bind(null,a),Nv(e,a))));break;case 22:if(o=a.memoizedState!==null||$n,!o){i=i!==null&&i.memoizedState!==null||Jt,f=$n;var m=Jt;$n=o,(Jt=i)&&!m?bi(e,a,(a.subtreeFlags&8772)!==0):yi(e,a),$n=f,Jt=m}break;case 30:break;default:yi(e,a)}}function Tp(e){var i=e.alternate;i!==null&&(e.alternate=null,Tp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Po(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Gt=null,Fe=!1;function Kn(e,i,a){for(a=a.child;a!==null;)xp(e,i,a),a=a.sibling}function xp(e,i,a){if(ae&&typeof ae.onCommitFiberUnmount=="function")try{ae.onCommitFiberUnmount(Ni,a)}catch{}switch(a.tag){case 26:Jt||_n(a,i),Kn(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Jt||_n(a,i);var o=Gt,f=Fe;wi(a.type)&&(Gt=a.stateNode,Fe=!1),Kn(e,i,a),Wa(a.stateNode),Gt=o,Fe=f;break;case 5:Jt||_n(a,i);case 6:if(o=Gt,f=Fe,Gt=null,Kn(e,i,a),Gt=o,Fe=f,Gt!==null)if(Fe)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(a.stateNode)}catch(m){Ft(a,i,m)}else try{Gt.removeChild(a.stateNode)}catch(m){Ft(a,i,m)}break;case 18:Gt!==null&&(Fe?(e=Gt,pg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),sr(e)):pg(Gt,a.stateNode));break;case 4:o=Gt,f=Fe,Gt=a.stateNode.containerInfo,Fe=!0,Kn(e,i,a),Gt=o,Fe=f;break;case 0:case 11:case 14:case 15:Jt||mi(2,a,i),Jt||mi(4,a,i),Kn(e,i,a);break;case 1:Jt||(_n(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&vp(a,i,o)),Kn(e,i,a);break;case 21:Kn(e,i,a);break;case 22:Jt=(o=Jt)||a.memoizedState!==null,Kn(e,i,a),Jt=o;break;default:Kn(e,i,a)}}function Cp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sr(e)}catch(a){Ft(i,i.return,a)}}function lv(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new _p),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new _p),i;default:throw Error(s(435,e.tag))}}function ic(e,i){var a=lv(e);i.forEach(function(o){var f=mv.bind(null,e,o);a.has(o)||(a.add(o),o.then(f,f))})}function Ke(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var f=a[o],m=e,A=i,_=A;t:for(;_!==null;){switch(_.tag){case 27:if(wi(_.type)){Gt=_.stateNode,Fe=!1;break t}break;case 5:Gt=_.stateNode,Fe=!1;break t;case 3:case 4:Gt=_.stateNode.containerInfo,Fe=!0;break t}_=_.return}if(Gt===null)throw Error(s(160));xp(m,A,f),Gt=null,Fe=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Rp(i,e),i=i.sibling}var yn=null;function Rp(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ke(i,e),We(e),o&4&&(mi(3,e,e.return),Fa(3,e),mi(5,e,e.return));break;case 1:Ke(i,e),We(e),o&512&&(Jt||a===null||_n(a,a.return)),o&64&&$n&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var f=yn;if(Ke(i,e),We(e),o&512&&(Jt||a===null||_n(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ha]||m[Ce]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),Te(m,o,a),m[Ce]=e,ye(m),o=m;break t;case"link":var A=Eg("link","href",f).get(o+(a.href||""));if(A){for(var _=0;_<A.length;_++)if(m=A[_],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(_,1);break e}}m=f.createElement(o),Te(m,o,a),f.head.appendChild(m);break;case"meta":if(A=Eg("meta","content",f).get(o+(a.content||""))){for(_=0;_<A.length;_++)if(m=A[_],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(_,1);break e}}m=f.createElement(o),Te(m,o,a),f.head.appendChild(m);break;default:throw Error(s(468,o))}m[Ce]=e,ye(m),o=m}e.stateNode=o}else _g(f,e.type,e.stateNode);else e.stateNode=Sg(f,o,e.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?_g(f,e.type,e.stateNode):Sg(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Ju(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ke(i,e),We(e),o&512&&(Jt||a===null||_n(a,a.return)),a!==null&&o&4&&Ju(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ke(i,e),We(e),o&512&&(Jt||a===null||_n(a,a.return)),e.flags&32){f=e.stateNode;try{ys(f,"")}catch(j){Ft(e,e.return,j)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,Ju(e,f,a!==null?a.memoizedProps:f)),o&1024&&(nc=!0);break;case 6:if(Ke(i,e),We(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(j){Ft(e,e.return,j)}}break;case 3:if(Ul=null,f=yn,yn=Il(i.containerInfo),Ke(i,e),yn=f,We(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{sr(i.containerInfo)}catch(j){Ft(e,e.return,j)}nc&&(nc=!1,Mp(e));break;case 4:o=yn,yn=Il(e.stateNode.containerInfo),Ke(i,e),We(e),yn=o;break;case 12:Ke(i,e),We(e);break;case 13:Ke(i,e),We(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=de()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,ic(e,o)));break;case 22:f=e.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,z=$n,G=Jt;if($n=z||f,Jt=G||x,Ke(i,e),Jt=G,$n=z,We(e),o&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||x||$n||Jt||Ki(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(m=x.stateNode,f)A=m.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{_=x.stateNode;var Y=x.memoizedProps.style,F=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;_.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(j){Ft(x,x.return,j)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(j){Ft(x,x.return,j)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,ic(e,a))));break;case 19:Ke(i,e),We(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,ic(e,o)));break;case 30:break;case 21:break;default:Ke(i,e),We(e)}}function We(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(Sp(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,m=tc(e);xl(e,m,f);break;case 5:var A=a.stateNode;a.flags&32&&(ys(A,""),a.flags&=-33);var _=tc(e);xl(e,_,A);break;case 3:case 4:var x=a.stateNode.containerInfo,z=tc(e);ec(e,z,x);break;default:throw Error(s(161))}}catch(G){Ft(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Mp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Mp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function yi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)wp(e,i.alternate,i),i=i.sibling}function Ki(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:mi(4,i,i.return),Ki(i);break;case 1:_n(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vp(i,i.return,a),Ki(i);break;case 27:Wa(i.stateNode);case 26:case 5:_n(i,i.return),Ki(i);break;case 22:i.memoizedState===null&&Ki(i);break;case 30:Ki(i);break;default:Ki(i)}e=e.sibling}}function bi(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,f=e,m=i,A=m.flags;switch(m.tag){case 0:case 11:case 15:bi(f,m,a),Fa(4,m);break;case 1:if(bi(f,m,a),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){Ft(o,o.return,z)}if(o=m,f=o.updateQueue,f!==null){var _=o.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)sf(x[f],_)}catch(z){Ft(o,o.return,z)}}a&&A&64&&bp(m),Ua(m,m.return);break;case 27:Ep(m);case 26:case 5:bi(f,m,a),a&&o===null&&A&4&&Ap(m),Ua(m,m.return);break;case 12:bi(f,m,a);break;case 13:bi(f,m,a),a&&A&4&&Cp(f,m);break;case 22:m.memoizedState===null&&bi(f,m,a),Ua(m,m.return);break;case 30:break;default:bi(f,m,a)}i=i.sibling}}function sc(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&xa(a))}function ac(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&xa(e))}function wn(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dp(e,i,a,o),i=i.sibling}function Dp(e,i,a,o){var f=i.flags;switch(i.tag){case 0:case 11:case 15:wn(e,i,a,o),f&2048&&Fa(9,i);break;case 1:wn(e,i,a,o);break;case 3:wn(e,i,a,o),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&xa(e)));break;case 12:if(f&2048){wn(e,i,a,o),e=i.stateNode;try{var m=i.memoizedProps,A=m.id,_=m.onPostCommit;typeof _=="function"&&_(A,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){Ft(i,i.return,x)}}else wn(e,i,a,o);break;case 13:wn(e,i,a,o);break;case 23:break;case 22:m=i.stateNode,A=i.alternate,i.memoizedState!==null?m._visibility&2?wn(e,i,a,o):ja(e,i):m._visibility&2?wn(e,i,a,o):(m._visibility|=2,Bs(e,i,a,o,(i.subtreeFlags&10256)!==0)),f&2048&&sc(A,i);break;case 24:wn(e,i,a,o),f&2048&&ac(i.alternate,i);break;default:wn(e,i,a,o)}}function Bs(e,i,a,o,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=e,A=i,_=a,x=o,z=A.flags;switch(A.tag){case 0:case 11:case 15:Bs(m,A,_,x,f),Fa(8,A);break;case 23:break;case 22:var G=A.stateNode;A.memoizedState!==null?G._visibility&2?Bs(m,A,_,x,f):ja(m,A):(G._visibility|=2,Bs(m,A,_,x,f)),f&&z&2048&&sc(A.alternate,A);break;case 24:Bs(m,A,_,x,f),f&&z&2048&&ac(A.alternate,A);break;default:Bs(m,A,_,x,f)}i=i.sibling}}function ja(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,f=o.flags;switch(o.tag){case 22:ja(a,o),f&2048&&sc(o.alternate,o);break;case 24:ja(a,o),f&2048&&ac(o.alternate,o);break;default:ja(a,o)}i=i.sibling}}var Ga=8192;function zs(e){if(e.subtreeFlags&Ga)for(e=e.child;e!==null;)Lp(e),e=e.sibling}function Lp(e){switch(e.tag){case 26:zs(e),e.flags&Ga&&e.memoizedState!==null&&Xv(yn,e.memoizedState,e.memoizedProps);break;case 5:zs(e);break;case 3:case 4:var i=yn;yn=Il(e.stateNode.containerInfo),zs(e),yn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Ga,Ga=16777216,zs(e),Ga=i):zs(e));break;default:zs(e)}}function Op(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function qa(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];ve=o,kp(o,e)}Op(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Np(e),e=e.sibling}function Np(e){switch(e.tag){case 0:case 11:case 15:qa(e),e.flags&2048&&mi(9,e,e.return);break;case 3:qa(e);break;case 12:qa(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Cl(e)):qa(e);break;default:qa(e)}}function Cl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];ve=o,kp(o,e)}Op(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:mi(8,i,i.return),Cl(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Cl(i));break;default:Cl(i)}e=e.sibling}}function kp(e,i){for(;ve!==null;){var a=ve;switch(a.tag){case 0:case 11:case 15:mi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:xa(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ve=o;else t:for(a=e;ve!==null;){o=ve;var f=o.sibling,m=o.return;if(Tp(o),o===a){ve=null;break t}if(f!==null){f.return=m,ve=f;break t}ve=m}}}var ov={getCacheForType:function(e){var i=Re(fe),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},uv=typeof WeakMap=="function"?WeakMap:Map,Nt=0,jt=null,wt=null,Mt=0,kt=0,Qe=null,vi=!1,Hs=!1,rc=!1,Wn=0,Qt=0,Ai=0,Wi=0,lc=0,hn=0,Is=0,Va=null,Ue=null,oc=!1,uc=0,Rl=1/0,Ml=null,Si=null,we=0,Ei=null,Fs=null,Us=0,cc=0,hc=null,Pp=null,Xa=0,dc=null;function Ze(){if((Nt&2)!==0&&Mt!==0)return Mt&-Mt;if(O.T!==null){var e=Rs;return e!==0?e:vc()}return Wh()}function Bp(){hn===0&&(hn=(Mt&536870912)===0||Lt?Xh():536870912);var e=cn.current;return e!==null&&(e.flags|=32),hn}function Je(e,i,a){(e===jt&&(kt===2||kt===9)||e.cancelPendingCommit!==null)&&(js(e,0),_i(e,Mt,hn,!1)),ca(e,a),((Nt&2)===0||e!==jt)&&(e===jt&&((Nt&2)===0&&(Wi|=a),Qt===4&&_i(e,Mt,hn,!1)),Tn(e))}function zp(e,i,a){if((Nt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||ua(e,i),f=o?dv(e,i):gc(e,i,!0),m=o;do{if(f===0){Hs&&!o&&_i(e,i,0,!1);break}else{if(a=e.current.alternate,m&&!cv(a)){f=gc(e,i,!1),m=!1;continue}if(f===2){if(m=i,e.errorRecoveryDisabledLanes&m)var A=0;else A=e.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){i=A;t:{var _=e;f=Va;var x=_.current.memoizedState.isDehydrated;if(x&&(js(_,A).flags|=256),A=gc(_,A,!1),A!==2){if(rc&&!x){_.errorRecoveryDisabledLanes|=m,Wi|=m,f=4;break t}m=Ue,Ue=f,m!==null&&(Ue===null?Ue=m:Ue.push.apply(Ue,m))}f=A}if(m=!1,f!==2)continue}}if(f===1){js(e,0),_i(e,i,0,!0);break}t:{switch(o=e,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:_i(o,i,hn,!vi);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=uc+300-de(),10<f)){if(_i(o,i,hn,!vi),Fr(o,0,!0)!==0)break t;o.timeoutHandle=dg(Hp.bind(null,o,a,Ue,Ml,oc,i,hn,Wi,Is,vi,m,2,-0,0),f);break t}Hp(o,a,Ue,Ml,oc,i,hn,Wi,Is,vi,m,0,-0,0)}}break}while(!0);Tn(e)}function Hp(e,i,a,o,f,m,A,_,x,z,G,Y,F,j){if(e.timeoutHandle=-1,Y=i.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(Ja={stylesheets:null,count:0,unsuspend:Vv},Lp(i),Y=Yv(),Y!==null)){e.cancelPendingCommit=Y(Vp.bind(null,e,i,m,a,o,f,A,_,x,G,1,F,j)),_i(e,m,A,!z);return}Vp(e,i,m,a,o,f,A,_,x)}function cv(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var f=a[o],m=f.getSnapshot;f=f.value;try{if(!Ye(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function _i(e,i,a,o){i&=~lc,i&=~Wi,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var f=i;0<f;){var m=31-me(f),A=1<<m;o[m]=-1,f&=~A}a!==0&&$h(e,a,i)}function Dl(){return(Nt&6)===0?(Ya(0),!1):!0}function fc(){if(wt!==null){if(kt===0)var e=wt.return;else e=wt,jn=qi=null,Du(e),ks=null,za=0,e=wt;for(;e!==null;)yp(e.alternate,e),e=e.return;wt=null}}function js(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Rv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),fc(),jt=e,wt=a=In(e.current,null),Mt=i,kt=0,Qe=null,vi=!1,Hs=ua(e,i),rc=!1,Is=hn=lc=Wi=Ai=Qt=0,Ue=Va=null,oc=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var f=31-me(o),m=1<<f;i|=e[f],o&=~m}return Wn=i,Zr(),a}function Ip(e,i){Et=null,O.H=yl,i===Ra||i===ll?(i=ef(),kt=3):i===Zd?(i=ef(),kt=4):kt=i===ip?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Qe=i,wt===null&&(Qt=1,El(e,rn(i,e.current)))}function Fp(){var e=O.H;return O.H=yl,e===null?yl:e}function Up(){var e=O.A;return O.A=ov,e}function pc(){Qt=4,vi||(Mt&4194048)!==Mt&&cn.current!==null||(Hs=!0),(Ai&134217727)===0&&(Wi&134217727)===0||jt===null||_i(jt,Mt,hn,!1)}function gc(e,i,a){var o=Nt;Nt|=2;var f=Fp(),m=Up();(jt!==e||Mt!==i)&&(Ml=null,js(e,i)),i=!1;var A=Qt;t:do try{if(kt!==0&&wt!==null){var _=wt,x=Qe;switch(kt){case 8:fc(),A=6;break t;case 3:case 2:case 9:case 6:cn.current===null&&(i=!0);var z=kt;if(kt=0,Qe=null,Gs(e,_,x,z),a&&Hs){A=0;break t}break;default:z=kt,kt=0,Qe=null,Gs(e,_,x,z)}}hv(),A=Qt;break}catch(G){Ip(e,G)}while(!0);return i&&e.shellSuspendCounter++,jn=qi=null,Nt=o,O.H=f,O.A=m,wt===null&&(jt=null,Mt=0,Zr()),A}function hv(){for(;wt!==null;)jp(wt)}function dv(e,i){var a=Nt;Nt|=2;var o=Fp(),f=Up();jt!==e||Mt!==i?(Ml=null,Rl=de()+500,js(e,i)):Hs=ua(e,i);t:do try{if(kt!==0&&wt!==null){i=wt;var m=Qe;e:switch(kt){case 1:kt=0,Qe=null,Gs(e,i,m,1);break;case 2:case 9:if(Jd(m)){kt=0,Qe=null,Gp(i);break}i=function(){kt!==2&&kt!==9||jt!==e||(kt=7),Tn(e)},m.then(i,i);break t;case 3:kt=7;break t;case 4:kt=5;break t;case 7:Jd(m)?(kt=0,Qe=null,Gp(i)):(kt=0,Qe=null,Gs(e,i,m,7));break;case 5:var A=null;switch(wt.tag){case 26:A=wt.memoizedState;case 5:case 27:var _=wt;if(!A||wg(A)){kt=0,Qe=null;var x=_.sibling;if(x!==null)wt=x;else{var z=_.return;z!==null?(wt=z,Ll(z)):wt=null}break e}}kt=0,Qe=null,Gs(e,i,m,5);break;case 6:kt=0,Qe=null,Gs(e,i,m,6);break;case 8:fc(),Qt=6;break t;default:throw Error(s(462))}}fv();break}catch(G){Ip(e,G)}while(!0);return jn=qi=null,O.H=o,O.A=f,Nt=a,wt!==null?0:(jt=null,Mt=0,Zr(),Qt)}function fv(){for(;wt!==null&&!se();)jp(wt)}function jp(e){var i=gp(e.alternate,e,Wn);e.memoizedProps=e.pendingProps,i===null?Ll(e):wt=i}function Gp(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=up(a,i,i.pendingProps,i.type,void 0,Mt);break;case 11:i=up(a,i,i.pendingProps,i.type.render,i.ref,Mt);break;case 5:Du(i);default:yp(a,i),i=wt=Gd(i,Wn),i=gp(a,i,Wn)}e.memoizedProps=e.pendingProps,i===null?Ll(e):wt=i}function Gs(e,i,a,o){jn=qi=null,Du(i),ks=null,za=0;var f=i.return;try{if(nv(e,f,i,a,Mt)){Qt=1,El(e,rn(a,e.current)),wt=null;return}}catch(m){if(f!==null)throw wt=f,m;Qt=1,El(e,rn(a,e.current)),wt=null;return}i.flags&32768?(Lt||o===1?e=!0:Hs||(Mt&536870912)!==0?e=!1:(vi=e=!0,(o===2||o===9||o===3||o===6)&&(o=cn.current,o!==null&&o.tag===13&&(o.flags|=16384))),qp(i,e)):Ll(i)}function Ll(e){var i=e;do{if((i.flags&32768)!==0){qp(i,vi);return}e=i.return;var a=sv(i.alternate,i,Wn);if(a!==null){wt=a;return}if(i=i.sibling,i!==null){wt=i;return}wt=i=e}while(i!==null);Qt===0&&(Qt=5)}function qp(e,i){do{var a=av(e.alternate,e);if(a!==null){a.flags&=32767,wt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){wt=e;return}wt=e=a}while(e!==null);Qt=6,wt=null}function Vp(e,i,a,o,f,m,A,_,x){e.cancelPendingCommit=null;do Ol();while(we!==0);if((Nt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=au,Vy(e,a,m,A,_,x),e===jt&&(wt=jt=null,Mt=0),Fs=i,Ei=e,Us=a,cc=m,hc=f,Pp=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yv(Bn,function(){return Wp(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=O.T,O.T=null,f=U.p,U.p=2,A=Nt,Nt|=4;try{rv(e,i,a)}finally{Nt=A,U.p=f,O.T=o}}we=1,Xp(),Yp(),$p()}}function Xp(){if(we===1){we=0;var e=Ei,i=Fs,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var o=U.p;U.p=2;var f=Nt;Nt|=4;try{Rp(i,e);var m=Cc,A=Nd(e.containerInfo),_=m.focusedElem,x=m.selectionRange;if(A!==_&&_&&_.ownerDocument&&Od(_.ownerDocument.documentElement,_)){if(x!==null&&tu(_)){var z=x.start,G=x.end;if(G===void 0&&(G=z),"selectionStart"in _)_.selectionStart=z,_.selectionEnd=Math.min(G,_.value.length);else{var Y=_.ownerDocument||document,F=Y&&Y.defaultView||window;if(F.getSelection){var j=F.getSelection(),gt=_.textContent.length,ht=Math.min(x.start,gt),Ht=x.end===void 0?ht:Math.min(x.end,gt);!j.extend&&ht>Ht&&(A=Ht,Ht=ht,ht=A);var k=Ld(_,ht),D=Ld(_,Ht);if(k&&D&&(j.rangeCount!==1||j.anchorNode!==k.node||j.anchorOffset!==k.offset||j.focusNode!==D.node||j.focusOffset!==D.offset)){var B=Y.createRange();B.setStart(k.node,k.offset),j.removeAllRanges(),ht>Ht?(j.addRange(B),j.extend(D.node,D.offset)):(B.setEnd(D.node,D.offset),j.addRange(B))}}}}for(Y=[],j=_;j=j.parentNode;)j.nodeType===1&&Y.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Y.length;_++){var V=Y[_];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}ql=!!xc,Cc=xc=null}finally{Nt=f,U.p=o,O.T=a}}e.current=i,we=2}}function Yp(){if(we===2){we=0;var e=Ei,i=Fs,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var o=U.p;U.p=2;var f=Nt;Nt|=4;try{wp(e,i.alternate,i)}finally{Nt=f,U.p=o,O.T=a}}we=3}}function $p(){if(we===4||we===3){we=0,Xt();var e=Ei,i=Fs,a=Us,o=Pp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?we=5:(we=0,Fs=Ei=null,Kp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Si=null),No(a),i=i.stateNode,ae&&typeof ae.onCommitFiberRoot=="function")try{ae.onCommitFiberRoot(Ni,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=O.T,f=U.p,U.p=2,O.T=null;try{for(var m=e.onRecoverableError,A=0;A<o.length;A++){var _=o[A];m(_.value,{componentStack:_.stack})}}finally{O.T=i,U.p=f}}(Us&3)!==0&&Ol(),Tn(e),f=e.pendingLanes,(a&4194090)!==0&&(f&42)!==0?e===dc?Xa++:(Xa=0,dc=e):Xa=0,Ya(0)}}function Kp(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,xa(i)))}function Ol(e){return Xp(),Yp(),$p(),Wp()}function Wp(){if(we!==5)return!1;var e=Ei,i=cc;cc=0;var a=No(Us),o=O.T,f=U.p;try{U.p=32>a?32:a,O.T=null,a=hc,hc=null;var m=Ei,A=Us;if(we=0,Fs=Ei=null,Us=0,(Nt&6)!==0)throw Error(s(331));var _=Nt;if(Nt|=4,Np(m.current),Dp(m,m.current,A,a),Nt=_,Ya(0,!1),ae&&typeof ae.onPostCommitFiberRoot=="function")try{ae.onPostCommitFiberRoot(Ni,m)}catch{}return!0}finally{U.p=f,O.T=o,Kp(e,i)}}function Qp(e,i,a){i=rn(a,i),i=qu(e.stateNode,i,2),e=di(e,i,2),e!==null&&(ca(e,2),Tn(e))}function Ft(e,i,a){if(e.tag===3)Qp(e,e,a);else for(;i!==null;){if(i.tag===3){Qp(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Si===null||!Si.has(o))){e=rn(a,e),a=ep(2),o=di(i,a,2),o!==null&&(np(a,o,i,e),ca(o,2),Tn(o));break}}i=i.return}}function mc(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new uv;var f=new Set;o.set(i,f)}else f=o.get(i),f===void 0&&(f=new Set,o.set(i,f));f.has(a)||(rc=!0,f.add(a),e=pv.bind(null,e,i,a),i.then(e,e))}function pv(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,jt===e&&(Mt&a)===a&&(Qt===4||Qt===3&&(Mt&62914560)===Mt&&300>de()-uc?(Nt&2)===0&&js(e,0):lc|=a,Is===Mt&&(Is=0)),Tn(e)}function Zp(e,i){i===0&&(i=Yh()),e=ws(e,i),e!==null&&(ca(e,i),Tn(e))}function gv(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Zp(e,a)}function mv(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Zp(e,a)}function yv(e,i){return he(e,i)}var Nl=null,qs=null,yc=!1,kl=!1,bc=!1,Qi=0;function Tn(e){e!==qs&&e.next===null&&(qs===null?Nl=qs=e:qs=qs.next=e),kl=!0,yc||(yc=!0,vv())}function Ya(e,i){if(!bc&&kl){bc=!0;do for(var a=!1,o=Nl;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var A=o.suspendedLanes,_=o.pingedLanes;m=(1<<31-me(42|e)+1)-1,m&=f&~(A&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,ng(o,m))}else m=Mt,m=Fr(o,o===jt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||ua(o,m)||(a=!0,ng(o,m));o=o.next}while(a);bc=!1}}function bv(){Jp()}function Jp(){kl=yc=!1;var e=0;Qi!==0&&(Cv()&&(e=Qi),Qi=0);for(var i=de(),a=null,o=Nl;o!==null;){var f=o.next,m=tg(o,i);m===0?(o.next=null,a===null?Nl=f:a.next=f,f===null&&(qs=a)):(a=o,(e!==0||(m&3)!==0)&&(kl=!0)),o=f}Ya(e)}function tg(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var A=31-me(m),_=1<<A,x=f[A];x===-1?((_&a)===0||(_&o)!==0)&&(f[A]=qy(_,i)):x<=i&&(e.expiredLanes|=_),m&=~_}if(i=jt,a=Mt,a=Fr(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(kt===2||kt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ot(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ua(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Ot(o),No(a)){case 2:case 8:a=Br;break;case 32:a=Bn;break;case 268435456:a=zr;break;default:a=Bn}return o=eg.bind(null,e),a=he(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Ot(o),e.callbackPriority=2,e.callbackNode=null,2}function eg(e,i){if(we!==0&&we!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ol()&&e.callbackNode!==a)return null;var o=Mt;return o=Fr(e,e===jt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(zp(e,o,i),tg(e,de()),e.callbackNode!=null&&e.callbackNode===a?eg.bind(null,e):null)}function ng(e,i){if(Ol())return null;zp(e,i,!0)}function vv(){Mv(function(){(Nt&6)!==0?he(ri,bv):Jp()})}function vc(){return Qi===0&&(Qi=Xh()),Qi}function ig(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vr(""+e)}function sg(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function Av(e,i,a,o,f){if(i==="submit"&&a&&a.stateNode===f){var m=ig((f[ze]||null).action),A=o.submitter;A&&(i=(i=A[ze]||null)?ig(i.formAction):A.getAttribute("formAction"),i!==null&&(m=i,A=null));var _=new Kr("action","action",null,o,f);e.push({event:_,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Qi!==0){var x=A?sg(f,A):new FormData(f);Iu(a,{pending:!0,data:x,method:f.method,action:m},null,x)}}else typeof m=="function"&&(_.preventDefault(),x=A?sg(f,A):new FormData(f),Iu(a,{pending:!0,data:x,method:f.method,action:m},m,x))},currentTarget:f}]})}}for(var Ac=0;Ac<su.length;Ac++){var Sc=su[Ac],Sv=Sc.toLowerCase(),Ev=Sc[0].toUpperCase()+Sc.slice(1);mn(Sv,"on"+Ev)}mn(Bd,"onAnimationEnd"),mn(zd,"onAnimationIteration"),mn(Hd,"onAnimationStart"),mn("dblclick","onDoubleClick"),mn("focusin","onFocus"),mn("focusout","onBlur"),mn(Ib,"onTransitionRun"),mn(Fb,"onTransitionStart"),mn(Ub,"onTransitionCancel"),mn(Id,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_v=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($a));function ag(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],f=o.event;o=o.listeners;t:{var m=void 0;if(i)for(var A=o.length-1;0<=A;A--){var _=o[A],x=_.instance,z=_.currentTarget;if(_=_.listener,x!==m&&f.isPropagationStopped())break t;m=_,f.currentTarget=z;try{m(f)}catch(G){Sl(G)}f.currentTarget=null,m=x}else for(A=0;A<o.length;A++){if(_=o[A],x=_.instance,z=_.currentTarget,_=_.listener,x!==m&&f.isPropagationStopped())break t;m=_,f.currentTarget=z;try{m(f)}catch(G){Sl(G)}f.currentTarget=null,m=x}}}}function Tt(e,i){var a=i[ko];a===void 0&&(a=i[ko]=new Set);var o=e+"__bubble";a.has(o)||(rg(i,e,2,!1),a.add(o))}function Ec(e,i,a){var o=0;i&&(o|=4),rg(a,e,o,i)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function _c(e){if(!e[Pl]){e[Pl]=!0,Zh.forEach(function(a){a!=="selectionchange"&&(_v.has(a)||Ec(a,!1,e),Ec(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Pl]||(i[Pl]=!0,Ec("selectionchange",!1,i))}}function rg(e,i,a,o){switch(Dg(i)){case 2:var f=Wv;break;case 8:f=Qv;break;default:f=zc}a=f.bind(null,i,a,e),f=void 0,!Vo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function wc(e,i,a,o,f){var m=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var A=o.tag;if(A===3||A===4){var _=o.stateNode.containerInfo;if(_===f)break;if(A===4)for(A=o.return;A!==null;){var x=A.tag;if((x===3||x===4)&&A.stateNode.containerInfo===f)return;A=A.return}for(;_!==null;){if(A=hs(_),A===null)return;if(x=A.tag,x===5||x===6||x===26||x===27){o=m=A;continue t}_=_.parentNode}}o=o.return}dd(function(){var z=m,G=Go(a),Y=[];t:{var F=Fd.get(e);if(F!==void 0){var j=Kr,gt=e;switch(e){case"keypress":if(Yr(a)===0)break t;case"keydown":case"keyup":j=yb;break;case"focusin":gt="focus",j=Ko;break;case"focusout":gt="blur",j=Ko;break;case"beforeblur":case"afterblur":j=Ko;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Ab;break;case Bd:case zd:case Hd:j=ob;break;case Id:j=Eb;break;case"scroll":case"scrollend":j=ib;break;case"wheel":j=wb;break;case"copy":case"cut":case"paste":j=cb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=yd;break;case"toggle":case"beforetoggle":j=xb}var ht=(i&4)!==0,Ht=!ht&&(e==="scroll"||e==="scrollend"),k=ht?F!==null?F+"Capture":null:F;ht=[];for(var D=z,B;D!==null;){var V=D;if(B=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||B===null||k===null||(V=fa(D,k),V!=null&&ht.push(Ka(D,V,B))),Ht)break;D=D.return}0<ht.length&&(F=new j(F,gt,null,a,G),Y.push({event:F,listeners:ht}))}}if((i&7)===0){t:{if(F=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",F&&a!==jo&&(gt=a.relatedTarget||a.fromElement)&&(hs(gt)||gt[cs]))break t;if((j||F)&&(F=G.window===G?G:(F=G.ownerDocument)?F.defaultView||F.parentWindow:window,j?(gt=a.relatedTarget||a.toElement,j=z,gt=gt?hs(gt):null,gt!==null&&(Ht=l(gt),ht=gt.tag,gt!==Ht||ht!==5&&ht!==27&&ht!==6)&&(gt=null)):(j=null,gt=z),j!==gt)){if(ht=gd,V="onMouseLeave",k="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ht=yd,V="onPointerLeave",k="onPointerEnter",D="pointer"),Ht=j==null?F:da(j),B=gt==null?F:da(gt),F=new ht(V,D+"leave",j,a,G),F.target=Ht,F.relatedTarget=B,V=null,hs(G)===z&&(ht=new ht(k,D+"enter",gt,a,G),ht.target=B,ht.relatedTarget=Ht,V=ht),Ht=V,j&&gt)e:{for(ht=j,k=gt,D=0,B=ht;B;B=Vs(B))D++;for(B=0,V=k;V;V=Vs(V))B++;for(;0<D-B;)ht=Vs(ht),D--;for(;0<B-D;)k=Vs(k),B--;for(;D--;){if(ht===k||k!==null&&ht===k.alternate)break e;ht=Vs(ht),k=Vs(k)}ht=null}else ht=null;j!==null&&lg(Y,F,j,ht,!1),gt!==null&&Ht!==null&&lg(Y,Ht,gt,ht,!0)}}t:{if(F=z?da(z):window,j=F.nodeName&&F.nodeName.toLowerCase(),j==="select"||j==="input"&&F.type==="file")var it=Td;else if(_d(F))if(xd)it=Bb;else{it=kb;var _t=Nb}else j=F.nodeName,!j||j.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?z&&Uo(z.elementType)&&(it=Td):it=Pb;if(it&&(it=it(e,z))){wd(Y,it,a,G);break t}_t&&_t(e,F,z),e==="focusout"&&z&&F.type==="number"&&z.memoizedProps.value!=null&&Fo(F,"number",F.value)}switch(_t=z?da(z):window,e){case"focusin":(_d(_t)||_t.contentEditable==="true")&&(Ss=_t,eu=z,Sa=null);break;case"focusout":Sa=eu=Ss=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,kd(Y,a,G);break;case"selectionchange":if(Hb)break;case"keydown":case"keyup":kd(Y,a,G)}var rt;if(Qo)t:{switch(e){case"compositionstart":var dt="onCompositionStart";break t;case"compositionend":dt="onCompositionEnd";break t;case"compositionupdate":dt="onCompositionUpdate";break t}dt=void 0}else As?Sd(e,a)&&(dt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(dt="onCompositionStart");dt&&(bd&&a.locale!=="ko"&&(As||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&As&&(rt=fd()):(oi=G,Xo="value"in oi?oi.value:oi.textContent,As=!0)),_t=Bl(z,dt),0<_t.length&&(dt=new md(dt,e,null,a,G),Y.push({event:dt,listeners:_t}),rt?dt.data=rt:(rt=Ed(a),rt!==null&&(dt.data=rt)))),(rt=Rb?Mb(e,a):Db(e,a))&&(dt=Bl(z,"onBeforeInput"),0<dt.length&&(_t=new md("onBeforeInput","beforeinput",null,a,G),Y.push({event:_t,listeners:dt}),_t.data=rt)),Av(Y,e,z,a,G)}ag(Y,i)})}function Ka(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Bl(e,i){for(var a=i+"Capture",o=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=fa(e,a),f!=null&&o.unshift(Ka(e,f,m)),f=fa(e,i),f!=null&&o.push(Ka(e,f,m))),e.tag===3)return o;e=e.return}return[]}function Vs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function lg(e,i,a,o,f){for(var m=i._reactName,A=[];a!==null&&a!==o;){var _=a,x=_.alternate,z=_.stateNode;if(_=_.tag,x!==null&&x===o)break;_!==5&&_!==26&&_!==27||z===null||(x=z,f?(z=fa(a,m),z!=null&&A.unshift(Ka(a,z,x))):f||(z=fa(a,m),z!=null&&A.push(Ka(a,z,x)))),a=a.return}A.length!==0&&e.push({event:i,listeners:A})}var wv=/\r\n?/g,Tv=/\u0000|\uFFFD/g;function og(e){return(typeof e=="string"?e:""+e).replace(wv,`
`).replace(Tv,"")}function ug(e,i){return i=og(i),og(e)===i}function zl(){}function zt(e,i,a,o,f,m){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||ys(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&ys(e,""+o);break;case"className":jr(e,"class",o);break;case"tabIndex":jr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":jr(e,a,o);break;case"style":cd(e,o,m);break;case"data":if(i!=="object"){jr(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Vr(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&zt(e,i,"name",f.name,f,null),zt(e,i,"formEncType",f.formEncType,f,null),zt(e,i,"formMethod",f.formMethod,f,null),zt(e,i,"formTarget",f.formTarget,f,null)):(zt(e,i,"encType",f.encType,f,null),zt(e,i,"method",f.method,f,null),zt(e,i,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Vr(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=zl);break;case"onScroll":o!=null&&Tt("scroll",e);break;case"onScrollEnd":o!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Vr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),Ur(e,"popover",o);break;case"xlinkActuate":zn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":zn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":zn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":zn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":zn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":zn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":zn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":zn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":zn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ur(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=eb.get(a)||a,Ur(e,a,o))}}function Tc(e,i,a,o,f,m){switch(a){case"style":cd(e,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?ys(e,o):(typeof o=="number"||typeof o=="bigint")&&ys(e,""+o);break;case"onScroll":o!=null&&Tt("scroll",e);break;case"onScrollEnd":o!=null&&Tt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=zl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jh.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=e[ze]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(i,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,f);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Ur(e,a,o)}}}function Te(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var o=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var A=a[m];if(A!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:zt(e,i,m,A,a,null)}}f&&zt(e,i,"srcSet",a.srcSet,a,null),o&&zt(e,i,"src",a.src,a,null);return;case"input":Tt("invalid",e);var _=m=A=f=null,x=null,z=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":f=G;break;case"type":A=G;break;case"checked":x=G;break;case"defaultChecked":z=G;break;case"value":m=G;break;case"defaultValue":_=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:zt(e,i,o,G,a,null)}}rd(e,m,_,x,z,A,f,!1),Gr(e);return;case"select":Tt("invalid",e),o=A=m=null;for(f in a)if(a.hasOwnProperty(f)&&(_=a[f],_!=null))switch(f){case"value":m=_;break;case"defaultValue":A=_;break;case"multiple":o=_;default:zt(e,i,f,_,a,null)}i=m,a=A,e.multiple=!!o,i!=null?ms(e,!!o,i,!1):a!=null&&ms(e,!!o,a,!0);return;case"textarea":Tt("invalid",e),m=f=o=null;for(A in a)if(a.hasOwnProperty(A)&&(_=a[A],_!=null))switch(A){case"value":o=_;break;case"defaultValue":f=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:zt(e,i,A,_,a,null)}od(e,o,f,m),Gr(e);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(o=a[x],o!=null))switch(x){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:zt(e,i,x,o,a,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(o=0;o<$a.length;o++)Tt($a[o],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:zt(e,i,z,o,a,null)}return;default:if(Uo(i)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&Tc(e,i,G,o,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(o=a[_],o!=null&&zt(e,i,_,o,a,null))}function xv(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,A=null,_=null,x=null,z=null,G=null;for(j in a){var Y=a[j];if(a.hasOwnProperty(j)&&Y!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":x=Y;default:o.hasOwnProperty(j)||zt(e,i,j,null,o,Y)}}for(var F in o){var j=o[F];if(Y=a[F],o.hasOwnProperty(F)&&(j!=null||Y!=null))switch(F){case"type":m=j;break;case"name":f=j;break;case"checked":z=j;break;case"defaultChecked":G=j;break;case"value":A=j;break;case"defaultValue":_=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:j!==Y&&zt(e,i,F,j,o,Y)}}Io(e,A,_,x,z,G,m,f);return;case"select":j=A=_=F=null;for(m in a)if(x=a[m],a.hasOwnProperty(m)&&x!=null)switch(m){case"value":break;case"multiple":j=x;default:o.hasOwnProperty(m)||zt(e,i,m,null,o,x)}for(f in o)if(m=o[f],x=a[f],o.hasOwnProperty(f)&&(m!=null||x!=null))switch(f){case"value":F=m;break;case"defaultValue":_=m;break;case"multiple":A=m;default:m!==x&&zt(e,i,f,m,o,x)}i=_,a=A,o=j,F!=null?ms(e,!!a,F,!1):!!o!=!!a&&(i!=null?ms(e,!!a,i,!0):ms(e,!!a,a?[]:"",!1));return;case"textarea":j=F=null;for(_ in a)if(f=a[_],a.hasOwnProperty(_)&&f!=null&&!o.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:zt(e,i,_,null,o,f)}for(A in o)if(f=o[A],m=a[A],o.hasOwnProperty(A)&&(f!=null||m!=null))switch(A){case"value":F=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&zt(e,i,A,f,o,m)}ld(e,F,j);return;case"option":for(var gt in a)if(F=a[gt],a.hasOwnProperty(gt)&&F!=null&&!o.hasOwnProperty(gt))switch(gt){case"selected":e.selected=!1;break;default:zt(e,i,gt,null,o,F)}for(x in o)if(F=o[x],j=a[x],o.hasOwnProperty(x)&&F!==j&&(F!=null||j!=null))switch(x){case"selected":e.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:zt(e,i,x,F,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in a)F=a[ht],a.hasOwnProperty(ht)&&F!=null&&!o.hasOwnProperty(ht)&&zt(e,i,ht,null,o,F);for(z in o)if(F=o[z],j=a[z],o.hasOwnProperty(z)&&F!==j&&(F!=null||j!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:zt(e,i,z,F,o,j)}return;default:if(Uo(i)){for(var Ht in a)F=a[Ht],a.hasOwnProperty(Ht)&&F!==void 0&&!o.hasOwnProperty(Ht)&&Tc(e,i,Ht,void 0,o,F);for(G in o)F=o[G],j=a[G],!o.hasOwnProperty(G)||F===j||F===void 0&&j===void 0||Tc(e,i,G,F,o,j);return}}for(var k in a)F=a[k],a.hasOwnProperty(k)&&F!=null&&!o.hasOwnProperty(k)&&zt(e,i,k,null,o,F);for(Y in o)F=o[Y],j=a[Y],!o.hasOwnProperty(Y)||F===j||F==null&&j==null||zt(e,i,Y,F,o,j)}var xc=null,Cc=null;function Hl(e){return e.nodeType===9?e:e.ownerDocument}function cg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hg(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Rc(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Mc=null;function Cv(){var e=window.event;return e&&e.type==="popstate"?e===Mc?!1:(Mc=e,!0):(Mc=null,!1)}var dg=typeof setTimeout=="function"?setTimeout:void 0,Rv=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,Mv=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(e){return fg.resolve(null).then(e).catch(Dv)}:dg;function Dv(e){setTimeout(function(){throw e})}function wi(e){return e==="head"}function pg(e,i){var a=i,o=0,f=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<o&&8>o){a=o;var A=e.ownerDocument;if(a&1&&Wa(A.documentElement),a&2&&Wa(A.body),a&4)for(a=A.head,Wa(a),A=a.firstChild;A;){var _=A.nextSibling,x=A.nodeName;A[ha]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&A.rel.toLowerCase()==="stylesheet"||a.removeChild(A),A=_}}if(f===0){e.removeChild(m),sr(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:o=a.charCodeAt(0)-48;else o=0;a=m}while(a);sr(i)}function Dc(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dc(a),Po(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Lv(e,i,a,o){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ha])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=bn(e.nextSibling),e===null)break}return null}function Ov(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=bn(e.nextSibling),e===null))return null;return e}function Lc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Nv(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function bn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Oc=null;function gg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function mg(e,i,a){switch(i=Hl(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Wa(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Po(e)}var dn=new Map,yg=new Set;function Il(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qn=U.d;U.d={f:kv,r:Pv,D:Bv,C:zv,L:Hv,m:Iv,X:Uv,S:Fv,M:jv};function kv(){var e=Qn.f(),i=Dl();return e||i}function Pv(e){var i=ds(e);i!==null&&i.tag===5&&i.type==="form"?zf(i):Qn.r(e)}var Xs=typeof document>"u"?null:document;function bg(e,i,a){var o=Xs;if(o&&typeof i=="string"&&i){var f=an(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),yg.has(f)||(yg.add(f),e={rel:e,crossOrigin:a,href:i},o.querySelector(f)===null&&(i=o.createElement("link"),Te(i,"link",e),ye(i),o.head.appendChild(i)))}}function Bv(e){Qn.D(e),bg("dns-prefetch",e,null)}function zv(e,i){Qn.C(e,i),bg("preconnect",e,i)}function Hv(e,i,a){Qn.L(e,i,a);var o=Xs;if(o&&e&&i){var f='link[rel="preload"][as="'+an(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+an(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+an(a.imageSizes)+'"]')):f+='[href="'+an(e)+'"]';var m=f;switch(i){case"style":m=Ys(e);break;case"script":m=$s(e)}dn.has(m)||(e=g({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),dn.set(m,e),o.querySelector(f)!==null||i==="style"&&o.querySelector(Qa(m))||i==="script"&&o.querySelector(Za(m))||(i=o.createElement("link"),Te(i,"link",e),ye(i),o.head.appendChild(i)))}}function Iv(e,i){Qn.m(e,i);var a=Xs;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+an(o)+'"][href="'+an(e)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=$s(e)}if(!dn.has(m)&&(e=g({rel:"modulepreload",href:e},i),dn.set(m,e),a.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Za(m)))return}o=a.createElement("link"),Te(o,"link",e),ye(o),a.head.appendChild(o)}}}function Fv(e,i,a){Qn.S(e,i,a);var o=Xs;if(o&&e){var f=fs(o).hoistableStyles,m=Ys(e);i=i||"default";var A=f.get(m);if(!A){var _={loading:0,preload:null};if(A=o.querySelector(Qa(m)))_.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":i},a),(a=dn.get(m))&&Nc(e,a);var x=A=o.createElement("link");ye(x),Te(x,"link",e),x._p=new Promise(function(z,G){x.onload=z,x.onerror=G}),x.addEventListener("load",function(){_.loading|=1}),x.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Fl(A,i,o)}A={type:"stylesheet",instance:A,count:1,state:_},f.set(m,A)}}}function Uv(e,i){Qn.X(e,i);var a=Xs;if(a&&e){var o=fs(a).hoistableScripts,f=$s(e),m=o.get(f);m||(m=a.querySelector(Za(f)),m||(e=g({src:e,async:!0},i),(i=dn.get(f))&&kc(e,i),m=a.createElement("script"),ye(m),Te(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function jv(e,i){Qn.M(e,i);var a=Xs;if(a&&e){var o=fs(a).hoistableScripts,f=$s(e),m=o.get(f);m||(m=a.querySelector(Za(f)),m||(e=g({src:e,async:!0,type:"module"},i),(i=dn.get(f))&&kc(e,i),m=a.createElement("script"),ye(m),Te(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function vg(e,i,a,o){var f=(f=st.current)?Il(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ys(a.href),a=fs(f).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ys(a.href);var m=fs(f).hoistableStyles,A=m.get(e);if(A||(f=f.ownerDocument||f,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,A),(m=f.querySelector(Qa(e)))&&!m._p&&(A.instance=m,A.state.loading=5),dn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},dn.set(e,a),m||Gv(f,e,a,A.state))),i&&o===null)throw Error(s(528,""));return A}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=$s(a),a=fs(f).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ys(e){return'href="'+an(e)+'"'}function Qa(e){return'link[rel="stylesheet"]['+e+"]"}function Ag(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function Gv(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Te(i,"link",a),ye(i),e.head.appendChild(i))}function $s(e){return'[src="'+an(e)+'"]'}function Za(e){return"script[async]"+e}function Sg(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+an(a.href)+'"]');if(o)return i.instance=o,ye(o),o;var f=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ye(o),Te(o,"style",f),Fl(o,a.precedence,e),i.instance=o;case"stylesheet":f=Ys(a.href);var m=e.querySelector(Qa(f));if(m)return i.state.loading|=4,i.instance=m,ye(m),m;o=Ag(a),(f=dn.get(f))&&Nc(o,f),m=(e.ownerDocument||e).createElement("link"),ye(m);var A=m;return A._p=new Promise(function(_,x){A.onload=_,A.onerror=x}),Te(m,"link",o),i.state.loading|=4,Fl(m,a.precedence,e),i.instance=m;case"script":return m=$s(a.src),(f=e.querySelector(Za(m)))?(i.instance=f,ye(f),f):(o=a,(f=dn.get(m))&&(o=g({},a),kc(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),ye(f),Te(f,"link",o),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Fl(o,a.precedence,e));return i.instance}function Fl(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,A=0;A<o.length;A++){var _=o[A];if(_.dataset.precedence===i)m=_;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Nc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function kc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Ul=null;function Eg(e,i,a){if(Ul===null){var o=new Map,f=Ul=new Map;f.set(a,o)}else f=Ul,o=f.get(a),o||(o=new Map,f.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var m=a[f];if(!(m[ha]||m[Ce]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var A=m.getAttribute(i)||"";A=e+A;var _=o.get(A);_?_.push(m):o.set(A,[m])}}return o}function _g(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function qv(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function wg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Ja=null;function Vv(){}function Xv(e,i,a){if(Ja===null)throw Error(s(475));var o=Ja;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Ys(a.href),m=e.querySelector(Qa(f));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=jl.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=m,ye(m);return}m=e.ownerDocument||e,a=Ag(a),(f=dn.get(f))&&Nc(a,f),m=m.createElement("link"),ye(m);var A=m;A._p=new Promise(function(_,x){A.onload=_,A.onerror=x}),Te(m,"link",a),i.instance=m}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=jl.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function Yv(){if(Ja===null)throw Error(s(475));var e=Ja;return e.stylesheets&&e.count===0&&Pc(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Pc(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function jl(){if(this.count--,this.count===0){if(this.stylesheets)Pc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Gl=null;function Pc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Gl=new Map,i.forEach($v,e),Gl=null,jl.call(e))}function $v(e,i){if(!(i.state.loading&4)){var a=Gl.get(e);if(a)var o=a.get(null);else{a=new Map,Gl.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var A=f[m];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),o=A)}o&&a.set(null,o)}f=i.instance,A=f.getAttribute("data-precedence"),m=a.get(A)||o,m===o&&a.set(null,f),a.set(A,f),this.count++,o=jl.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var tr={$$typeof:C,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Kv(e,i,a,o,f,m,A,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.hiddenUpdates=Lo(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Tg(e,i,a,o,f,m,A,_,x,z,G,Y){return e=new Kv(e,i,a,A,_,x,z,Y),i=1,m===!0&&(i|=24),m=$e(3,null,null,i),e.current=m,m.stateNode=e,i=mu(),i.refCount++,e.pooledCache=i,i.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:i},Au(m),e}function xg(e){return e?(e=Ts,e):Ts}function Cg(e,i,a,o,f,m){f=xg(f),o.context===null?o.context=f:o.pendingContext=f,o=hi(i),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=di(e,o,i),a!==null&&(Je(a,e,i),Da(a,e,i))}function Rg(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Bc(e,i){Rg(e,i),(e=e.alternate)&&Rg(e,i)}function Mg(e){if(e.tag===13){var i=ws(e,67108864);i!==null&&Je(i,e,67108864),Bc(e,67108864)}}var ql=!0;function Wv(e,i,a,o){var f=O.T;O.T=null;var m=U.p;try{U.p=2,zc(e,i,a,o)}finally{U.p=m,O.T=f}}function Qv(e,i,a,o){var f=O.T;O.T=null;var m=U.p;try{U.p=8,zc(e,i,a,o)}finally{U.p=m,O.T=f}}function zc(e,i,a,o){if(ql){var f=Hc(o);if(f===null)wc(e,i,o,Vl,a),Lg(e,o);else if(Jv(f,e,i,a,o))o.stopPropagation();else if(Lg(e,o),i&4&&-1<Zv.indexOf(e)){for(;f!==null;){var m=ds(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var A=ki(m.pendingLanes);if(A!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;A;){var x=1<<31-me(A);_.entanglements[1]|=x,A&=~x}Tn(m),(Nt&6)===0&&(Rl=de()+500,Ya(0))}}break;case 13:_=ws(m,2),_!==null&&Je(_,m,2),Dl(),Bc(m,2)}if(m=Hc(o),m===null&&wc(e,i,o,Vl,a),m===f)break;f=m}f!==null&&o.stopPropagation()}else wc(e,i,o,null,a)}}function Hc(e){return e=Go(e),Ic(e)}var Vl=null;function Ic(e){if(Vl=null,e=hs(e),e!==null){var i=l(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=u(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Vl=e,null}function Dg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ai()){case ri:return 2;case Br:return 8;case Bn:case Ro:return 32;case zr:return 268435456;default:return 32}default:return 32}}var Fc=!1,Ti=null,xi=null,Ci=null,er=new Map,nr=new Map,Ri=[],Zv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lg(e,i){switch(e){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":er.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":nr.delete(i.pointerId)}}function ir(e,i,a,o,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},i!==null&&(i=ds(i),i!==null&&Mg(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function Jv(e,i,a,o,f){switch(i){case"focusin":return Ti=ir(Ti,e,i,a,o,f),!0;case"dragenter":return xi=ir(xi,e,i,a,o,f),!0;case"mouseover":return Ci=ir(Ci,e,i,a,o,f),!0;case"pointerover":var m=f.pointerId;return er.set(m,ir(er.get(m)||null,e,i,a,o,f)),!0;case"gotpointercapture":return m=f.pointerId,nr.set(m,ir(nr.get(m)||null,e,i,a,o,f)),!0}return!1}function Og(e){var i=hs(e.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=u(a),i!==null){e.blockedOn=i,Xy(e.priority,function(){if(a.tag===13){var o=Ze();o=Oo(o);var f=ws(a,o);f!==null&&Je(f,a,o),Bc(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xl(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Hc(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);jo=o,a.target.dispatchEvent(o),jo=null}else return i=ds(a),i!==null&&Mg(i),e.blockedOn=a,!1;i.shift()}return!0}function Ng(e,i,a){Xl(e)&&a.delete(i)}function t0(){Fc=!1,Ti!==null&&Xl(Ti)&&(Ti=null),xi!==null&&Xl(xi)&&(xi=null),Ci!==null&&Xl(Ci)&&(Ci=null),er.forEach(Ng),nr.forEach(Ng)}function Yl(e,i){e.blockedOn===i&&(e.blockedOn=null,Fc||(Fc=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,t0)))}var $l=null;function kg(e){$l!==e&&($l=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){$l===e&&($l=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],f=e[i+2];if(typeof o!="function"){if(Ic(o||a)===null)continue;break}var m=ds(a);m!==null&&(e.splice(i,3),i-=3,Iu(m,{pending:!0,data:f,method:a.method,action:o},o,f))}}))}function sr(e){function i(x){return Yl(x,e)}Ti!==null&&Yl(Ti,e),xi!==null&&Yl(xi,e),Ci!==null&&Yl(Ci,e),er.forEach(i),nr.forEach(i);for(var a=0;a<Ri.length;a++){var o=Ri[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ri.length&&(a=Ri[0],a.blockedOn===null);)Og(a),a.blockedOn===null&&Ri.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var f=a[o],m=a[o+1],A=f[ze]||null;if(typeof m=="function")A||kg(a);else if(A){var _=null;if(m&&m.hasAttribute("formAction")){if(f=m,A=m[ze]||null)_=A.formAction;else if(Ic(f)!==null)continue}else _=A.action;typeof _=="function"?a[o+1]=_:(a.splice(o,3),o-=3),kg(a)}}}function Uc(e){this._internalRoot=e}Kl.prototype.render=Uc.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Ze();Cg(a,o,e,i,null,null)},Kl.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Cg(e.current,2,null,e,null,null),Dl(),i[cs]=null}};function Kl(e){this._internalRoot=e}Kl.prototype.unstable_scheduleHydration=function(e){if(e){var i=Wh();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Ri.length&&i!==0&&i<Ri[a].priority;a++);Ri.splice(a,0,e),a===0&&Og(e)}};var Pg=t.version;if(Pg!=="19.1.0")throw Error(s(527,Pg,"19.1.0"));U.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=d(i),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var e0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{Ni=Wl.inject(e0),ae=Wl}catch{}}return rr.createRoot=function(e,i){if(!r(e))throw Error(s(299));var a=!1,o="",f=Qf,m=Zf,A=Jf,_=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(A=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(_=i.unstable_transitionCallbacks)),i=Tg(e,1,!1,null,null,a,o,f,m,A,_,null),e[cs]=i.current,_c(e),new Uc(i)},rr.hydrateRoot=function(e,i,a){if(!r(e))throw Error(s(299));var o=!1,f="",m=Qf,A=Zf,_=Jf,x=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),i=Tg(e,1,!0,i,a??null,o,f,m,A,_,x,z),i.context=xg(null),a=i.current,o=Ze(),o=Oo(o),f=hi(o),f.callback=null,di(a,f,o),a=o,i.current.lanes=a,ca(i,a),Tn(i),e[cs]=i.current,_c(e),new Kl(i)},rr.version="19.1.0",rr}var Yg;function d0(){if(Yg)return Vc.exports;Yg=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Vc.exports=h0(),Vc.exports}var f0=d0();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $g="popstate";function p0(h={}){function t(s,r){let{pathname:l,search:u,hash:c}=s.location;return rh("",{pathname:l,search:u,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:yr(r)}return m0(t,n,null,h)}function Kt(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function kn(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function g0(){return Math.random().toString(36).substring(2,10)}function Kg(h,t){return{usr:h.state,key:h.key,idx:t}}function rh(h,t,n=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?aa(t):t,state:n,key:t&&t.key||s||g0()}}function yr({pathname:h="/",search:t="",hash:n=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(h+=n.charAt(0)==="#"?n:"#"+n),h}function aa(h){let t={};if(h){let n=h.indexOf("#");n>=0&&(t.hash=h.substring(n),h=h.substring(0,n));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function m0(h,t,n,s={}){let{window:r=document.defaultView,v5Compat:l=!1}=s,u=r.history,c="POP",d=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function y(){c="POP";let T=g(),w=T==null?null:T-p;p=T,d&&d({action:c,location:S.location,delta:w})}function b(T,w){c="PUSH";let L=rh(S.location,T,w);p=g()+1;let C=Kg(L,p),N=S.createHref(L);try{u.pushState(C,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(N)}l&&d&&d({action:c,location:S.location,delta:1})}function v(T,w){c="REPLACE";let L=rh(S.location,T,w);p=g();let C=Kg(L,p),N=S.createHref(L);u.replaceState(C,"",N),l&&d&&d({action:c,location:S.location,delta:0})}function E(T){return y0(T)}let S={get action(){return c},get location(){return h(r,u)},listen(T){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener($g,y),d=T,()=>{r.removeEventListener($g,y),d=null}},createHref(T){return t(r,T)},createURL:E,encodeLocation(T){let w=E(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:v,go(T){return u.go(T)}};return S}function y0(h,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(n,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:yr(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Lm(h,t,n="/"){return b0(h,t,n,!1)}function b0(h,t,n,s){let r=typeof t=="string"?aa(t):t,l=ei(r.pathname||"/",n);if(l==null)return null;let u=Om(h);v0(u);let c=null;for(let d=0;c==null&&d<u.length;++d){let p=D0(l);c=R0(u[d],p,s)}return c}function Om(h,t=[],n=[],s=""){let r=(l,u,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};d.relativePath.startsWith("/")&&(Kt(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length));let p=ti([s,d.relativePath]),g=n.concat(d);l.children&&l.children.length>0&&(Kt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Om(l.children,t,g,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:x0(p,l.index),routesMeta:g})};return h.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))r(l,u);else for(let c of Nm(l.path))r(l,u,c)}),t}function Nm(h){let t=h.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return r?[l,""]:[l];let u=Nm(s.join("/")),c=[];return c.push(...u.map(d=>d===""?l:[l,d].join("/"))),r&&c.push(...u),c.map(d=>h.startsWith("/")&&d===""?"/":d)}function v0(h){h.sort((t,n)=>t.score!==n.score?n.score-t.score:C0(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var A0=/^:[\w-]+$/,S0=3,E0=2,_0=1,w0=10,T0=-2,Wg=h=>h==="*";function x0(h,t){let n=h.split("/"),s=n.length;return n.some(Wg)&&(s+=T0),t&&(s+=E0),n.filter(r=>!Wg(r)).reduce((r,l)=>r+(A0.test(l)?S0:l===""?_0:w0),s)}function C0(h,t){return h.length===t.length&&h.slice(0,-1).every((s,r)=>s===t[r])?h[h.length-1]-t[t.length-1]:0}function R0(h,t,n=!1){let{routesMeta:s}=h,r={},l="/",u=[];for(let c=0;c<s.length;++c){let d=s[c],p=c===s.length-1,g=l==="/"?t:t.slice(l.length)||"/",y=ho({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),b=d.route;if(!y&&p&&n&&!s[s.length-1].route.index&&(y=ho({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(r,y.params),u.push({params:r,pathname:ti([l,y.pathname]),pathnameBase:k0(ti([l,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(l=ti([l,y.pathnameBase]))}return u}function ho(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[n,s]=M0(h.path,h.caseSensitive,h.end),r=t.match(n);if(!r)return null;let l=r[0],u=l.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:s.reduce((p,{paramName:g,isOptional:y},b)=>{if(g==="*"){let E=c[b]||"";u=l.slice(0,l.length-E.length).replace(/(.)\/+$/,"$1")}const v=c[b];return y&&!v?p[g]=void 0:p[g]=(v||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:h}}function M0(h,t=!1,n=!0){kn(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],r="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return h.endsWith("*")?(s.push({paramName:"*"}),r+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":h!==""&&h!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function D0(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return kn(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function ei(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=h.charAt(n);return s&&s!=="/"?null:h.slice(n)||"/"}function L0(h,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof h=="string"?aa(h):h;return{pathname:n?n.startsWith("/")?n:O0(n,t):t,search:P0(s),hash:B0(r)}}function O0(h,t){let n=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Kc(h,t,n,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function N0(h){return h.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function km(h){let t=N0(h);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function Pm(h,t,n,s=!1){let r;typeof h=="string"?r=aa(h):(r={...h},Kt(!r.pathname||!r.pathname.includes("?"),Kc("?","pathname","search",r)),Kt(!r.pathname||!r.pathname.includes("#"),Kc("#","pathname","hash",r)),Kt(!r.search||!r.search.includes("#"),Kc("#","search","hash",r)));let l=h===""||r.pathname==="",u=l?"/":r.pathname,c;if(u==null)c=n;else{let y=t.length-1;if(!s&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),y-=1;r.pathname=b.join("/")}c=y>=0?t[y]:"/"}let d=L0(r,c),p=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var ti=h=>h.join("/").replace(/\/\/+/g,"/"),k0=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),P0=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,B0=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function z0(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}var Bm=["POST","PUT","PATCH","DELETE"];new Set(Bm);var H0=["GET",...Bm];new Set(H0);var ra=P.createContext(null);ra.displayName="DataRouter";var mo=P.createContext(null);mo.displayName="DataRouterState";P.createContext(!1);var zm=P.createContext({isTransitioning:!1});zm.displayName="ViewTransition";var I0=P.createContext(new Map);I0.displayName="Fetchers";var F0=P.createContext(null);F0.displayName="Await";var Pn=P.createContext(null);Pn.displayName="Navigation";var _r=P.createContext(null);_r.displayName="Location";var si=P.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var vh=P.createContext(null);vh.displayName="RouteError";function U0(h,{relative:t}={}){Kt(wr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=P.useContext(Pn),{hash:r,pathname:l,search:u}=Tr(h,{relative:t}),c=l;return n!=="/"&&(c=l==="/"?n:ti([n,l])),s.createHref({pathname:c,search:u,hash:r})}function wr(){return P.useContext(_r)!=null}function ls(){return Kt(wr(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(_r).location}var Hm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Im(h){P.useContext(Pn).static||P.useLayoutEffect(h)}function j0(){let{isDataRoute:h}=P.useContext(si);return h?eA():G0()}function G0(){Kt(wr(),"useNavigate() may be used only in the context of a <Router> component.");let h=P.useContext(ra),{basename:t,navigator:n}=P.useContext(Pn),{matches:s}=P.useContext(si),{pathname:r}=ls(),l=JSON.stringify(km(s)),u=P.useRef(!1);return Im(()=>{u.current=!0}),P.useCallback((d,p={})=>{if(kn(u.current,Hm),!u.current)return;if(typeof d=="number"){n.go(d);return}let g=Pm(d,JSON.parse(l),r,p.relative==="path");h==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ti([t,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[t,n,l,r,h])}P.createContext(null);function Tr(h,{relative:t}={}){let{matches:n}=P.useContext(si),{pathname:s}=ls(),r=JSON.stringify(km(n));return P.useMemo(()=>Pm(h,JSON.parse(r),s,t==="path"),[h,r,s,t])}function q0(h,t){return Fm(h,t)}function Fm(h,t,n,s){Kt(wr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=P.useContext(Pn),{matches:l}=P.useContext(si),u=l[l.length-1],c=u?u.params:{},d=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let w=g&&g.path||"";Um(d,!g||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let y=ls(),b;if(t){let w=typeof t=="string"?aa(t):t;Kt(p==="/"||w.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${w.pathname}" was given in the \`location\` prop.`),b=w}else b=y;let v=b.pathname||"/",E=v;if(p!=="/"){let w=p.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=Lm(h,{pathname:E});kn(g||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),kn(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=K0(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:ti([p,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?p:ti([p,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,n,s);return t&&T?P.createElement(_r.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},T):T}function V0(){let h=tA(),t=z0(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),n=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",h),u=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:r},n):null,u)}var X0=P.createElement(V0,null),Y0=class extends P.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){console.error("React Router caught the following error during render",h,t)}render(){return this.state.error!==void 0?P.createElement(si.Provider,{value:this.props.routeContext},P.createElement(vh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $0({routeContext:h,match:t,children:n}){let s=P.useContext(ra);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(si.Provider,{value:h},n)}function K0(h,t=[],n=null,s=null){if(h==null){if(!n)return null;if(n.errors)h=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)h=n.matches;else return null}let r=h,l=n?.errors;if(l!=null){let d=r.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);Kt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let u=!1,c=-1;if(n)for(let d=0;d<r.length;d++){let p=r[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:y}=n,b=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){u=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((d,p,g)=>{let y,b=!1,v=null,E=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,v=p.route.errorElement||X0,u&&(c<0&&g===0?(Um("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,E=null):c===g&&(b=!0,E=p.route.hydrateFallbackElement||null)));let S=t.concat(r.slice(0,g+1)),T=()=>{let w;return y?w=v:b?w=E:p.route.Component?w=P.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=d,P.createElement($0,{match:p,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:w})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(Y0,{location:n.location,revalidation:n.revalidation,component:v,error:y,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}function Ah(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W0(h){let t=P.useContext(ra);return Kt(t,Ah(h)),t}function Q0(h){let t=P.useContext(mo);return Kt(t,Ah(h)),t}function Z0(h){let t=P.useContext(si);return Kt(t,Ah(h)),t}function Sh(h){let t=Z0(h),n=t.matches[t.matches.length-1];return Kt(n.route.id,`${h} can only be used on routes that contain a unique "id"`),n.route.id}function J0(){return Sh("useRouteId")}function tA(){let h=P.useContext(vh),t=Q0("useRouteError"),n=Sh("useRouteError");return h!==void 0?h:t.errors?.[n]}function eA(){let{router:h}=W0("useNavigate"),t=Sh("useNavigate"),n=P.useRef(!1);return Im(()=>{n.current=!0}),P.useCallback(async(r,l={})=>{kn(n.current,Hm),n.current&&(typeof r=="number"?h.navigate(r):await h.navigate(r,{fromRouteId:t,...l}))},[h,t])}var Qg={};function Um(h,t,n){!t&&!Qg[h]&&(Qg[h]=!0,kn(!1,n))}P.memo(nA);function nA({routes:h,future:t,state:n}){return Fm(h,void 0,n,t)}function ro(h){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iA({basename:h="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:l=!1}){Kt(!wr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=h.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:u,navigator:r,static:l,future:{}}),[u,r,l]);typeof n=="string"&&(n=aa(n));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:b="default"}=n,v=P.useMemo(()=>{let E=ei(d,u);return E==null?null:{location:{pathname:E,search:p,hash:g,state:y,key:b},navigationType:s}},[u,d,p,g,y,b,s]);return kn(v!=null,`<Router basename="${u}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:P.createElement(Pn.Provider,{value:c},P.createElement(_r.Provider,{children:t,value:v}))}function sA({children:h,location:t}){return q0(lh(h),t)}function lh(h,t=[]){let n=[];return P.Children.forEach(h,(s,r)=>{if(!P.isValidElement(s))return;let l=[...t,r];if(s.type===P.Fragment){n.push.apply(n,lh(s.props.children,l));return}Kt(s.type===ro,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=lh(s.props.children,l)),n.push(u)}),n}var lo="get",oo="application/x-www-form-urlencoded";function yo(h){return h!=null&&typeof h.tagName=="string"}function aA(h){return yo(h)&&h.tagName.toLowerCase()==="button"}function rA(h){return yo(h)&&h.tagName.toLowerCase()==="form"}function lA(h){return yo(h)&&h.tagName.toLowerCase()==="input"}function oA(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function uA(h,t){return h.button===0&&(!t||t==="_self")&&!oA(h)}var Ql=null;function cA(){if(Ql===null)try{new FormData(document.createElement("form"),0),Ql=!1}catch{Ql=!0}return Ql}var hA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wc(h){return h!=null&&!hA.has(h)?(kn(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oo}"`),null):h}function dA(h,t){let n,s,r,l,u;if(rA(h)){let c=h.getAttribute("action");s=c?ei(c,t):null,n=h.getAttribute("method")||lo,r=Wc(h.getAttribute("enctype"))||oo,l=new FormData(h)}else if(aA(h)||lA(h)&&(h.type==="submit"||h.type==="image")){let c=h.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||c.getAttribute("action");if(s=d?ei(d,t):null,n=h.getAttribute("formmethod")||c.getAttribute("method")||lo,r=Wc(h.getAttribute("formenctype"))||Wc(c.getAttribute("enctype"))||oo,l=new FormData(c,h),!cA()){let{name:p,type:g,value:y}=h;if(g==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,y)}}else{if(yo(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lo,s=null,r=oo,u=h}return l&&r==="text/plain"&&(u=l,l=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Eh(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function fA(h,t,n){let s=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&ei(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function pA(h,t){if(h.id in t)return t[h.id];try{let n=await import(h.module);return t[h.id]=n,n}catch(n){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gA(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function mA(h,t,n){let s=await Promise.all(h.map(async r=>{let l=t.routes[r.route.id];if(l){let u=await pA(l,n);return u.links?u.links():[]}return[]}));return AA(s.flat(1).filter(gA).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Zg(h,t,n,s,r,l){let u=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,c=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return l==="assets"?t.filter((d,p)=>u(d,p)||c(d,p)):l==="data"?t.filter((d,p)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(u(d,p)||c(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function yA(h,t,{includeHydrateFallback:n}={}){return bA(h.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function bA(h){return[...new Set(h)]}function vA(h){let t={},n=Object.keys(h).sort();for(let s of n)t[s]=h[s];return t}function AA(h,t){let n=new Set;return new Set(t),h.reduce((s,r)=>{let l=JSON.stringify(vA(r));return n.has(l)||(n.add(l),s.push({key:l,link:r})),s},[])}function jm(){let h=P.useContext(ra);return Eh(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function SA(){let h=P.useContext(mo);return Eh(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var _h=P.createContext(void 0);_h.displayName="FrameworkContext";function Gm(){let h=P.useContext(_h);return Eh(h,"You must render this element inside a <HydratedRouter> element"),h}function EA(h,t){let n=P.useContext(_h),[s,r]=P.useState(!1),[l,u]=P.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,b=P.useRef(null);P.useEffect(()=>{if(h==="render"&&u(!0),h==="viewport"){let S=w=>{w.forEach(L=>{u(L.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return b.current&&T.observe(b.current),()=>{T.disconnect()}}},[h]),P.useEffect(()=>{if(s){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[s]);let v=()=>{r(!0)},E=()=>{r(!1),u(!1)};return n?h!=="intent"?[l,b,{}]:[l,b,{onFocus:lr(c,v),onBlur:lr(d,E),onMouseEnter:lr(p,v),onMouseLeave:lr(g,E),onTouchStart:lr(y,v)}]:[!1,b,{}]}function lr(h,t){return n=>{h&&h(n),n.defaultPrevented||t(n)}}function _A({page:h,...t}){let{router:n}=jm(),s=P.useMemo(()=>Lm(n.routes,h,n.basename),[n.routes,h,n.basename]);return s?P.createElement(TA,{page:h,matches:s,...t}):null}function wA(h){let{manifest:t,routeModules:n}=Gm(),[s,r]=P.useState([]);return P.useEffect(()=>{let l=!1;return mA(h,t,n).then(u=>{l||r(u)}),()=>{l=!0}},[h,t,n]),s}function TA({page:h,matches:t,...n}){let s=ls(),{manifest:r,routeModules:l}=Gm(),{basename:u}=jm(),{loaderData:c,matches:d}=SA(),p=P.useMemo(()=>Zg(h,t,d,r,s,"data"),[h,t,d,r,s]),g=P.useMemo(()=>Zg(h,t,d,r,s,"assets"),[h,t,d,r,s]),y=P.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let E=new Set,S=!1;if(t.forEach(w=>{let L=r.routes[w.route.id];!L||!L.hasLoader||(!p.some(C=>C.route.id===w.route.id)&&w.route.id in c&&l[w.route.id]?.shouldRevalidate||L.hasClientLoader?S=!0:E.add(w.route.id))}),E.size===0)return[];let T=fA(h,u,"data");return S&&E.size>0&&T.searchParams.set("_routes",t.filter(w=>E.has(w.route.id)).map(w=>w.route.id).join(",")),[T.pathname+T.search]},[u,c,s,r,p,t,h,l]),b=P.useMemo(()=>yA(g,r),[g,r]),v=wA(g);return P.createElement(P.Fragment,null,y.map(E=>P.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),b.map(E=>P.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),v.map(({key:E,link:S})=>P.createElement("link",{key:E,...S})))}function xA(...h){return t=>{h.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var qm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qm&&(window.__reactRouterVersion="7.7.0")}catch{}function CA({basename:h,children:t,window:n}){let s=P.useRef();s.current==null&&(s.current=p0({window:n,v5Compat:!0}));let r=s.current,[l,u]=P.useState({action:r.action,location:r.location}),c=P.useCallback(d=>{P.startTransition(()=>u(d))},[u]);return P.useLayoutEffect(()=>r.listen(c),[r,c]),P.createElement(iA,{basename:h,children:t,location:l.location,navigationType:l.action,navigator:r})}var Vm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xm=P.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:l,replace:u,state:c,target:d,to:p,preventScrollReset:g,viewTransition:y,...b},v){let{basename:E}=P.useContext(Pn),S=typeof p=="string"&&Vm.test(p),T,w=!1;if(typeof p=="string"&&S&&(T=p,qm))try{let $=new URL(window.location.href),Z=p.startsWith("//")?new URL($.protocol+p):new URL(p),Q=ei(Z.pathname,E);Z.origin===$.origin&&Q!=null?p=Q+Z.search+Z.hash:w=!0}catch{kn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=U0(p,{relative:r}),[C,N,M]=EA(s,b),I=LA(p,{replace:u,state:c,target:d,preventScrollReset:g,relative:r,viewTransition:y});function H($){t&&t($),$.defaultPrevented||I($)}let X=P.createElement("a",{...b,...M,href:T||L,onClick:w||l?t:H,ref:xA(v,N),target:d,"data-discover":!S&&n==="render"?"true":void 0});return C&&!S?P.createElement(P.Fragment,null,X,P.createElement(_A,{page:L})):X});Xm.displayName="Link";var RA=P.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:l,to:u,viewTransition:c,children:d,...p},g){let y=Tr(u,{relative:p.relative}),b=ls(),v=P.useContext(mo),{navigator:E,basename:S}=P.useContext(Pn),T=v!=null&&BA(y)&&c===!0,w=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,L=b.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(L=L.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&S&&(C=ei(C,S)||C);const N=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=L===w||!r&&L.startsWith(w)&&L.charAt(N)==="/",I=C!=null&&(C===w||!r&&C.startsWith(w)&&C.charAt(w.length)==="/"),H={isActive:M,isPending:I,isTransitioning:T},X=M?t:void 0,$;typeof s=="function"?$=s(H):$=[s,M?"active":null,I?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let Z=typeof l=="function"?l(H):l;return P.createElement(Xm,{...p,"aria-current":X,className:$,ref:g,style:Z,to:u,viewTransition:c},typeof d=="function"?d(H):d)});RA.displayName="NavLink";var MA=P.forwardRef(({discover:h="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:l,method:u=lo,action:c,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:y,...b},v)=>{let E=kA(),S=PA(c,{relative:p}),T=u.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&Vm.test(c),L=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let N=C.nativeEvent.submitter,M=N?.getAttribute("formmethod")||u;E(N||C.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:r,state:l,relative:p,preventScrollReset:g,viewTransition:y})};return P.createElement("form",{ref:v,method:T,action:S,onSubmit:s?d:L,...b,"data-discover":!w&&h==="render"?"true":void 0})});MA.displayName="Form";function DA(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ym(h){let t=P.useContext(ra);return Kt(t,DA(h)),t}function LA(h,{target:t,replace:n,state:s,preventScrollReset:r,relative:l,viewTransition:u}={}){let c=j0(),d=ls(),p=Tr(h,{relative:l});return P.useCallback(g=>{if(uA(g,t)){g.preventDefault();let y=n!==void 0?n:yr(d)===yr(p);c(h,{replace:y,state:s,preventScrollReset:r,relative:l,viewTransition:u})}},[d,c,p,n,s,t,h,r,l,u])}var OA=0,NA=()=>`__${String(++OA)}__`;function kA(){let{router:h}=Ym("useSubmit"),{basename:t}=P.useContext(Pn),n=J0();return P.useCallback(async(s,r={})=>{let{action:l,method:u,encType:c,formData:d,body:p}=dA(s,t);if(r.navigate===!1){let g=r.fetcherKey||NA();await h.fetch(g,n,r.action||l,{preventScrollReset:r.preventScrollReset,formData:d,body:p,formMethod:r.method||u,formEncType:r.encType||c,flushSync:r.flushSync})}else await h.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:d,body:p,formMethod:r.method||u,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[h,t,n])}function PA(h,{relative:t}={}){let{basename:n}=P.useContext(Pn),s=P.useContext(si);Kt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),l={...Tr(h||".",{relative:t})},u=ls();if(h==null){l.search=u.search;let c=new URLSearchParams(l.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(y=>y).forEach(y=>c.append("index",y));let g=c.toString();l.search=g?`?${g}`:""}}return(!h||h===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:ti([n,l.pathname])),yr(l)}function BA(h,t={}){let n=P.useContext(zm);Kt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ym("useViewTransitionState"),r=Tr(h,{relative:t.relative});if(!n.isTransitioning)return!1;let l=ei(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=ei(n.nextLocation.pathname,s)||n.nextLocation.pathname;return ho(r.pathname,u)!=null||ho(r.pathname,l)!=null}function Zl({children:h,href:t,onClick:n,className:s=""}){return tt.jsx("a",{href:t,onClick:n,className:`px-3 py-2 text-gray-700 hover:text-blue-600 transition-colors duration-200 font-medium ${s}`,children:h})}function zA({leftButtons:h=[],rightButtons:t=[]}){const[n,s]=P.useState(!1);return tt.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white shadow-md border-b border-gray-200",children:tt.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:[tt.jsxs("div",{className:"flex items-center justify-between h-16",children:[tt.jsx("div",{className:"hidden md:flex items-center space-x-8",children:h.map((r,l)=>tt.jsx(Zl,{...r},l))}),tt.jsx("div",{className:"hidden md:flex items-center space-x-8",children:t.map((r,l)=>tt.jsx(Zl,{...r},l))}),tt.jsx("button",{onClick:()=>s(!n),className:"md:hidden p-2 rounded-md text-gray-700 hover:text-blue-600 hover:bg-gray-100 transition-colors duration-200","aria-label":"Toggle menu",type:"button",children:n?tt.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):tt.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),n&&tt.jsx("div",{className:"md:hidden py-4 border-t border-gray-200",children:tt.jsxs("div",{className:"flex flex-col space-y-2",children:[h.map((r,l)=>tt.jsx(Zl,{...r,className:"block px-4 py-2 hover:bg-gray-100 rounded-md"},`left-${l}`)),h.length>0&&t.length>0&&tt.jsx("div",{className:"border-t border-gray-200 my-2"}),t.map((r,l)=>tt.jsx(Zl,{...r,className:"block px-4 py-2 hover:bg-gray-100 rounded-md"},`right-${l}`))]})})]})})}const ke=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),oh=[.001,0,0,.001,0,0],Qc=1.35,tn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Nn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},HA="pdfjs_internal_editor_",yt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},$m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},De={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},gr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},te={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ks={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},xr={ERRORS:0,WARNINGS:1,INFOS:5},br={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Jl={moveTo:0,lineTo:1,curveTo:2,closePath:3},Km={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let bo=xr.WARNINGS;function IA(h){Number.isInteger(h)&&(bo=h)}function FA(){return bo}function vo(h){bo>=xr.INFOS&&console.log(`Info: ${h}`)}function vt(h){bo>=xr.WARNINGS&&console.log(`Warning: ${h}`)}function It(h){throw new Error(h)}function ue(h,t){h||It(t)}function UA(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function wh(h,t=null,n=null){if(!h)return null;if(n&&typeof h=="string"&&(n.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),n.tryConvertEncoding))try{h=XA(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return UA(s)?s:null}function Th(h,t,n=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):n&&wh(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function xt(h,t,n,s=!1){return Object.defineProperty(h,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const os=function(){function t(n,s){this.message=n,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class Jg extends os{constructor(t,n){super(t,"PasswordException"),this.code=n}}class Zc extends os{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class fo extends os{constructor(t){super(t,"InvalidPDFException")}}class vr extends os{constructor(t,n,s){super(t,"ResponseException"),this.status=n,this.missing=s}}class jA extends os{constructor(t){super(t,"FormatError")}}class ni extends os{constructor(t){super(t,"AbortException")}}function Wm(h){(typeof h!="object"||h?.length===void 0)&&It("Invalid argument for bytesToString");const t=h.length,n=8192;if(t<n)return String.fromCharCode.apply(null,h);const s=[];for(let r=0;r<t;r+=n){const l=Math.min(r+n,t),u=h.subarray(r,l);s.push(String.fromCharCode.apply(null,u))}return s.join("")}function Cr(h){typeof h!="string"&&It("Invalid argument for stringToBytes");const t=h.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=h.charCodeAt(s)&255;return n}function GA(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function qA(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function VA(){try{return new Function(""),!0}catch{return!1}}class Ee{static get isLittleEndian(){return xt(this,"isLittleEndian",qA())}static get isEvalSupported(){return xt(this,"isEvalSupported",VA())}static get isOffscreenCanvasSupported(){return xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return xt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:n}=navigator;return xt(this,"platform",{isAndroid:n.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return xt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Jc=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class ot{static makeHexColor(t,n,s){return`#${Jc[t]}${Jc[n]}${Jc[s]}`}static scaleMinMax(t,n){let s;t[0]?(t[0]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[0],n[2]*=t[0],t[3]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[3],n[3]*=t[3]):(s=n[0],n[0]=n[1],n[1]=s,s=n[2],n[2]=n[3],n[3]=s,t[1]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[1],n[3]*=t[1],t[2]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[2],n[2]*=t[2]),n[0]+=t[4],n[1]+=t[5],n[2]+=t[4],n[3]+=t[5]}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static applyTransform(t,n,s=0){const r=t[s],l=t[s+1];t[s]=r*n[0]+l*n[2]+n[4],t[s+1]=r*n[1]+l*n[3]+n[5]}static applyTransformToBezier(t,n,s=0){const r=n[0],l=n[1],u=n[2],c=n[3],d=n[4],p=n[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*r+b*u+d,t[s+g+1]=y*l+b*c+p}}static applyInverseTransform(t,n){const s=t[0],r=t[1],l=n[0]*n[3]-n[1]*n[2];t[0]=(s*n[3]-r*n[2]+n[2]*n[5]-n[4]*n[3])/l,t[1]=(-s*n[1]+r*n[0]+n[4]*n[1]-n[5]*n[0])/l}static axialAlignedBoundingBox(t,n,s){const r=n[0],l=n[1],u=n[2],c=n[3],d=n[4],p=n[5],g=t[0],y=t[1],b=t[2],v=t[3];let E=r*g+d,S=E,T=r*b+d,w=T,L=c*y+p,C=L,N=c*v+p,M=N;if(l!==0||u!==0){const I=l*g,H=l*b,X=u*y,$=u*v;E+=X,w+=X,T+=$,S+=$,L+=I,M+=I,N+=H,C+=H}s[0]=Math.min(s[0],E,T,S,w),s[1]=Math.min(s[1],L,N,C,M),s[2]=Math.max(s[2],E,T,S,w),s[3]=Math.max(s[3],L,N,C,M)}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t,n){const s=t[0],r=t[1],l=t[2],u=t[3],c=s**2+r**2,d=s*l+r*u,p=l**2+u**2,g=(c+p)/2,y=Math.sqrt(g**2-(c*p-d**2));n[0]=Math.sqrt(g+y||1),n[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const s=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(s>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return l>u?null:[s,l,r,u]}static pointBoundingBox(t,n,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],n),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],n)}static rectBoundingBox(t,n,s,r,l){l[0]=Math.min(l[0],t,s),l[1]=Math.min(l[1],n,r),l[2]=Math.max(l[2],t,s),l[3]=Math.max(l[3],n,r)}static#t(t,n,s,r,l,u,c,d,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,v=b*p,E=y*(y*(y*t+3*p*n)+3*b*s)+v*r,S=y*(y*(y*l+3*p*u)+3*b*c)+v*d;g[0]=Math.min(g[0],E),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],E),g[3]=Math.max(g[3],S)}static#e(t,n,s,r,l,u,c,d,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,n,s,r,l,u,c,d,-y/g,b);return}const v=g**2-4*y*p;if(v<0)return;const E=Math.sqrt(v),S=2*p;this.#t(t,n,s,r,l,u,c,d,(-g+E)/S,b),this.#t(t,n,s,r,l,u,c,d,(-g-E)/S,b)}static bezierBoundingBox(t,n,s,r,l,u,c,d,p){p[0]=Math.min(p[0],t,c),p[1]=Math.min(p[1],n,d),p[2]=Math.max(p[2],t,c),p[3]=Math.max(p[3],n,d),this.#e(t,s,l,c,n,r,u,d,3*(-t+3*(s-l)+c),6*(t-2*s+l),3*(s-t),p),this.#e(t,s,l,c,n,r,u,d,3*(-n+3*(r-u)+d),6*(n-2*r+u),3*(r-n),p)}}function XA(h){return decodeURIComponent(escape(h))}let th=null,tm=null;function Qm(h){return th||(th=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,tm=new Map([["ﬅ","ſt"]])),h.replaceAll(th,(t,n,s)=>n?n.normalize("NFKC"):tm.get(s))}function xh(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),Wm(h)}const Ch="pdfjs_internal_id_";function YA(h,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,r,...l]=n;if(!h(s)&&!Number.isInteger(s)||!t(r))return!1;const u=l.length;let c=!0;switch(r.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;c=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function Le(h,t,n){return Math.min(Math.max(h,t),n)}function Zm(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(Wm(h))}function $A(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Cr(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(n=>{n(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,n)=>t+n,0)});const Zn="http://www.w3.org/2000/svg";class ss{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function la(h,t="text"){if(dr(h,document.baseURI)){const n=await fetch(h);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const r=new XMLHttpRequest;r.open("GET",h,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Rr{constructor({viewBox:t,userUnit:n,scale:s,rotation:r,offsetX:l=0,offsetY:u=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=n,this.scale=s,this.rotation=r,this.offsetX=l,this.offsetY=u,s*=n;const d=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,v;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,v=1;break;case 90:g=0,y=1,b=1,v=0;break;case 270:g=0,y=-1,b=-1,v=0;break;case 0:g=1,y=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(b=-b,v=-v);let E,S,T,w;g===0?(E=Math.abs(p-t[1])*s+l,S=Math.abs(d-t[0])*s+u,T=(t[3]-t[1])*s,w=(t[2]-t[0])*s):(E=Math.abs(d-t[0])*s+l,S=Math.abs(p-t[1])*s+u,T=(t[2]-t[0])*s,w=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,v*s,E-g*s*d-b*s*p,S-y*s*d-v*s*p],this.width=T,this.height=w}get rawDims(){const t=this.viewBox;return xt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Rr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:r,dontFlip:l})}convertToViewportPoint(t,n){const s=[t,n];return ot.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const n=[t[0],t[1]];ot.applyTransform(n,this.transform);const s=[t[2],t[3]];return ot.applyTransform(s,this.transform),[n[0],n[1],s[0],s[1]]}convertToPdfPoint(t,n){const s=[t,n];return ot.applyInverseTransform(s,this.transform),s}}class Ao extends os{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function Mr(h){const t=h.length;let n=0;for(;n<t&&h[n].trim()==="";)n++;return h.substring(n,n+5).toLowerCase()==="data:"}function So(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function Jm(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function ty(h,t="document.pdf"){if(typeof h!="string")return t;if(Mr(h))return vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=n.exec(h);let l=s.exec(r[1])||s.exec(r[2])||s.exec(r[3]);if(l&&(l=l[0],l.includes("%")))try{l=s.exec(decodeURIComponent(l))[0]}catch{}return l||t}class em{started=Object.create(null);times=[];time(t){t in this.started&&vt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||vt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:r,end:l}of this.times)t.push(`${s.padEnd(n)} ${l-r}ms
`);return t.join("")}}function dr(h,t){const n=t?URL.parse(h,t):URL.parse(h);return n?.protocol==="http:"||n?.protocol==="https:"}function gn(h){h.preventDefault()}function ne(h){h.preventDefault(),h.stopPropagation()}function KA(h){console.log("Deprecated API usage: "+h)}class Rh{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(t);if(!n)return null;const s=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(n[3],10);l=l>=1&&l<=31?l:1;let u=parseInt(n[4],10);u=u>=0&&u<=23?u:0;let c=parseInt(n[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(n[6],10);d=d>=0&&d<=59?d:0;const p=n[7]||"Z";let g=parseInt(n[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(n[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(u+=g,c+=y):p==="+"&&(u-=g,c-=y),new Date(Date.UTC(s,r,l,u,c,d))}}function ey(h,{scale:t=1,rotation:n=0}){const{width:s,height:r}=h.attributes.style,l=[0,0,parseInt(s),parseInt(r)];return new Rr({viewBox:l,userUnit:1,scale:t,rotation:n})}function Mh(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(vt(`Not a valid color format: "${h}"`),[0,0,0])}function WA(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of h.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;h.set(n,Mh(s))}t.remove()}function $t(h){const{a:t,b:n,c:s,d:r,e:l,f:u}=h.getTransform();return[t,n,s,r,l,u]}function Rn(h){const{a:t,b:n,c:s,d:r,e:l,f:u}=h.getTransform().invertSelf();return[t,n,s,r,l,u]}function Oi(h,t,n=!1,s=!0){if(t instanceof Rr){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:u}=h,c=Ee.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${l}px`,g=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=c?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!n||t.rotation%180===0?(u.width=g,u.height=y):(u.width=y,u.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class An{constructor(){const{pixelRatio:t}=An;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,n,s,r,l=-1){let u=1/0,c=1/0,d=1/0;s=An.capPixels(s,l),s>0&&(u=Math.sqrt(s/(t*n))),r!==-1&&(c=r/t,d=r/n);const p=Math.min(u,c,d);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,n){if(n>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return t>0?Math.min(t,s):s}return t}}const po=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class mr{#t=null;#e=null;#n;#i=null;#a=null;#s=null;static#o=null;constructor(t){this.#n=t,mr.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=this.#n._uiManager._signal;t.addEventListener("contextmenu",gn,{signal:n}),t.addEventListener("pointerdown",mr.#l,{signal:n});const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:l}=t,u=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*u}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#c(),t}get div(){return this.#t}static#l(t){t.stopPropagation()}#h(t){this.#n._focusEventsAllowed=!1,ne(t)}#u(t){this.#n._focusEventsAllowed=!0,ne(t)}#d(t){const n=this.#n._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",gn,{signal:n})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#c(){const{editorType:t,_uiManager:n}=this.#n,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",mr.#o[t]),this.#d(s),s.addEventListener("click",r=>{n.delete()},{signal:n._signal}),this.#i.append(s)}get#f(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const n=await t.render();this.#d(n),this.#i.prepend(n,this.#f),this.#a=t}addColorPicker(t){this.#e=t;const n=t.renderButton();this.#d(n),this.#i.prepend(n,this.#f)}async addEditSignatureButton(t){const n=this.#s=await t.renderEditButton(this.#n);this.#d(n),this.#i.prepend(n,this.#f)}updateEditSignatureButton(t){this.#s&&(this.#s.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class QA{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",gn,{signal:this.#n._signal});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#s(),t}#a(t,n){let s=0,r=0;for(const l of t){const u=l.y+l.height;if(u<s)continue;const c=l.x+(n?l.width:0);if(u>s){r=c,s=u;continue}n?c>r&&(r=c):c<r&&(r=c)}return[n?1-r:r,s]}show(t,n,s){const[r,l]=this.#a(n,s),{style:u}=this.#e||=this.#i();t.append(this.#e),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");t.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#n._signal;t.addEventListener("contextmenu",gn,{signal:s}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:s}),this.#t.append(t)}}function ny(h,t,n){for(const s of n)t.addEventListener(s,h[s].bind(h))}class ZA{#t=0;get id(){return`${HA}${this.#t++}`}}class Dh{#t=xh();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return xt(this,"_isSVGFittingCanvas",l)}async#i(t,n){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof n=="string"?(s.url=n,r=await la(n,"blob")):n instanceof File?r=s.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const l=Dh._isSVGFittingCanvas,u=new FileReader,c=new Image,d=new Promise((p,g)=>{c.onload=()=>{s.bitmap=c,s.isSvg=!0,p()},u.onload=async()=>{const y=s.svgUrl=u.result;c.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},c.onerror=u.onerror=g});u.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){vt(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:n,name:s,size:r,type:l}=t;return this.#i(`${n}_${s}_${r}_${l}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,n){const s=await n;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const n=this.#n.get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:s}=n;return delete n.blobPromise,this.getFromBlob(n.id,s)}return this.getFromUrl(n.url)}getFromCanvas(t,n){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const n=this.#n.get(t);return n?.isSvg?n.svgUrl:null}deleteId(t){this.#n||=new Map;const n=this.#n.get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:s}=n;if(!n.url&&!n.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=r.convertToBlob()}s.close?.(),n.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class JA{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:n,post:s,mustExec:r,type:l=NaN,overwriteIfSameType:u=!1,keepUndo:c=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:n,post:s,type:l};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(u&&this.#t[this.#i].type===l){c&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const p=this.#i+1;p===this.#n?this.#t.splice(0,1):(this.#i=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:n}=this.#t[this.#i];t(),n?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:n}=this.#t[this.#i];t(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let n=this.#i;n>=0;n--)if(this.#t[n].type!==t){this.#t.splice(n+1,this.#i-n),this.#i=n;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Dr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=Ee.platform;for(const[s,r,l={}]of t)for(const u of s){const c=u.startsWith("mac+");n&&c?(this.callbacks.set(u.slice(4),{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1))):!n&&!c&&(this.callbacks.set(u,{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(t,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(this.#t(n));if(!s)return;const{callback:r,options:{bubbles:l=!1,args:u=[],checker:c=null}}=s;c&&!c(t,n)||(r.bind(t,...u,n)(),l||ne(n))}}class Lh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return WA(t),xt(this,"_colors",t)}convert(t){const n=Mh(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,r]of this._colors)if(r.every((l,u)=>l===n[u]))return Lh._colorsMapping.get(s);return n}getHexCode(t){const n=this._colors.get(t);return n?ot.makeHexColor(...n):t}}class ii{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#a=null;#s=null;#o=null;#l=new JA;#h=null;#u=null;#d=0;#c=new Set;#f=null;#r=null;#p=new Set;_editorUndoBar=null;#m=!1;#g=!1;#y=!1;#b=null;#v=null;#S=null;#_=null;#T=!1;#C=null;#M=new ZA;#E=!1;#R=!1;#x=null;#L=null;#O=null;#N=null;#F=null;#w=yt.NONE;#A=new Set;#z=null;#H=null;#G=null;#q=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#k=null;#P=null;#j=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ii.prototype,n=u=>u.#P.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),s=(u,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return xt(this,"_keyboardManager",new Dr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&u.#P.contains(c)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&u.#P.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:n}]]))}constructor(t,n,s,r,l,u,c,d,p,g,y,b,v,E){const S=this._signal=this.#t.signal;this.#P=t,this.#j=n,this.#a=s,this.#H=r,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:S}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),l._on("setpreference",this.onSetPreference.bind(this),{signal:S}),l._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:S}),this.#it(),this.#lt(),this.#W(),this.#s=u.annotationStorage,this.#b=u.filterFactory,this.#G=c,this.#_=d||null,this.#m=p,this.#g=g,this.#y=y,this.#F=b||null,this.viewParameters={realScale:ss.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=E!==!1}destroy(){this.#B?.resolve(),this.#B=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#N?.clear(),this.#e=null,this.#A.clear(),this.#l.destroy(),this.#a?.destroy(),this.#H?.destroy(),this.#C?.hide(),this.#C=null,this.#O?.destroy(),this.#O=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#k&&(clearTimeout(this.#k),this.#k=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#F}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return xt(this,"hcmFilter",this.#G?this.#b.addHCMFilter(this.#G.foreground,this.#G.background):"none")}get direction(){return xt(this,"direction",getComputedStyle(this.#P).direction)}get highlightColors(){return xt(this,"highlightColors",this.#_?new Map(this.#_.split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=t}setMainHighlightColorPicker(t){this.#O=t}editAltText(t,n=!1){this.#a?.editAltText(this,t,n)}getSignature(t){this.#H?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#H}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=n;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#P.focus()}findParent(t,n){for(const s of this.#i.values()){const{x:r,y:l,width:u,height:c}=s.div.getBoundingClientRect();if(t>=r&&t<=r+u&&n>=l&&n<=l+c)return s}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ss.PDF_TO_CSS_UNITS;for(const n of this.#p)n.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Y({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#K(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const s of this.#i.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:u}=n,c=n.toString(),p=this.#Y(n).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;n.empty();const y=this.#K(p),b=this.#w===yt.NONE,v=()=>{y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:u,text:c}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(yt.HIGHLIGHT,v);return}v()}#et(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Y(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#C||=new QA(this),this.#C.show(s,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#nt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#z&&(this.#C?.hide(),this.#z=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===this.#z)return;const r=this.#Y(t).closest(".textLayer");if(!r){this.#z&&(this.#C?.hide(),this.#z=null,this.#D({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#z=n,this.#D({hasSelectedText:!0}),!(this.#w!==yt.HIGHLIGHT&&this.#w!==yt.NONE)&&(this.#w===yt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#T=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#w===yt.HIGHLIGHT?this.#K(r):null;l?.toggleDrawing();const u=new AbortController,c=this.combinedSignal(u),d=p=>{p.type==="pointerup"&&p.button!==0||(u.abort(),l?.toggleDrawing(!0),p.type==="pointerup"&&this.#$("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}}#$(t=""){this.#w===yt.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#et()}#it(){document.addEventListener("selectionchange",this.#nt.bind(this),{signal:this._signal})}#st(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#at(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of this.#A)if(n.div.contains(t)){this.#L=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,n]=this.#L;this.#L=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#W(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#rt(){this.#x?.abort(),this.#x=null}#Q(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Z(){this.#h?.abort(),this.#h=null}#lt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#W(),this.#Q()}removeEditListeners(){this.#rt(),this.#Z()}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const s of this.#r)if(s.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const s of this.#r)if(s.isHandlingMimeForPasting(n.type)){s.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of this.#A){const r=s.serialize(!0);r&&n.push(r)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const l of n.items)for(const u of this.#r)if(u.isHandlingMimeForPasting(l.type)){u.paste(l,this.currentLayer);return}let s=n.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){vt(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const d of s){const p=await r.deserialize(d);if(!p)return;l.push(p)}const u=()=>{for(const d of l)this.#J(d);this.#tt(l)},c=()=>{for(const d of l)d.remove()};this.addCommands({cmd:u,undo:c,mustExec:!0})}catch(l){vt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==yt.NONE&&!this.isEditorHandlingKeyboard&&ii._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#T&&(this.#T=!1,this.#$("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([s,r])=>this.#V[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#w===yt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#I([[Ct.HIGHLIGHT_FREE,!0]]))}#I(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#st(),this.#Q(),this.#D({isEditing:this.#w!==yt.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#at(),this.#Z(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#r){this.#r=t;for(const n of this.#r)this.#I(n.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,n=null,s=!1){if(this.#w!==t&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#w=t,t===yt.NONE){this.setEditingState(!1),this.#ut(),this._editorUndoBar?.hide(),this.#B.resolve();return}t===yt.SIGNATURE&&await this.#H?.loadSignatures(),this.setEditingState(!0),await this.#ot(),this.unselectAll();for(const r of this.#i.values())r.updateMode(t);if(!n){s&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const r of this.#n.values())r.annotationElementId===n||r.id===n?(this.setSelected(r),r.enterInEditMode()):r.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,n){if(this.#r){switch(t){case Ct.CREATE:this.currentLayer.addNewEditor(n);return;case Ct.HIGHLIGHT_DEFAULT_COLOR:this.#O?.updateColor(n);break;case Ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,n),this.showAllEditors("highlight",n);break}for(const s of this.#A)s.updateParams(t,n);for(const s of this.#r)s.updateDefaultParams(t,n)}}showAllEditors(t,n,s=!1){for(const l of this.#n.values())l.editorType===t&&l.show(n);(this.#q?.get(Ct.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#I([[Ct.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#R!==t){this.#R=t;for(const n of this.#i.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}async#ot(){if(!this.#E){this.#E=!0;const t=[];for(const n of this.#i.values())t.push(n.enable());await Promise.all(t);for(const n of this.#n.values())n.enable()}}#ut(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const n=[];for(const s of this.#n.values())s.pageIndex===t&&n.push(s);return n}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#N?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#c.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#c.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#c.has(t)}removeDeletedAnnotationElement(t){this.#c.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#J(t){const n=this.#i.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#I(t.propertiesToUpdate))}get#ct(){let t=null;for(t of this.#A);return t}updateUI(t){this.#ct===t&&this.#I(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#I(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#A.has(t)){this.#A.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#A.add(t),t.select(),this.#I(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.#u?.commitOrRemove();for(const n of this.#A)n!==t&&n.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#I(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#D({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#l.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#l.cleanType(t)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...this.#A],s=()=>{this._editorUndoBar?.show(r,n.length===1?n[0].editorType:n.length);for(const l of n)l.remove()},r=()=>{for(const l of n)this.#J(l)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#tt(t){for(const n of this.#A)n.unselect();this.#A.clear();for(const n of t)n.isEmpty()||(this.#A.add(n),n.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#tt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#w!==yt.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=n;const[r,l]=this.#U,u=[...this.#A],c=1e3;this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.#k=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const d of u)this.#n.has(d.id)&&(d.translateInPage(r,l),d.translationDone())},undo:()=>{for(const d of u)this.#n.has(d.id)&&(d.translateInPage(-r,-l),d.translationDone())},mustExec:!1})},c);for(const d of u)d.translateInPage(t,n),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#A)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let n=!1;for(const[{x:r,y:l,pageIndex:u},c]of t)c.newX=r,c.newY=l,c.newPageIndex=u,n||=r!==c.savedX||l!==c.savedY||u!==c.savedPageIndex;if(!n)return!1;const s=(r,l,u,c)=>{if(this.#n.has(r.id)){const d=this.#i.get(c);d?r._setParentAndPosition(d,l,u):(r.pageIndex=c,r.x=l,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:u,newPageIndex:c}]of t)s(r,l,u,c)},undo:()=>{for(const[r,{savedX:l,savedY:u,savedPageIndex:c}]of t)s(r,l,u,c)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#f)for(const s of this.#f.keys())s.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#w}get imageManager(){return xt(this,"imageManager",new Dh)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let p=0,g=n.rangeCount;p<g;p++)if(!t.contains(n.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:r,width:l,height:u}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(p,g,y,b)=>({x:(g-r)/u,y:1-(p+y-s)/l,width:b/u,height:y/l});break;case"180":c=(p,g,y,b)=>({x:1-(p+y-s)/l,y:1-(g+b-r)/u,width:y/l,height:b/u});break;case"270":c=(p,g,y,b)=>({x:1-(g+b-r)/u,y:(p-s)/l,width:b/u,height:y/l});break;default:c=(p,g,y,b)=>({x:(p-s)/l,y:(g-r)/u,width:y/l,height:b/u});break}const d=[];for(let p=0,g=n.rangeCount;p<g;p++){const y=n.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:v,width:E,height:S}of y.getClientRects())E===0||S===0||d.push(c(b,v,E,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#o||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const n=this.#o?.get(t.data.id);if(!n)return;const s=this.#s.getRawValue(n);s&&(this.#w===yt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,n,s){const r=this.#N?.get(t);r&&(r.setCanvas(n,s),this.#N.delete(t))}addMissingCanvas(t,n){(this.#N||=new Map).set(t,n)}}class Ln{#t=null;#e=!1;#n=null;#i=null;#a=null;#s=null;#o=!1;#l=null;#h=null;#u=null;#d=null;#c=!1;static#f=null;static _l10n=null;constructor(t){this.#h=t,this.#c=t._uiManager.useNewAltTextFlow,Ln.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ln._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const n=this.#i=document.createElement("span");t.append(n),this.#c?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ln.#f.missing),n.setAttribute("data-l10n-id",Ln.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#h._uiManager._signal;t.addEventListener("contextmenu",gn,{signal:s}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#c&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#r}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#o=!0,r(l))},{signal:s}),await this.#p(),t}get#r(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#c?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#c?this.#t!==null||!!this.#u:this.isEmpty()}get guessedText(){return this.#u}async setGuessedText(t){this.#t===null&&(this.#u=t,this.#d=await Ln._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#c||this.#t){this.#l?.remove(),this.#l=null;return}if(!this.#l){const n=this.#l=document.createElement("div");n.className="noAltTextBadge",this.#h.div.append(n)}this.#l.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#u===n&&(n=this.#d),{altText:n,decorative:this.#e,guessedText:this.#u,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:s,textWithDisclaimer:r,cancel:l=!1}){s&&(this.#u=s,this.#d=r),!(this.#t===t&&this.#e===n)&&(l||(this.#t=t,this.#e=n),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#r}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#l?.remove(),this.#l=null}async#p(){const t=this.#n;if(!t)return;if(this.#c){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ln.#f[this.#r]),this.#i?.setAttribute("data-l10n-id",Ln.#f[`${this.#r}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#h.id}`;const r=100,l=this.#h._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:l})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#h.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class Lr{#t;#e=!1;#n=null;#i;#a;#s;#o;#l=null;#h;#u=null;#d;#c=null;constructor({container:t,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:u=null,signal:c}){this.#t=t,this.#n=s,this.#i=n,this.#a=r,this.#s=l,this.#o=u,this.#d=new AbortController,this.#h=AbortSignal.any([c,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#h})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/An.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#l)return;const r=this.#l=new AbortController,l=AbortSignal.any([this.#h,r.signal]),u=this.#t,c={capture:!0,signal:l,passive:!1},d=p=>{p.pointerType==="touch"&&(this.#l?.abort(),this.#l=null)};u.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(ne(p),d(p))},c),u.addEventListener("pointerup",d,c),u.addEventListener("pointercancel",d,c);return}if(!this.#c){this.#c=new AbortController;const r=AbortSignal.any([this.#h,this.#c.signal]),l=this.#t,u={signal:r,capture:!1,passive:!1};l.addEventListener("touchmove",this.#r.bind(this),u);const c=this.#p.bind(this);l.addEventListener("touchend",c,u),l.addEventListener("touchcancel",c,u),u.capture=!0,l.addEventListener("pointerdown",ne,u),l.addEventListener("pointermove",ne,u),l.addEventListener("pointercancel",ne,u),l.addEventListener("pointerup",ne,u),this.#a?.()}if(ne(t),t.touches.length!==2||this.#n?.()){this.#u=null;return}let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]),this.#u={touch0X:n.screenX,touch0Y:n.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#r(t){if(!this.#u||t.touches.length!==2)return;ne(t);let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:r,screenY:l}=n,{screenX:u,screenY:c}=s,d=this.#u,{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=d,v=y-p,E=b-g,S=u-r,T=c-l,w=Math.hypot(S,T)||1,L=Math.hypot(v,E)||1;if(!this.#e&&Math.abs(L-w)<=Lr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=l,d.touch1X=u,d.touch1Y=c,!this.#e){this.#e=!0;return}const C=[(r+u)/2,(l+c)/2];this.#s?.(C,L,w)}#p(t){t.touches.length>=2||(this.#c&&(this.#c.abort(),this.#c=null,this.#o?.()),this.#u&&(ne(t),this.#u=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#l?.abort(),this.#l=null}}class ct{#t=null;#e=null;#n=null;#i=!1;#a=null;#s="";#o=!1;#l=null;#h=null;#u=null;#d=null;#c="";#f=!1;#r=null;#p=!1;#m=!1;#g=!1;#y=null;#b=0;#v=0;#S=null;#_=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#T=!1;#C=ct._zIndex++;static _borderLineWidth=-1;static _colorManager=new Lh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ct.prototype._resizeWithKeyboard,n=ii.TRANSLATE_SMALL,s=ii.TRANSLATE_BIG;return xt(this,"_resizerKeyboardManager",new Dr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ct.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:u}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[l,u];const[c,d]=this.parentDimensions;this.x=t.x/c,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new tS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(ct._l10n??=t,ct._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ct._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ct._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){It("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#T}set _isDraggable(t){this.#T=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#j(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,s,r){const[l,u]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/l,this.y=(n+r)/u,this.fixAndSetPosition()}_moveAfterPaste(t,n){const[s,r]=this.parentDimensions;this.setAt(t*s,n*r,this.width*s,this.height*r),this._onTranslated()}#M([t,n],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,n){this.#M(this.parentDimensions,t,n)}translateInPage(t,n){this.#r||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,n){this.#r||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=n/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:c}=this;const[d,p]=this.getBaseTranslation();u+=d,c+=p;const{style:g}=s;g.left=`${(100*u).toFixed(2)}%`,g.top=`${(100*c).toFixed(2)}%`,this._onTranslating(u,c),s.scrollIntoView({block:"nearest"})}_onTranslating(t,n){}_onTranslated(t,n){}get _hasBeenMoved(){return!!this.#r&&(this.#r[0]!==this.x||this.#r[1]!==this.y)}get _hasBeenResized(){return!!this.#r&&(this.#r[2]!==this.width||this.#r[3]!==this.height)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:s}=ct,r=s/t,l=s/n;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:n},pageDimensions:[s,r]}=this;let{x:l,y:u,width:c,height:d}=this;if(c*=s,d*=r,l*=s,u*=r,this._mustFixPosition)switch(t){case 0:l=Le(l,0,s-c),u=Le(u,0,r-d);break;case 90:l=Le(l,0,s-d),u=Le(u,c,r);break;case 180:l=Le(l,c,s),u=Le(u,d,r);break;case 270:l=Le(l,d,s),u=Le(u,0,r-c);break}this.x=l/=s,this.y=u/=r;const[p,g]=this.getBaseTranslation();l+=p,u+=g,n.left=`${(100*l).toFixed(2)}%`,n.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}static#E(t,n,s){switch(s){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}screenToPageTranslation(t,n){return ct.#E(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return ct.#E(t,n,360-this.parentRotation)}#R(t){switch(t){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,s]}=this;return[n*t,s*t]}setDims(t,n){const[s,r]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/s).toFixed(2)}%`,this.#o||(l.height=`${(100*n/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:n,width:s}=t,r=s.endsWith("%"),l=!this.#o&&n.endsWith("%");if(r&&l)return;const[u,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(s)/u).toFixed(2)}%`),!this.#o&&!l&&(t.height=`${(100*parseFloat(n)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#x(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#l.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#L.bind(this,s),{signal:n}),r.addEventListener("contextmenu",gn,{signal:n}),r.tabIndex=-1}this.div.prepend(this.#l)}#L(t,n){n.preventDefault();const{isMac:s}=Ee.platform;if(n.button!==0||n.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#h=[n.screenX,n.screenY];const l=new AbortController,u=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#F.bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",ne,{passive:!1,signal:u}),window.addEventListener("contextmenu",gn,{signal:u}),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const p=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#N()};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})}#O(t,n,s,r){this.width=s,this.height=r,this.x=t,this.y=n;const[l,u]=this.parentDimensions;this.setDims(l*s,u*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#N(){if(!this.#u)return;const{savedX:t,savedY:n,savedWidth:s,savedHeight:r}=this.#u;this.#u=null;const l=this.x,u=this.y,c=this.width,d=this.height;l===t&&u===n&&c===s&&d===r||this.addCommands({cmd:this.#O.bind(this,l,u,c,d),undo:this.#O.bind(this,t,n,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#F(t,n){const[s,r]=this.parentDimensions,l=this.x,u=this.y,c=this.width,d=this.height,p=ct.MIN_SIZE/s,g=ct.MIN_SIZE/r,y=this.#R(this.rotation),b=(O,U)=>[y[0]*O+y[2]*U,y[1]*O+y[3]*U],v=this.#R(360-this.rotation),E=(O,U)=>[v[0]*O+v[2]*U,v[1]*O+v[3]*U];let S,T,w=!1,L=!1;switch(t){case"topLeft":w=!0,S=(O,U)=>[0,0],T=(O,U)=>[O,U];break;case"topMiddle":S=(O,U)=>[O/2,0],T=(O,U)=>[O/2,U];break;case"topRight":w=!0,S=(O,U)=>[O,0],T=(O,U)=>[0,U];break;case"middleRight":L=!0,S=(O,U)=>[O,U/2],T=(O,U)=>[0,U/2];break;case"bottomRight":w=!0,S=(O,U)=>[O,U],T=(O,U)=>[0,0];break;case"bottomMiddle":S=(O,U)=>[O/2,U],T=(O,U)=>[O/2,0];break;case"bottomLeft":w=!0,S=(O,U)=>[0,U],T=(O,U)=>[O,0];break;case"middleLeft":L=!0,S=(O,U)=>[0,U/2],T=(O,U)=>[O,U/2];break}const C=S(c,d),N=T(c,d);let M=b(...N);const I=ct._round(l+M[0]),H=ct._round(u+M[1]);let X=1,$=1,Z,Q;if(n.fromKeyboard)({deltaX:Z,deltaY:Q}=n);else{const{screenX:O,screenY:U}=n,[J,mt]=this.#h;[Z,Q]=this.screenToPageTranslation(O-J,U-mt),this.#h[0]=O,this.#h[1]=U}if([Z,Q]=E(Z/s,Q/r),w){const O=Math.hypot(c,d);X=$=Math.max(Math.min(Math.hypot(N[0]-C[0]-Z,N[1]-C[1]-Q)/O,1/c,1/d),p/c,g/d)}else L?X=Le(Math.abs(N[0]-C[0]-Z),p,1)/c:$=Le(Math.abs(N[1]-C[1]-Q),g,1)/d;const at=ct._round(c*X),bt=ct._round(d*$);M=b(...T(at,bt));const ut=I-M[0],lt=H-M[1];this.#r||=[this.x,this.y,this.width,this.height],this.width=at,this.height=bt,this.x=ut,this.y=lt,this.setDims(s*at,r*bt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new mr(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const n=this._editToolbar?.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(Ln.initialize(ct._l10n),this.#n=new Ln(this),this.#t&&(this.#n.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#q();const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/n).toFixed(2)}%`,t.style.maxHeight=`${(100*n/s).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),ny(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#_||=new Lr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#w.bind(this),onPinching:this.#A.bind(this),onPinchEnd:this.#z.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#w(){this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#A(t,n,s){let l=.7*(s/n)+1-.7;if(l===1)return;const u=this.#R(this.rotation),c=(I,H)=>[u[0]*I+u[2]*H,u[1]*I+u[3]*H],[d,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,v=this.height,E=ct.MIN_SIZE/d,S=ct.MIN_SIZE/p;l=Math.max(Math.min(l,1/b,1/v),E/b,S/v);const T=ct._round(b*l),w=ct._round(v*l);if(T===b&&w===v)return;this.#r||=[g,y,b,v];const L=c(b/2,v/2),C=ct._round(g+L[0]),N=ct._round(y+L[1]),M=c(T/2,w/2);this.x=C-M[0],this.y=N-M[1],this.width=T,this.height=w,this.setDims(d*T,p*w),this.fixAndSetPosition(),this._onResizing()}#z(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#N()}pointerdown(t){const{isMac:n}=Ee.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#G(t);return}this.#H(t)}#H(t){const{isMac:n}=Ee.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#G(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:l},c=p=>{r.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#H(p),s&&this._onStopDragging()};n&&(this.#b=t.clientX,this.#v=t.clientY,this.#a=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==this.#a){ne(p);return}const[v,E]=this.screenToPageTranslation(g-this.#b,y-this.#v);this.#b=g,this.#v=y,this._uiManager.dragSelectedEditors(v,E)},u),window.addEventListener("touchmove",ne,u),window.addEventListener("pointerdown",p=>{p.pointerType===this.#s&&(this.#_||p.isPrimary)&&c(p),ne(p)},u));const d=p=>{if(!this.#a||this.#a===p.pointerId){c(p);return}ne(p)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,n,s){t.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,n,s=this.rotation){const r=this.parentScale,[l,u]=this.pageDimensions,[c,d]=this.pageTranslation,p=t/r,g=n/r,y=this.x*l,b=this.y*u,v=this.width*l,E=this.height*u;switch(s){case 0:return[y+p+c,u-b-g-E+d,y+p+v+c,u-b-g+d];case 90:return[y+g+c,u-b+p+d,y+g+E+c,u-b+p+v+d];case 180:return[y-p-v+c,u-b+g+d,y-p+c,u-b+g+E+d];case 270:return[y-g-E+c,u-b-p-v+d,y-g+c,u-b-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[s,r,l,u]=t,c=l-s,d=u-r;switch(this.rotation){case 0:return[s,n-u,c,d];case 90:return[s,n-r,d,c];case 180:return[l,n-r,c,d];case 270:return[l,n-u,d,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:n,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:u}=window;return n<u&&r>0&&t<l&&s>0}#q(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#q()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,n=null){It("An editor must be serializable")}static async deserialize(t,n,s){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[l,u]=r.pageDimensions,[c,d,p,g]=r.getRectInCurrentCoords(t.rect,u);return r.x=c/l,r.y=d/u,r.width=p/l,r.height=g/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#j(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#_?.destroy(),this.#_=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#x(),this.#l.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#l.children;if(!this.#e){this.#e=Array.from(n);const u=this.#V.bind(this),c=this.#U.bind(this),d=this._uiManager._signal;for(const p of this.#e){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:d}),p.addEventListener("blur",c,{signal:d}),p.addEventListener("focus",this.#k.bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",ct._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const u of n){if(u===s)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==r){if(l<r)for(let c=0;c<r-l;c++)this.#l.append(this.#l.firstChild);else if(l>r)for(let c=0;c<l-r;c++)this.#l.firstChild.before(this.#l.lastChild);let u=0;for(const c of n){const p=this.#e[u++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",ct._l10nResizer[p])}}this.#P(0),this.#g=!0,this.#l.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){ct._resizerKeyboardManager.exec(this,t)}#U(t){this.#g&&t.relatedTarget?.parentNode!==this.#l&&this.#j()}#k(t){this.#c=this.#g?t:""}#P(t){if(this.#e)for(const n of this.#e)n.tabIndex=t}_resizeWithKeyboard(t,n){this.#g&&this.#F(this.#c,{deltaX:t,deltaY:n,fromKeyboard:!0})}#j(){this.#g=!1,this.#P(-1),this.#N()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,n){this.#o=!0;const s=t/n,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},ct._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class tS extends ct{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const nm=3285377520,fn=4294901760,Mn=65535;class iy{constructor(t){this.h1=t?t&4294967295:nm,this.h2=t?t&4294967295:nm}update(t){let n,s;if(typeof t=="string"){n=new Uint8Array(t.length*2),s=0;for(let S=0,T=t.length;S<T;S++){const w=t.charCodeAt(S);w<=255?n[s++]=w:(n[s++]=w>>>8,n[s++]=w&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),s=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,l=s-r*4,u=new Uint32Array(n.buffer,0,r);let c=0,d=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,v=y&Mn,E=b&Mn;for(let S=0;S<r;S++)S&1?(c=u[S],c=c*y&fn|c*v&Mn,c=c<<15|c>>>17,c=c*b&fn|c*E&Mn,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(d=u[S],d=d*y&fn|d*v&Mn,d=d<<15|d>>>17,d=d*b&fn|d*E&Mn,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(c=0,l){case 3:c^=n[r*4+2]<<16;case 2:c^=n[r*4+1]<<8;case 1:c^=n[r*4],c=c*y&fn|c*v&Mn,c=c<<15|c>>>17,c=c*b&fn|c*E&Mn,r&1?p^=c:g^=c}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&fn|t*36045&Mn,n=n*4283543511&fn|((n<<16|t>>>16)*2950163797&fn)>>>16,t^=n>>>1,t=t*444984403&fn|t*60499&Mn,n=n*3301882366&fn|((n<<16|t>>>16)*3120437893&fn)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const uh=Object.freeze({map:null,hash:"",transfer:void 0});class Oh{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const s=this.#n.get(t);return s===void 0?n:Object.assign(n,s)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of this.#n.values())if(n instanceof ct)return;this.onAnnotationEditor(null)}}setValue(t,n){const s=this.#n.get(t);let r=!1;if(s!==void 0)for(const[l,u]of Object.entries(n))s[l]!==u&&(r=!0,s[l]=u);else r=!0,this.#n.set(t,n);r&&this.#i(),n instanceof ct&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sy(this)}get serializable(){if(this.#n.size===0)return uh;const t=new Map,n=new iy,s=[],r=Object.create(null);let l=!1;for(const[u,c]of this.#n){const d=c instanceof ct?c.serialize(!1,r):c;d&&(t.set(u,d),n.update(`${u}:${JSON.stringify(d)}`),l||=!!d.bitmap)}if(l)for(const u of t.values())u.bitmap&&s.push(u.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:s}:uh}get editorStats(){let t=null;const n=new Map;for(const s of this.#n.values()){if(!(s instanceof ct))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:l}=r;n.has(l)||n.set(l,Object.getPrototypeOf(s).constructor),t||=Object.create(null);const u=t[l]||=new Map;for(const[c,d]of Object.entries(r)){if(c==="type")continue;let p=u.get(c);p||(p=new Map,u.set(c,p));const g=p.get(d)??0;p.set(d,g+1)}}for(const[s,r]of n)t[s]=r.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const n of this.#n.values())!(n instanceof ct)||!n.annotationElementId||!n.serialize()||t.push(n.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class sy extends Oh{#t;constructor(t){super();const{map:n,hash:s,transfer:r}=t.serializable,l=structuredClone(n,r?{transfer:r}:null);this.#t={map:l,hash:s,transfer:r}}get print(){It("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return xt(this,"modifiedIds",{ids:new Set,hash:""})}}class eS{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:n,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(ue(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:u}=t,c=new FontFace(r,l,u);this.addNativeFontFace(c);try{await c.load(),this.#t.add(r),s?.(t)}catch{vt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}It("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw vt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return xt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return xt(this,"isSyncFontLoadingSupported",ke||Ee.platform.isFirefox)}_queueLoadingCallback(t){function n(){for(ue(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:n,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function s(N,M){return N.charCodeAt(M)<<24|N.charCodeAt(M+1)<<16|N.charCodeAt(M+2)<<8|N.charCodeAt(M+3)&255}function r(N,M,I,H){const X=N.substring(0,M),$=N.substring(M+I);return X+H+$}let l,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let p=0;function g(N,M){if(++p>30){vt("Load test font never loaded."),M();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(g.bind(null,N,M))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const E=16,S=1482184792;let T=s(b,E);for(l=0,u=y.length-3;l<u;l+=4)T=T-S+s(y,l)|0;l<y.length&&(T=T-S+s(y+"XXX",l)|0),b=r(b,E,4,GA(T));const w=`url(data:font/opentype;base64,${btoa(b)});`,L=`@font-face {font-family:"${y}";src:${w}}`;this.insertRule(L);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const N of[t.loadedName,y]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=N,C.append(M)}this._document.body.append(C),g(y,()=>{C.remove(),n.complete()})}}class nS{constructor(t,n=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=n}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Zm(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const s=this.loadedName+"_path_"+n;let r;try{r=t.get(s)}catch(u){vt(`getPathGenerator - ignoring character: "${u}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[n]=l}}function iS(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(ke)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function sS(h){if(ke&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Cr(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function to(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const ch=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,aS=h=>typeof h=="object"&&typeof h?.name=="string",ay=YA.bind(null,ch,aS);class rS{#t=new Map;#e=Promise.resolve();postMessage(t,n){const s={data:structuredClone(t,n?{transfer:n}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,n,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:l}=s;if(l.aborted){vt("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,n);r=()=>l.removeEventListener("abort",u),l.addEventListener("abort",u)}this.#t.set(n,r)}removeEventListener(t,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const eo={DATA:1,ERROR:2},oe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function im(){}function Ge(h){if(h instanceof ni||h instanceof fo||h instanceof Jg||h instanceof vr||h instanceof Zc)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||It('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new ni(h.message);case"InvalidPDFException":return new fo(h.message);case"PasswordException":return new Jg(h.message,h.code);case"ResponseException":return new vr(h.message,h.status,h.missing);case"UnknownErrorException":return new Zc(h.message,h.details)}return new Zc(h.message,h.toString())}class fr{#t=new AbortController;constructor(t,n,s){this.sourceName=t,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===eo.DATA)r.resolve(t.data);else if(t.callback===eo.ERROR)r.reject(Ge(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(n,t.data).then(function(u){l.postMessage({sourceName:s,targetName:r,callback:eo.DATA,callbackId:t.callbackId,data:u})},function(u){l.postMessage({sourceName:s,targetName:r,callback:eo.ERROR,callbackId:t.callbackId,reason:Ge(u)})});return}if(t.streamId){this.#n(t);return}n(t.data)}on(t,n){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=n}send(t,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},s)}sendWithPromise(t,n,s){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:n},s)}catch(u){l.reject(u)}return l.promise}sendWithStream(t,n,s,r){const l=this.streamId++,u=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[l]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:u,targetName:c,action:t,streamId:l,data:n,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[l].pullCall=g,d.postMessage({sourceName:u,targetName:c,stream:oe.PULL,streamId:l,desiredSize:p.desiredSize}),g.promise},cancel:p=>{ue(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[l].cancelCall=g,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:u,targetName:c,stream:oe.CANCEL,streamId:l,reason:Ge(p)}),g.promise}},s)}#n(t){const n=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,u=this,c=this.actionHandler[t.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:r,stream:oe.ENQUEUE,streamId:n,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:oe.CLOSE,streamId:n}),delete u.streamSinks[n])},error(p){ue(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:oe.ERROR,streamId:n,reason:Ge(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[n]=d,Promise.try(c,t.data,d).then(function(){l.postMessage({sourceName:s,targetName:r,stream:oe.START_COMPLETE,streamId:n,success:!0})},function(p){l.postMessage({sourceName:s,targetName:r,stream:oe.START_COMPLETE,streamId:n,reason:Ge(p)})})}#i(t){const n=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,u=this.streamControllers[n],c=this.streamSinks[n];switch(t.stream){case oe.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Ge(t.reason));break;case oe.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Ge(t.reason));break;case oe.PULL:if(!c){l.postMessage({sourceName:s,targetName:r,stream:oe.PULL_COMPLETE,streamId:n,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||im).then(function(){l.postMessage({sourceName:s,targetName:r,stream:oe.PULL_COMPLETE,streamId:n,success:!0})},function(p){l.postMessage({sourceName:s,targetName:r,stream:oe.PULL_COMPLETE,streamId:n,reason:Ge(p)})});break;case oe.ENQUEUE:if(ue(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case oe.CLOSE:if(ue(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),this.#a(u,n);break;case oe.ERROR:ue(u,"error should have stream controller"),u.controller.error(Ge(t.reason)),this.#a(u,n);break;case oe.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Ge(t.reason)),this.#a(u,n);break;case oe.CANCEL:if(!c)break;const d=Ge(t.reason);Promise.try(c.onCancel||im,d).then(function(){l.postMessage({sourceName:s,targetName:r,stream:oe.CANCEL_COMPLETE,streamId:n,success:!0})},function(p){l.postMessage({sourceName:s,targetName:r,stream:oe.CANCEL_COMPLETE,streamId:n,reason:Ge(p)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#a(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class ry{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,n,s){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){It("Abstract method `_createCanvas` called.")}}class lS extends ry{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const s=this._document.createElement("canvas");return s.width=t,s.height=n,s}}class ly{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class sm extends ly{async _fetch(t){const n=await la(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Cr(n)}}class oy{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,s,r,l){return"none"}destroy(t=!1){}}class oS extends oy{#t;#e;#n;#i;#a;#s;#o=0;constructor({docId:t,ownerDocument:n=globalThis.document}){super(),this.#i=t,this.#a=n}get#l(){return this.#e||=new Map}get#h(){return this.#s||=new Map}get#u(){if(!this.#n){const t=this.#a.createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=this.#a.createElementNS(Zn,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#a.createElementNS(Zn,"defs"),t.append(s),s.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=d[y]/255;const g=p.join(",");return[g,g,g]}const[n,s,r]=t,l=new Array(256),u=new Array(256),c=new Array(256);for(let d=0;d<256;d++)l[d]=n[d]/255,u[d]=s[d]/255,c[d]=r[d]/255;return[l.join(","),u.join(","),c.join(",")]}#c(t){if(this.#t===void 0){this.#t="";const n=this.#a.URL;n!==this.#a.baseURI&&(Mr(n)?vt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Th(n,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let n=this.#l.get(t);if(n)return n;const[s,r,l]=this.#d(t),u=t.length===1?s:`${s}${r}${l}`;if(n=this.#l.get(u),n)return this.#l.set(t,n),n;const c=`g_${this.#i}_transfer_map_${this.#o++}`,d=this.#c(c);this.#l.set(t,d),this.#l.set(u,d);const p=this.#p(c);return this.#g(s,r,l,p),d}addHCMFilter(t,n){const s=`${t}-${n}`,r="base";let l=this.#h.get(r);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#h.set(r,l)),!t||!n))return l.url;const u=this.#b(t);t=ot.makeHexColor(...u);const c=this.#b(n);if(n=ot.makeHexColor(...c),this.#u.style.color="",t==="#000000"&&n==="#ffffff"||t===n)return l.url;const d=new Array(256);for(let v=0;v<=255;v++){const E=v/255;d[v]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const p=d.join(","),g=`g_${this.#i}_hcm_filter`,y=l.filter=this.#p(g);this.#g(p,p,p,y),this.#r(y);const b=(v,E)=>{const S=u[v]/255,T=c[v]/255,w=new Array(E+1);for(let L=0;L<=E;L++)w[L]=S+L/E*(T-S);return w.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),l.url=this.#c(g),l.url}addAlphaFilter(t){let n=this.#l.get(t);if(n)return n;const[s]=this.#d([t]),r=`alpha_${s}`;if(n=this.#l.get(r),n)return this.#l.set(t,n),n;const l=`g_${this.#i}_alpha_map_${this.#o++}`,u=this.#c(l);this.#l.set(t,u),this.#l.set(r,u);const c=this.#p(l);return this.#y(s,c),u}addLuminosityFilter(t){let n=this.#l.get(t||"luminosity");if(n)return n;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",n=this.#l.get(r),n)return this.#l.set(t,n),n;const l=`g_${this.#i}_luminosity_map_${this.#o++}`,u=this.#c(l);this.#l.set(t,u),this.#l.set(r,u);const c=this.#p(l);return this.#f(c),t&&this.#y(s,c),u}addHighlightHCMFilter(t,n,s,r,l){const u=`${n}-${s}-${r}-${l}`;let c=this.#h.get(t);if(c?.key===u||(c?(c.filter?.remove(),c.key=u,c.url="none",c.filter=null):(c={key:u,url:"none",filter:null},this.#h.set(t,c)),!n||!s))return c.url;const[d,p]=[n,s].map(this.#b.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,v]=[r,l].map(this.#b.bind(this));y<g&&([g,y,b,v]=[y,g,v,b]),this.#u.style.color="";const E=(w,L,C)=>{const N=new Array(256),M=(y-g)/C,I=w/255,H=(L-w)/(255*C);let X=0;for(let $=0;$<=C;$++){const Z=Math.round(g+$*M),Q=I+$*H;for(let at=X;at<=Z;at++)N[at]=Q;X=Z+1}for(let $=X;$<256;$++)N[$]=N[X-1];return N.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,T=c.filter=this.#p(S);return this.#r(T),this.#g(E(b[0],v[0],5),E(b[1],v[1],5),E(b[2],v[2],5),T),c.url=this.#c(S),c.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#o=0)}#f(t){const n=this.#a.createElementNS(Zn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)}#r(t){const n=this.#a.createElementNS(Zn,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)}#p(t){const n=this.#a.createElementNS(Zn,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),this.#u.append(n),n}#m(t,n,s){const r=this.#a.createElementNS(Zn,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#g(t,n,s,r){const l=this.#a.createElementNS(Zn,"feComponentTransfer");r.append(l),this.#m(l,"feFuncR",t),this.#m(l,"feFuncG",n),this.#m(l,"feFuncB",s)}#y(t,n){const s=this.#a.createElementNS(Zn,"feComponentTransfer");n.append(s),this.#m(s,"feFuncA",t)}#b(t){return this.#u.style.color=t,Mh(getComputedStyle(this.#u).getPropertyValue("color"))}}class uy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class am extends uy{async _fetch(t){const n=await la(t,"arraybuffer");return new Uint8Array(n)}}class cy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(t){It("Abstract method `_fetch` called.")}}class rm extends cy{async _fetch(t){const n=await la(t,"arraybuffer");return new Uint8Array(n)}}ke&&vt("Please use the `legacy` build in Node.js environments.");async function Nh(h){const n=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(n)}class uS extends oy{}class cS extends ry{_createCanvas(t,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,n)}}class hS extends ly{async _fetch(t){return Nh(t)}}class dS extends uy{async _fetch(t){return Nh(t)}}class fS extends cy{async _fetch(t){return Nh(t)}}const xe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function hh(h,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,s),h.clip(r)}class kh{isModifyingCurrentTransform(){return!1}getPattern(){It("Abstract method `getPattern` called.")}}class pS extends kh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(t,n,s,r){let l;if(r===xe.STROKE||r===xe.FILL){const u=n.current.getClippedPathBoundingBox(r,$t(t))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,d=Math.ceil(u[3]-u[1])||1,p=n.cachedCanvases.getCanvas("pattern",c,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-u[0],-u[1]),s=ot.transform(s,[1,0,0,1,u[0],u[1]]),g.transform(...n.baseTransform),this.matrix&&g.transform(...this.matrix),hh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(s);l.setTransform(y)}else hh(t,this._bbox),l=this._createGradient(t);return l}}function eh(h,t,n,s,r,l,u,c){const d=t.coords,p=t.colors,g=h.data,y=h.width*4;let b;d[n+1]>d[s+1]&&(b=n,n=s,s=b,b=l,l=u,u=b),d[s+1]>d[r+1]&&(b=s,s=r,r=b,b=u,u=c,c=b),d[n+1]>d[s+1]&&(b=n,n=s,s=b,b=l,l=u,u=b);const v=(d[n]+t.offsetX)*t.scaleX,E=(d[n+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,T=(d[s+1]+t.offsetY)*t.scaleY,w=(d[r]+t.offsetX)*t.scaleX,L=(d[r+1]+t.offsetY)*t.scaleY;if(E>=L)return;const C=p[l],N=p[l+1],M=p[l+2],I=p[u],H=p[u+1],X=p[u+2],$=p[c],Z=p[c+1],Q=p[c+2],at=Math.round(E),bt=Math.round(L);let ut,lt,O,U,J,mt,R,q;for(let W=at;W<=bt;W++){if(W<T){const At=W<E?0:(E-W)/(E-T);ut=v-(v-S)*At,lt=C-(C-I)*At,O=N-(N-H)*At,U=M-(M-X)*At}else{let At;W>L?At=1:T===L?At=0:At=(T-W)/(T-L),ut=S-(S-w)*At,lt=I-(I-$)*At,O=H-(H-Z)*At,U=X-(X-Q)*At}let K;W<E?K=0:W>L?K=1:K=(E-W)/(E-L),J=v-(v-w)*K,mt=C-(C-$)*K,R=N-(N-Z)*K,q=M-(M-Q)*K;const nt=Math.round(Math.min(ut,J)),pt=Math.round(Math.max(ut,J));let st=y*W+nt*4;for(let At=nt;At<=pt;At++)K=(ut-At)/(ut-J),K<0?K=0:K>1&&(K=1),g[st++]=lt-(lt-mt)*K|0,g[st++]=O-(O-R)*K|0,g[st++]=U-(U-q)*K|0,g[st++]=255}}function gS(h,t,n){const s=t.coords,r=t.colors;let l,u;switch(t.type){case"lattice":const c=t.verticesPerRow,d=Math.floor(s.length/c)-1,p=c-1;for(l=0;l<d;l++){let g=l*c;for(let y=0;y<p;y++,g++)eh(h,n,s[g],s[g+1],s[g+c],r[g],r[g+1],r[g+c]),eh(h,n,s[g+c+1],s[g+1],s[g+c],r[g+c+1],r[g+1],r[g+c])}break;case"triangles":for(l=0,u=s.length;l<u;l+=3)eh(h,n,s[l],s[l+1],s[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class mS extends kh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,n,s){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),v=p/y,E=g/b,S={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/v,scaleY:1/E},T=y+4,w=b+4,L=s.getCanvas("mesh",T,w),C=L.context,N=C.createImageData(y,b);if(n){const I=N.data;for(let H=0,X=I.length;H<X;H+=4)I[H]=n[0],I[H+1]=n[1],I[H+2]=n[2],I[H+3]=255}for(const I of this._figures)gS(N,I,S);return C.putImageData(N,2,2),{canvas:L.canvas,offsetX:c-2*v,offsetY:d-2*E,scaleX:v,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,n,s,r){hh(t,this._bbox);const l=new Float32Array(2);if(r===xe.SHADING)ot.singularValueDecompose2dScale($t(t),l);else if(this.matrix){ot.singularValueDecompose2dScale(this.matrix,l);const[c,d]=l;ot.singularValueDecompose2dScale(n.baseTransform,l),l[0]*=c,l[1]*=d}else ot.singularValueDecompose2dScale(n.baseTransform,l);const u=this._createMeshCanvas(l,r===xe.SHADING?null:this._background,n.cachedCanvases);return r!==xe.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class yS extends kh{getPattern(){return"hotpink"}}function bS(h){switch(h[0]){case"RadialAxial":return new pS(h);case"Mesh":return new mS(h);case"Dummy":return new yS}throw new Error(`Unknown IR type: ${h[0]}`)}const lm={COLORED:1,UNCOLORED:2};class Ph{static MAX_PATTERN_SIZE=3e3;constructor(t,n,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:n,operatorList:s,paintType:r,tilingType:l,color:u,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),vo("TilingType: "+l);const g=n[0],y=n[1],b=n[2],v=n[3],E=b-g,S=v-y,T=new Float32Array(2);ot.singularValueDecompose2dScale(this.matrix,T);const[w,L]=T;ot.singularValueDecompose2dScale(this.baseTransform,T);const C=w*T[0],N=L*T[1];let M=E,I=S,H=!1,X=!1;const $=Math.ceil(d*C),Z=Math.ceil(p*N),Q=Math.ceil(E*C),at=Math.ceil(S*N);$>=Q?M=d:H=!0,Z>=at?I=p:X=!0;const bt=this.getSizeAndScale(M,this.ctx.canvas.width,C),ut=this.getSizeAndScale(I,this.ctx.canvas.height,N),lt=t.cachedCanvases.getCanvas("pattern",bt.size,ut.size),O=lt.context,U=c.createCanvasGraphics(O);if(U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,r,u),O.translate(-bt.scale*g,-ut.scale*y),U.transform(bt.scale,0,0,ut.scale,0,0),O.save(),this.clipBbox(U,g,y,b,v),U.baseTransform=$t(U.ctx),U.executeOperatorList(s),U.endDrawing(),O.restore(),H||X){const J=lt.canvas;H&&(M=d),X&&(I=p);const mt=this.getSizeAndScale(M,this.ctx.canvas.width,C),R=this.getSizeAndScale(I,this.ctx.canvas.height,N),q=mt.size,W=R.size,K=t.cachedCanvases.getCanvas("pattern-workaround",q,W),nt=K.context,pt=H?Math.floor(E/d):0,st=X?Math.floor(S/p):0;for(let At=0;At<=pt;At++)for(let Rt=0;Rt<=st;Rt++)nt.drawImage(J,q*At,W*Rt,q,W,0,0,q,W);return{canvas:K.canvas,scaleX:mt.scale,scaleY:R.scale,offsetX:g,offsetY:y}}return{canvas:lt.canvas,scaleX:bt.scale,scaleY:ut.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,n,s){const r=Math.max(Ph.MAX_PATTERN_SIZE,n);let l=Math.ceil(t*s);return l>=r?l=r:s=l/t,{scale:s,size:l}}clipBbox(t,n,s,r,l){const u=r-n,c=l-s;t.ctx.rect(n,s,u,c),ot.axialAlignedBoundingBox([n,s,r,l],$t(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,s){const r=t.ctx,l=t.current;switch(n){case lm.COLORED:const{fillStyle:u,strokeStyle:c}=this.ctx;r.fillStyle=l.fillColor=u,r.strokeStyle=l.strokeColor=c;break;case lm.UNCOLORED:r.fillStyle=r.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new jA(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,n,s,r){let l=s;r!==xe.SHADING&&(l=ot.transform(l,n.baseTransform),this.matrix&&(l=ot.transform(l,this.matrix)));const u=this.createPatternCanvas(n);let c=new DOMMatrix(l);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const d=t.createPattern(u.canvas,"repeat");return d.setTransform(c),d}}function vS({src:h,srcPos:t=0,dest:n,width:s,height:r,nonBlackColor:l=4294967295,inverseDecode:u=!1}){const c=Ee.isLittleEndian?4278190080:255,[d,p]=u?[l,c]:[c,l],g=s>>3,y=s&7,b=h.length;n=new Uint32Array(n.buffer);let v=0;for(let E=0;E<r;E++){for(const T=t+g;t<T;t++){const w=t<b?h[t]:255;n[v++]=w&128?p:d,n[v++]=w&64?p:d,n[v++]=w&32?p:d,n[v++]=w&16?p:d,n[v++]=w&8?p:d,n[v++]=w&4?p:d,n[v++]=w&2?p:d,n[v++]=w&1?p:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let T=0;T<y;T++)n[v++]=S&1<<7-T?p:d}return{srcPos:t,destPos:v}}const om=16,um=100,AS=15,cm=10,qe=16,nh=new DOMMatrix,nn=new Float32Array(2),Qs=new Float32Array([1/0,1/0,-1/0,-1/0]);function SS(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},h.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},h.transform=function(n,s,r,l,u,c){t.transform(n,s,r,l,u,c),this.__originalTransform(n,s,r,l,u,c)},h.setTransform=function(n,s,r,l,u,c){t.setTransform(n,s,r,l,u,c),this.__originalSetTransform(n,s,r,l,u,c)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(n){t.rotate(n),this.__originalRotate(n)},h.clip=function(n){t.clip(n),this.__originalClip(n)},h.moveTo=function(n,s){t.moveTo(n,s),this.__originalMoveTo(n,s)},h.lineTo=function(n,s){t.lineTo(n,s),this.__originalLineTo(n,s)},h.bezierCurveTo=function(n,s,r,l,u,c){t.bezierCurveTo(n,s,r,l,u,c),this.__originalBezierCurveTo(n,s,r,l,u,c)},h.rect=function(n,s,r,l){t.rect(n,s,r,l),this.__originalRect(n,s,r,l)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class ES{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,n,s)):(r=this.canvasFactory.create(n,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function no(h,t,n,s,r,l,u,c,d,p){const[g,y,b,v,E,S]=$t(h);if(y===0&&b===0){const L=u*g+E,C=Math.round(L),N=c*v+S,M=Math.round(N),I=(u+d)*g+E,H=Math.abs(Math.round(I)-C)||1,X=(c+p)*v+S,$=Math.abs(Math.round(X)-M)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(v),C,M),h.drawImage(t,n,s,r,l,0,0,H,$),h.setTransform(g,y,b,v,E,S),[H,$]}if(g===0&&v===0){const L=c*b+E,C=Math.round(L),N=u*y+S,M=Math.round(N),I=(c+p)*b+E,H=Math.abs(Math.round(I)-C)||1,X=(u+d)*y+S,$=Math.abs(Math.round(X)-M)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,C,M),h.drawImage(t,n,s,r,l,0,0,$,H),h.setTransform(g,y,b,v,E,S),[$,H]}h.drawImage(t,n,s,r,l,u,c,d,p);const T=Math.hypot(g,y),w=Math.hypot(b,v);return[T*d,w*p]}class hm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=oh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=De.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,n){this.clipBox=new Float32Array([0,0,t,n]),this.minMax=Qs.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=xe.FILL,n=null){const s=this.minMax.slice();if(t===xe.STROKE){n||It("Stroke bounding box must include transform."),ot.singularValueDecompose2dScale(n,nn);const r=nn[0]*this.lineWidth/2,l=nn[1]*this.lineWidth/2;s[0]-=r,s[1]-=l,s[2]+=r,s[3]+=l}return s}updateClipFromPath(){const t=ot.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Qs,0)}getClippedPathBoundingBox(t=xe.FILL,n=null){return ot.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function dm(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const n=t.height,s=t.width,r=n%qe,l=(n-r)/qe,u=r===0?l:l+1,c=h.createImageData(s,qe);let d=0,p;const g=t.data,y=c.data;let b,v,E,S;if(t.kind===gr.GRAYSCALE_1BPP){const T=g.byteLength,w=new Uint32Array(y.buffer,0,y.byteLength>>2),L=w.length,C=s+7>>3,N=4294967295,M=Ee.isLittleEndian?4278190080:255;for(b=0;b<u;b++){for(E=b<l?qe:r,p=0,v=0;v<E;v++){const I=T-d;let H=0;const X=I>C?s:I*8-7,$=X&-8;let Z=0,Q=0;for(;H<$;H+=8)Q=g[d++],w[p++]=Q&128?N:M,w[p++]=Q&64?N:M,w[p++]=Q&32?N:M,w[p++]=Q&16?N:M,w[p++]=Q&8?N:M,w[p++]=Q&4?N:M,w[p++]=Q&2?N:M,w[p++]=Q&1?N:M;for(;H<X;H++)Z===0&&(Q=g[d++],Z=128),w[p++]=Q&Z?N:M,Z>>=1}for(;p<L;)w[p++]=0;h.putImageData(c,0,b*qe)}}else if(t.kind===gr.RGBA_32BPP){for(v=0,S=s*qe*4,b=0;b<l;b++)y.set(g.subarray(d,d+S)),d+=S,h.putImageData(c,0,v),v+=qe;b<u&&(S=s*r*4,y.set(g.subarray(d,d+S)),h.putImageData(c,0,v))}else if(t.kind===gr.RGB_24BPP)for(E=qe,S=s*E,b=0;b<u;b++){for(b>=l&&(E=r,S=s*E),p=0,v=S;v--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;h.putImageData(c,0,b*qe)}else throw new Error(`bad image kind: ${t.kind}`)}function fm(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const n=t.height,s=t.width,r=n%qe,l=(n-r)/qe,u=r===0?l:l+1,c=h.createImageData(s,qe);let d=0;const p=t.data,g=c.data;for(let y=0;y<u;y++){const b=y<l?qe:r;({srcPos:d}=vS({src:p,srcPos:d,dest:g,width:s,height:b,nonBlackColor:0})),h.putImageData(c,0,y*qe)}}function or(h,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function io(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function pm(h,t){if(t)return!0;ot.singularValueDecompose2dScale(h,nn);const n=Math.fround(An.pixelRatio*ss.PDF_TO_CSS_UNITS);return nn[0]<=n&&nn[1]<=n}const _S=["butt","round","square"],wS=["miter","round","bevel"],TS={},gm={};class Js{constructor(t,n,s,r,l,{optionalContentConfig:u,markedContentStack:c=null},d,p){this.ctx=t,this.current=new hm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new ES(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,n=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):n}beginDrawing({transform:t,viewport:n,transparency:s=!1,background:r=null}){const l=this.ctx.canvas.width,u=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,u),this.ctx.fillStyle=c,s){const d=this.cachedCanvases.getCanvas("transparent",l,u);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...$t(this.compositeCtx))}this.ctx.save(),io(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=$t(this.ctx)}executeOperatorList(t,n,s,r){const l=t.argsArray,u=t.fnArray;let c=n||0;const d=l.length;if(d===c)return c;const p=d-c>cm&&typeof s=="function",g=p?Date.now()+AS:0;let y=0;const b=this.commonObjs,v=this.objs;let E;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,s),c;if(E=u[c],E!==br.dependency)this[E].apply(this,l[c]);else for(const S of l[c]){const T=S.startsWith("g_")?b:v;if(!T.has(S))return T.get(S,s),c}if(c++,c===d)return c;if(p&&++y>cm){if(Date.now()>g)return s(),c;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(t,n){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(n[0],n[1]),1),u=Math.max(Math.hypot(n[2],n[3]),1),c=s,d=r,p="prescale1",g,y;for(;l>2&&c>1||u>2&&d>1;){let b=c,v=d;l>2&&c>1&&(b=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),l/=c/b),u>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,u/=d/v),g=this.cachedCanvases.getCanvas(p,b,v),y=g.context,y.clearRect(0,0,b,v),y.drawImage(t,0,0,c,d,0,0,b,v),t=g.canvas,c=b,d=v,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:d}}_createMaskCanvas(t){const n=this.ctx,{width:s,height:r}=t,l=this.current.fillColor,u=this.current.patternFill,c=$t(n);let d,p,g,y;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;p=JSON.stringify(u?c:[c.slice(0,4),l]),d=this._cachedBitmapsMap.get($),d||(d=new Map,this._cachedBitmapsMap.set($,d));const Z=d.get(p);if(Z&&!u){const Q=Math.round(Math.min(c[0],c[2])+c[4]),at=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:Z,offsetX:Q,offsetY:at}}g=Z}g||(y=this.cachedCanvases.getCanvas("maskCanvas",s,r),fm(y.context,t));let b=ot.transform(c,[1/s,0,0,-1/r,0,0]);b=ot.transform(b,[1,0,0,1,0,-r]);const v=Qs.slice();ot.axialAlignedBoundingBox([0,0,s,r],b,v);const[E,S,T,w]=v,L=Math.round(T-E)||1,C=Math.round(w-S)||1,N=this.cachedCanvases.getCanvas("fillCanvas",L,C),M=N.context,I=E,H=S;M.translate(-I,-H),M.transform(...b),g||(g=this._scaleImage(y.canvas,Rn(M)),g=g.img,d&&u&&d.set(p,g)),M.imageSmoothingEnabled=pm($t(M),t.interpolate),no(M,g,0,0,g.width,g.height,0,0,s,r),M.globalCompositeOperation="source-in";const X=ot.transform(Rn(M),[1,0,0,1,-I,-H]);return M.fillStyle=u?l.getPattern(n,this,X,xe.FILL):l,M.fillRect(0,0,s,r),d&&!u&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,N.canvas)),{canvas:N.canvas,offsetX:Math.round(I),offsetY:Math.round(H)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=_S[t]}setLineJoin(t){this.ctx.lineJoin=wS[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,n){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[n,s]of t)switch(n){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const l=this.ctx=r.context;l.setTransform(this.suspendedCtx.getTransform()),or(this.suspendedCtx,l),SS(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),or(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,s,r){const l=r[0],u=r[1],c=r[2]-l,d=r[3]-u;c===0||d===0||(this.genericComposeSMask(n.context,s,c,d,n.subtype,n.backdrop,n.transferMap,l,u,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,n,s,r,l,u,c,d,p,g,y){let b=t.canvas,v=d-g,E=p-y;if(u)if(v<0||E<0||v+s>b.width||E+r>b.height){const T=this.cachedCanvases.getCanvas("maskExtension",s,r),w=T.context;w.drawImage(b,-v,-E),w.globalCompositeOperation="destination-atop",w.fillStyle=u,w.fillRect(0,0,s,r),w.globalCompositeOperation="source-over",b=T.canvas,v=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(v,E,s,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=u,t.fillRect(v,E,s,r),t.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),l==="Alpha"&&c?n.filter=this.filterFactory.addAlphaFilter(c):l==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(c));const S=new Path2D;S.rect(d,p,s,r),n.clip(S),n.globalCompositeOperation="destination-in",n.drawImage(b,v,E,s,r,d,p,s,r),n.restore()}save(){this.inSMaskMode&&or(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&or(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,n,s,r,l,u){this.ctx.transform(t,n,s,r,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,s){let[r]=n;if(!s){r||=n[0]=new Path2D,this[t](r);return}if(!(r instanceof Path2D)){const l=n[0]=new Path2D;for(let u=0,c=r.length;u<c;)switch(r[u++]){case Jl.moveTo:l.moveTo(r[u++],r[u++]);break;case Jl.lineTo:l.lineTo(r[u++],r[u++]);break;case Jl.curveTo:l.bezierCurveTo(r[u++],r[u++],r[u++],r[u++],r[u++],r[u++]);break;case Jl.closePath:l.closePath();break;default:vt(`Unrecognized drawing path operator: ${r[u-1]}`);break}r=l}ot.axialAlignedBoundingBox(s,$t(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,n=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,Rn(s),xe.STROKE),l){const u=new Path2D;u.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=u}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);n&&this.consumePath(t,this.current.getClippedPathBoundingBox(xe.STROKE,$t(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,n=!0){const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const d=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=r.getPattern(s,this,Rn(s),xe.FILL),d){const p=new Path2D;p.addPath(t,s.getTransform().invertSelf().multiplySelf(d)),t=p}u=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),u&&s.restore(),n&&this.consumePath(t,c)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=TS}eoClip(){this.pendingClip=gm}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,n=this.ctx;if(t===void 0)return;const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:l,x:u,y:c,fontSize:d,path:p}of t)s.addPath(p,new DOMMatrix(l).preMultiplySelf(r).translate(u,c).scale(d,-d));n.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,n){const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||oh,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&vt("Invalid font matrix for font "+t),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const l=s.loadedName||"sans-serif",u=s.systemFontInfo?.css||`"${l}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const d=s.italic?"italic":"normal";let p=n;n<om?p=om:n>um&&(p=um),this.current.fontSizeScale=n/p,this.ctx.font=`${d} ${c} ${p}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,n){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,n){this.setLeading(-n),this.moveText(t,n)}setTextMatrix(t){const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,n,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(n)),r}paintChar(t,n,s,r,l){const u=this.ctx,c=this.current,d=c.font,p=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,y=p&De.FILL_STROKE_MASK,b=!!(p&De.ADD_TO_PATH_FLAG),v=c.patternFill&&!d.missingFile,E=c.patternStroke&&!d.missingFile;let S;if((d.disableFontFace||b||v||E)&&(S=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||v||E){u.save(),u.translate(n,s),u.scale(g,-g);let T;if((y===De.FILL||y===De.FILL_STROKE)&&(r?(T=u.getTransform(),u.setTransform(...r),u.fill(this.#n(S,T,r))):u.fill(S)),y===De.STROKE||y===De.FILL_STROKE)if(l){T||=u.getTransform(),u.setTransform(...l);const{a:w,b:L,c:C,d:N}=T,M=ot.inverseTransform(l),I=ot.transform([w,L,C,N,0,0],M);ot.singularValueDecompose2dScale(I,nn),u.lineWidth*=Math.max(nn[0],nn[1])/g,u.stroke(this.#n(S,T,l))}else u.lineWidth/=g,u.stroke(S);u.restore()}else(y===De.FILL||y===De.FILL_STROKE)&&u.fillText(t,n,s),(y===De.STROKE||y===De.FILL_STROKE)&&u.strokeText(t,n,s);b&&(this.pendingTextPaths||=[]).push({transform:$t(u),x:n,y:s,fontSize:g,path:S})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){s=!0;break}return xt(this,"isFontSubpixelAAEnabled",s)}showText(t){const n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(t);const r=n.fontSize;if(r===0)return;const l=this.ctx,u=n.fontSizeScale,c=n.charSpacing,d=n.wordSpacing,p=n.fontDirection,g=n.textHScale*p,y=t.length,b=s.vertical,v=b?1:-1,E=s.defaultVMetrics,S=r*n.fontMatrix[0],T=n.textRenderingMode===De.FILL&&!s.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(g,-1):l.scale(g,1);let w,L;if(n.patternFill){l.save();const H=n.fillColor.getPattern(l,this,Rn(l),xe.FILL);w=$t(l),l.restore(),l.fillStyle=H}if(n.patternStroke){l.save();const H=n.strokeColor.getPattern(l,this,Rn(l),xe.STROKE);L=$t(l),l.restore(),l.strokeStyle=H}let C=n.lineWidth;const N=n.textMatrixScale;if(N===0||C===0){const H=n.textRenderingMode&De.FILL_STROKE_MASK;(H===De.STROKE||H===De.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=N;if(u!==1&&(l.scale(u,u),C/=u),l.lineWidth=C,s.isInvalidPDFjsFont){const H=[];let X=0;for(const $ of t)H.push($.unicode),X+=$.width;l.fillText(H.join(""),0,0),n.x+=X*S*g,l.restore(),this.compose();return}let M=0,I;for(I=0;I<y;++I){const H=t[I];if(typeof H=="number"){M+=v*H*r/1e3;continue}let X=!1;const $=(H.isSpace?d:0)+c,Z=H.fontChar,Q=H.accent;let at,bt,ut=H.width;if(b){const O=H.vmetric||E,U=-(H.vmetric?O[1]:ut*.5)*S,J=O[2]*S;ut=O?-O[0]:ut,at=U/u,bt=(M+J)/u}else at=M/u,bt=0;if(s.remeasure&&ut>0){const O=l.measureText(Z).width*1e3/r*u;if(ut<O&&this.isFontSubpixelAAEnabled){const U=ut/O;X=!0,l.save(),l.scale(U,1),at/=U}else ut!==O&&(at+=(ut-O)/2e3*r/u)}if(this.contentVisible&&(H.isInFont||s.missingFile)){if(T&&!Q)l.fillText(Z,at,bt);else if(this.paintChar(Z,at,bt,w,L),Q){const O=at+r*Q.offset.x/u,U=bt-r*Q.offset.y/u;this.paintChar(Q.fontChar,O,U,w,L)}}const lt=b?ut*S-$*p:ut*S+$*p;M+=lt,X&&l.restore()}b?n.y-=M:n.x+=M*g,l.restore(),this.compose()}showType3Text(t){const n=this.ctx,s=this.current,r=s.font,l=s.fontSize,u=s.fontDirection,c=r.vertical?1:-1,d=s.charSpacing,p=s.wordSpacing,g=s.textHScale*u,y=s.fontMatrix||oh,b=t.length,v=s.textRenderingMode===De.INVISIBLE;let E,S,T,w;if(!(v||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(g,u),E=0;E<b;++E){if(S=t[E],typeof S=="number"){w=c*S*l/1e3,this.ctx.translate(w,0),s.x+=w*g;continue}const L=(S.isSpace?p:0)+d,C=r.charProcOperatorList[S.operatorListId];C?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...y),this.executeOperatorList(C),this.restore()):vt(`Type3 character "${S.operatorListId}" is not available.`);const N=[S.width,0];ot.applyTransform(N,y),T=N[0]*l+L,n.translate(T,0),s.x+=T*g}n.restore()}}setCharWidth(t,n){}setCharWidthAndBounds(t,n,s,r,l,u){const c=new Path2D;c.rect(s,r,l-s,u-r),this.ctx.clip(c),this.endPath()}getColorN_Pattern(t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||$t(this.ctx),r={createCanvasGraphics:l=>new Js(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new Ph(t,this.ctx,r,s)}else n=this._getPattern(t[1],t[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=bS(this.getObject(t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(t){if(!this.contentVisible)return;const n=this.ctx;this.save();const s=this._getPattern(t);n.fillStyle=s.getPattern(n,this,Rn(n),xe.SHADING);const r=Rn(n);if(r){const{width:l,height:u}=n.canvas,c=Qs.slice();ot.axialAlignedBoundingBox([0,0,l,u],r,c);const[d,p,g,y]=c;this.ctx.fillRect(d,p,g-d,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){It("Should not call beginInlineImage")}beginImageData(){It("Should not call beginImageData")}paintFormXObjectBegin(t,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=$t(this.ctx),n)){ot.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,r,l,u]=n,c=new Path2D;c.rect(s,r,l-s,u-r),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||vo("TODO: Support non-isolated groups."),t.knockout&&vt("Knockout groups not supported.");const s=$t(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Qs.slice();ot.axialAlignedBoundingBox(t.bbox,$t(n),r);const l=[0,0,n.canvas.width,n.canvas.height];r=ot.intersect(r,l)||[0,0,0,0];const u=Math.floor(r[0]),c=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,p),b=y.context;b.translate(-u,-c),b.transform(...s);let v=new Path2D;const[E,S,T,w]=t.bbox;if(v.rect(E,S,T-E,w-S),t.matrix){const L=new Path2D;L.addPath(v,new DOMMatrix(t.matrix)),v=L}b.clip(v),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:u,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(u,c),n.save()),or(n,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=$t(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const l=Qs.slice();ot.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,n,s,r,l){if(this.#t(),io(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],c=n[3]-n[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=c,ot.singularValueDecompose2dScale($t(this.ctx),nn);const{viewportScale:d}=this,p=Math.ceil(u*this.outputScaleX*d),g=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(nn[0],0,0,-nn[1],0,c*nn[1]),io(this.ctx)}else{io(this.ctx),this.endPath();const d=new Path2D;d.rect(n[0],n[1],u,c),this.ctx.clip(d)}}this.current=new hm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(t.data,t),t.count=n;const s=this.ctx,r=this._createMaskCanvas(t),l=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,s=0,r=0,l,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const d=$t(c);c.transform(n,s,r,l,0,0);const p=this._createMaskCanvas(t);c.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let g=0,y=u.length;g<y;g+=2){const b=ot.transform(d,[n,s,r,l,u[g],u[g+1]]);c.drawImage(p.canvas,b[4],b[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const l of t){const{data:u,width:c,height:d,transform:p}=l,g=this.cachedCanvases.getCanvas("maskCanvas",c,d),y=g.context;y.save();const b=this.getObject(u,l);fm(y,b),y.globalCompositeOperation="source-in",y.fillStyle=r?s.getPattern(y,this,Rn(n),xe.FILL):s,y.fillRect(0,0,c,d),y.restore(),n.save(),n.transform(...p),n.scale(1,-1),no(n,g.canvas,0,0,c,d,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const n=this.getObject(t);if(!n){vt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(t,n,s,r){if(!this.contentVisible)return;const l=this.getObject(t);if(!l){vt("Dependent image isn't ready yet");return}const u=l.width,c=l.height,d=[];for(let p=0,g=r.length;p<g;p+=2)d.push({transform:[n,0,0,s,r[p],r[p+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(l,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:s,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",s,r),u=l.context;return u.filter=this.current.transferMaps,u.drawImage(n,0,0),u.filter="none",l.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const n=t.width,s=t.height,r=this.ctx;this.save();const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none"),r.scale(1/n,-1/s);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,s).context;dm(p,t),u=this.applyTransferMapsToCanvas(p)}const c=this._scaleImage(u,Rn(r));r.imageSmoothingEnabled=pm($t(r),t.interpolate),no(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,n){if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const l=t.width,u=t.height,d=this.cachedCanvases.getCanvas("inlineImage",l,u).context;dm(d,t),r=this.applyTransferMapsToCanvas(d)}for(const l of n)s.save(),s.transform(...l.transform),s.scale(1,-1),no(s,r,l.x,l.y,l.w,l.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,n){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,n){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip&&(s||(this.pendingClip===gm?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=$t(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:s,c:r,d:l}=this.ctx.getTransform();let u,c;if(s===0&&r===0){const d=Math.abs(n),p=Math.abs(l);if(d===p)if(t===0)u=c=1/d;else{const g=d*t;u=c=g<1?1/g:1}else if(t===0)u=1/d,c=1/p;else{const g=d*t,y=p*t;u=g<1?1/g:1,c=y<1?1/y:1}}else{const d=Math.abs(n*l-s*r),p=Math.hypot(n,s),g=Math.hypot(r,l);if(t===0)u=g/d,c=p/d;else{const y=t*d;u=g>y?g/y:1,c=p>y?p/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,n){const{ctx:s,current:{lineWidth:r}}=this,[l,u]=this.getScaleForStroking();if(l===u){s.lineWidth=(r||1)*l,s.stroke(t);return}const c=s.getLineDash();n&&s.save(),s.scale(l,u),nh.a=1/l,nh.d=1/u;const d=new Path2D;if(d.addPath(t,nh),c.length>0){const p=Math.max(l,u);s.setLineDash(c.map(g=>g/p)),s.lineDashOffset/=p}s.lineWidth=r||1,s.stroke(d),n&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in br)Js.prototype[h]!==void 0&&(Js.prototype[br[h]]=Js.prototype[h]);class Li{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class xS{#t;#e;constructor({parsedData:t,rawData:n}){this.#t=t,this.#e=n}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ws=Symbol("INTERNAL");class CS{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:n,intent:s,usage:r,rbGroups:l}){this.#t=!!(t&tn.DISPLAY),this.#e=!!(t&tn.PRINT),this.name=n,this.intent=s,this.usage=r,this.rbGroups=l}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,n,s=!1){t!==Ws&&It("Internal method `_setVisible` called."),this.#n=s,this.#i=n}}class RS{#t=null;#e=new Map;#n=null;#i=null;constructor(t,n=tn.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new CS(n,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Ws,!1);for(const s of t.on)this.#e.get(s)._setVisible(Ws,!0);for(const s of t.off)this.#e.get(s)._setVisible(Ws,!1);this.#n=this.getHash()}}#a(t){const n=t.length;if(n<2)return!0;const s=t[0];for(let r=1;r<n;r++){const l=t[r];let u;if(Array.isArray(l))u=this.#a(l);else if(this.#e.has(l))u=this.#e.get(l).visible;else return vt(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return vo("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(vt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return vt(`Unknown optional content policy ${t.policy}.`),!0}return vt(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,s=!0){const r=this.#e.get(t);if(!r){vt(`Optional content group not found: ${t}`);return}if(s&&n&&r.rbGroups.length)for(const l of r.rbGroups)for(const u of l)u!==t&&this.#e.get(u)?._setVisible(Ws,!1,!0);r._setVisible(Ws,!!n,!0),this.#t=null}setOCGState({state:t,preserveRB:n}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const l=this.#e.get(r);if(l)switch(s){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!l.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new iy;for(const[n,s]of this.#e)t.update(`${n}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class MS{constructor(t,{disableRange:n=!1,disableStream:s=!1}){ue(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:u,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=c,l?.length>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),t.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(s),!0)});ue(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){ue(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new DS(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new LS(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class DS{constructor(t,n,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=So(r)?r:null,this._queuedChunks=n||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class LS{constructor(t,n,s){this._stream=t,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function OS(h){let t=!0,n=s("filename\\*","i").exec(h);if(n){n=n[1];let g=c(n);return g=unescape(g),g=d(g),g=p(g),l(g)}if(n=u(h),n){const g=p(n);return l(g)}if(n=s("filename","i").exec(h),n){n=n[1];let g=c(n);return g=p(g),l(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),v=Cr(y);y=b.decode(v),t=!1}catch{}}return y}function l(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function u(g){const y=[];let b;const v=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(g))!==null;){let[,S,T,w]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[T,w]}const E=[];for(let S=0;S<y.length&&S in y;++S){let[T,w]=y[S];w=c(w),T&&(w=unescape(w),S===0&&(w=d(w))),E.push(w)}return E.join("")}function c(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const v=y[b].indexOf('"');v!==-1&&(y[b]=y[b].slice(0,v),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),E=g.slice(y+1).replace(/^[^']*'/,"");return r(b,E)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,v,E){if(v==="q"||v==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,T){return String.fromCharCode(parseInt(T,16))}),r(b,E);try{E=atob(E)}catch{}return r(b,E)})}return""}function hy(h,t){const n=new Headers;if(!h||!t||typeof t!="object")return n;for(const s in t){const r=t[s];r!==void 0&&n.append(s,r)}return n}function Eo(h){return URL.parse(h)?.origin??null}function dy({responseHeaders:h,isHttp:t,rangeChunkSize:n,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(h.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*n)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function fy(h){const t=h.get("Content-Disposition");if(t){let n=OS(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(So(n))return n}return null}function Or(h,t){return new vr(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function py(h){return h===200||h===206}function gy(h,t,n){return{method:"GET",headers:h,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function my(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(vt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class NS{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=hy(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ue(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new kS(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new PS(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class kS{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const s=new Headers(t.headers),r=n.url;fetch(r,gy(s,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=Eo(l.url),!py(l.status))throw Or(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const u=l.headers,{allowRangeRequests:c,suggestedLength:d}=dy({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=fy(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ni("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:my(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class PS{constructor(t,n,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${n}-${s-1}`);const u=r.url;fetch(u,gy(l,this._withCredentials,this._abortController)).then(c=>{const d=Eo(c.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!py(c.status))throw Or(c.status,u);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:my(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const ih=200,sh=206;function BS(h){const t=h.response;return typeof t!="string"?t:Cr(t).buffer}class zS{_responseOrigin=null;constructor({url:t,httpHeaders:n,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=hy(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const n=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[l,u]of this.headers)n.setRequestHeader(l,u);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=sh):r.expectedStatus=ih,n.responseType="arraybuffer",ue(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{t.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,n.send(null),s}onProgress(t,n){const s=this.pendingRequests[t];s&&s.onProgress?.(n)}onStateChange(t,n){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const l=r.status||ih;if(!(l===ih&&s.expectedStatus===sh)&&l!==s.expectedStatus){s.onError(r.status);return}const c=BS(r);if(l===sh){const d=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?s.onDone({begin:parseInt(p[1],10),chunk:c}):(vt('Missing or invalid "Content-Range" header.'),s.onError(0))}else c?s.onDone({begin:0,chunk:c}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class HS{constructor(t){this._source=t,this._manager=new zS(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return ue(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new IS(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const s=new FS(this._manager,t,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class IS{constructor(t,n){this._manager=t,this._url=n.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t);this._manager._responseOrigin=Eo(n.responseURL);const s=n.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...p]=c.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:u}=dy({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=fy(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Or(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class FS{constructor(t,n,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:n,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Eo(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Or(t,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const US=/^[a-z][a-z0-9\-+.]+:/i;function jS(h){if(US.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class GS{constructor(t){this.source=t,this.url=jS(t.url),ue(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ue(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new qS(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new VS(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class qS{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Or(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ni("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class VS{constructor(t,n,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:n,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ur=Symbol("INITIAL_DATA");class yy{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ur}}get(t,n=null){if(n){const r=this.#e(t);return r.promise.then(()=>n(r.data)),null}const s=this.#t[t];if(!s||s.data===ur)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const n=this.#t[t];return!!n&&n.data!==ur}delete(t){const n=this.#t[t];return!n||n.data===ur?!1:(delete this.#t[t],!0)}resolve(t,n=null){const s=this.#e(t);s.data=n,s.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:n}=this.#t[t];n!==ur&&(yield[t,n])}}}const XS=1e5,mm=30;let Ar=class pn{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#o=0;#l=0;#h=null;#u=null;#d=0;#c=0;#f=Object.create(null);#r=[];#p=null;#m=[];#g=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#S=new WeakMap;static#_=null;static#T=new Set;constructor({textContentSource:t,container:n,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#u=n,this.#c=s.scale*An.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:l,pageX:u,pageY:c}=s.rawDims;this.#y=[1,0,0,-1,-u,c+l],this.#l=r,this.#o=l,pn.#L(),Oi(n,s),this.#t.promise.finally(()=>{pn.#T.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=Ee.platform;return xt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#h.read().then(({value:n,done:s})=>{if(s){this.#t.resolve();return}this.#a??=n.lang,Object.assign(this.#f,n.styles),this.#C(n.items),t()},this.#t.reject)};return this.#h=this.#p.getReader(),pn.#T.add(this),t(),this.#t.promise}update({viewport:t,onBefore:n=null}){const s=t.scale*An.pixelRatio,r=t.rotation;if(r!==this.#d&&(n?.(),this.#d=r,Oi(this.#u,{rotation:r})),s!==this.#c){n?.(),this.#c=s;const l={div:null,properties:null,ctx:pn.#R(this.#a)};for(const u of this.#m)l.properties=this.#g.get(u),l.div=u,this.#E(l)}}cancel(){const t=new ni("TextLayer task cancelled.");this.#h?.cancel(t).catch(()=>{}),this.#h=null,this.#t.reject(t)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#r}#C(t){if(this.#n)return;this.#s.ctx??=pn.#R(this.#a);const n=this.#m,s=this.#r;for(const r of t){if(n.length>XS){vt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),l.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#M(r)}}#M(t){const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#m.push(n);const r=ot.transform(this.#y,t.transform);let l=Math.atan2(r[1],r[0]);const u=this.#f[t.fontName];u.vertical&&(l+=Math.PI/2);let c=this.#i&&u.fontSubstitution||u.fontFamily;c=pn.fontFamilyMap.get(c)||c;const d=Math.hypot(r[2],r[3]),p=d*pn.#O(c,u,this.#a);let g,y;l===0?(g=r[4],y=r[5]-p):(g=r[4]+p*Math.sin(l),y=r[5]-p*Math.cos(l));const b="calc(var(--total-scale-factor) *",v=n.style;this.#e===this.#u?(v.left=`${(100*g/this.#l).toFixed(2)}%`,v.top=`${(100*y/this.#o).toFixed(2)}%`):(v.left=`${b}${g.toFixed(2)}px)`,v.top=`${b}${y.toFixed(2)}px)`),v.fontSize=`${b}${(pn.#_*d).toFixed(2)}px)`,v.fontFamily=c,s.fontSize=d,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,this.#i&&(n.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),l!==0&&(s.angle=l*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);S!==T&&Math.max(S,T)/Math.min(S,T)>1.5&&(E=!0)}if(E&&(s.canvasWidth=u.vertical?t.height:t.width),this.#g.set(n,s),this.#s.div=n,this.#s.properties=s,this.#E(this.#s),s.hasText&&this.#e.append(n),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#E(t){const{div:n,properties:s,ctx:r}=t,{style:l}=n;let u="";if(pn.#_>1&&(u=`scale(${1/pn.#_})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=l,{canvasWidth:d,fontSize:p}=s;pn.#x(r,p*this.#c,c);const{width:g}=r.measureText(n.textContent);g>0&&(u=`scaleX(${d*this.#c/g}) ${u}`)}s.angle!==0&&(u=`rotate(${s.angle}deg) ${u}`),u.length>0&&(l.transform=u)}static cleanup(){if(!(this.#T.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#R(t=null){let n=this.#v.get(t||="");if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,n),this.#S.set(n,{size:0,family:""})}return n}static#x(t,n,s){const r=this.#S.get(t);n===r.size&&s===r.family||(t.font=`${n}px ${s}`,r.size=n,r.family=s)}static#L(){if(this.#_!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#O(t,n,s){const r=this.#b.get(t);if(r)return r;const l=this.#R(s);l.canvas.width=l.canvas.height=mm,this.#x(l,mm,t);const u=l.measureText(""),c=u.fontBoundingBoxAscent,d=Math.abs(u.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let p=.8;return c?p=c/(c+d):(Ee.platform.isFirefox&&vt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?p=n.ascent:n.descent&&(p=1+n.descent)),this.#b.set(t,p),p}};class Sr{static textContent(t){const n=[],s={items:n,styles:Object.create(null)};function r(l){if(!l)return;let u=null;const c=l.name;if(c==="#text")u=l.value;else if(Sr.shouldBuildText(c))l?.attributes?.textContent?u=l.attributes.textContent:l.value&&(u=l.value);else return;if(u!==null&&n.push({str:u}),!!l.children)for(const d of l.children)r(d)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const YS=100;function Bh(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new zh,{docId:n}=t,s=h.url?iS(h.url):null,r=h.data?sS(h.data):null,l=h.httpHeaders||null,u=h.withCredentials===!0,c=h.password??null,d=h.range instanceof Hh?h.range:null,p=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof ia?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!Mr(h.docBaseUrl)?h.docBaseUrl:null,v=to(h.cMapUrl),E=h.cMapPacked!==!1,S=h.CMapReaderFactory||(ke?hS:sm),T=to(h.iccUrl),w=to(h.standardFontDataUrl),L=h.StandardFontDataFactory||(ke?dS:am),C=to(h.wasmUrl),N=h.WasmFactory||(ke?fS:rm),M=h.stopAtErrors!==!0,I=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,H=h.isEvalSupported!==!1,X=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!ke,$=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!ke&&(Ee.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,Q=typeof h.disableFontFace=="boolean"?h.disableFontFace:ke,at=h.fontExtraProperties===!0,bt=h.enableXfa===!0,ut=h.ownerDocument||globalThis.document,lt=h.disableRange===!0,O=h.disableStream===!0,U=h.disableAutoFetch===!0,J=h.pdfBug===!0,mt=h.CanvasFactory||(ke?cS:lS),R=h.FilterFactory||(ke?uS:oS),q=h.enableHWA===!0,W=h.useWasm!==!1,K=d?d.length:h.length??NaN,nt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!ke&&!Q,pt=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===sm&&L===am&&N===rm&&v&&w&&C&&dr(v,document.baseURI)&&dr(w,document.baseURI)&&dr(C,document.baseURI)),st=null;IA(y);const At={canvasFactory:new mt({ownerDocument:ut,enableHWA:q}),filterFactory:new R({docId:n,ownerDocument:ut}),cMapReaderFactory:pt?null:new S({baseUrl:v,isCompressed:E}),standardFontDataFactory:pt?null:new L({baseUrl:w}),wasmFactory:pt?null:new N({baseUrl:C})};g||(g=ia.create({verbosity:y,port:Li.workerPort}),t._worker=g);const Rt={docId:n,apiVersion:"5.3.31",data:r,password:c,disableAutoFetch:U,rangeChunkSize:p,length:K,docBaseUrl:b,enableXfa:bt,evaluatorOptions:{maxImageSize:I,disableFontFace:Q,ignoreErrors:M,isEvalSupported:H,isOffscreenCanvasSupported:X,isImageDecoderSupported:$,canvasMaxAreaInBytes:Z,fontExtraProperties:at,useSystemFonts:nt,useWasm:W,useWorkerFetch:pt,cMapUrl:v,iccUrl:T,standardFontDataUrl:w,wasmUrl:C}},ce={ownerDocument:ut,pdfBug:J,styleElement:st,loadingParams:{disableAutoFetch:U,enableXfa:bt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Pt=g.messageHandler.sendWithPromise("GetDocRequest",Rt,r?[r.buffer]:null);let Be;if(d)Be=new MS(d,{disableRange:lt,disableStream:O});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ve=dr(s)?NS:ke?GS:HS;Be=new Ve({url:s,length:K,httpHeaders:l,withCredentials:u,rangeChunkSize:p,disableRange:lt,disableStream:O})}return Pt.then(Ve=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const he=new fr(n,Ve,g.port),Ot=new WS(he,t,Be,ce,At);t._transport=Ot,he.send("Ready",null)})}).catch(t._capability.reject),t}class zh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${zh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Hh=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,n,s=!1,r=null){this.length=t,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,n){for(const s of this.#a)s(t,n)}onDataProgress(t,n){this.#t.promise.then(()=>{for(const s of this.#i)s(t,n)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const n of this.#n)n(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,n){It("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class $S{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class KS{#t=!1;constructor(t,n,s,r=!1){this._pageIndex=t,this._pageInfo=n,this._transport=s,this._stats=r?new em:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new yy,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:l=!1}={}){return new Rr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:n,intent:s="display",annotationMode:r=Nn.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(s,r,g,y),{renderingIntent:v,cacheKey:E}=b;this.#t=!1,c||=this._transport.getOptionalContentConfig(v);let S=this._intentStates.get(E);S||(S=Object.create(null),this._intentStates.set(E,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const T=!!(v&tn.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const w=N=>{S.renderTasks.delete(L),T&&(this.#t=!0),this.#e(),N?(L.capability.reject(N),this._abortOperatorList({intentState:S,reason:N instanceof Error?N:new Error(N)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new Zs({callback:w,params:{canvasContext:t,viewport:n,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p});(S.renderTasks||=new Set).add(L);const C=L.task;return Promise.all([S.displayReadyCapability.promise,c]).then(([N,M])=>{if(this.destroyed){w();return}if(this._stats?.time("Rendering"),!(M.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:N,optionalContentConfig:M}),L.operatorListChanged()}).catch(w),C}getOperatorList({intent:t="display",annotationMode:n=Nn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function l(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const u=this._transport.getRenderingIntent(t,n,s,r,!0);let c=this._intentStates.get(u.cacheKey);c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Sr.textContent(s));const n=this.streamTextContent(t);return new Promise(function(s,r){function l(){u.read().then(function({value:d,done:p}){if(p){s(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),l()},r)}const u=n.getReader(),c={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const n=this.#e();return t&&n&&(this._stats&&=new em),n}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,n){const s=this._intentStates.get(n);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let s=0,r=t.length;s<r;s++)n.operatorList.fnArray.push(t.fnArray[s]),n.operatorList.argsArray.push(t.argsArray[s]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:r}){const{map:l,transfer:u}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:l,modifiedIds:r},u).getReader(),p=this._intentStates.get(n);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();this.#e()}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:n,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof Ao){let r=YS;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},r);return}}if(t.streamReader.cancel(new ni(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Di,vn,Jn,es,go,ns,is,Pe,uo,by,vy,pr,na,co;const Vt=class Vt{constructor({name:t=null,port:n=null,verbosity:s=FA()}={}){xn(this,Pe);xn(this,Di,Promise.withResolvers());xn(this,vn,null);xn(this,Jn,null);xn(this,es,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,n){if(qt(Vt,is).has(n))throw new Error("Cannot use more than one PDFWorker per port.");qt(Vt,is).set(n,this),Cn(this,Pe,by).call(this,n)}else Cn(this,Pe,vy).call(this)}get promise(){return qt(this,Di).promise}get port(){return qt(this,Jn)}get messageHandler(){return qt(this,vn)}destroy(){this.destroyed=!0,qt(this,es)?.terminate(),je(this,es,null),qt(Vt,is).delete(qt(this,Jn)),je(this,Jn,null),qt(this,vn)?.destroy(),je(this,vn,null)}static create(t){const n=qt(this,is).get(t?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Vt(t)}static get workerSrc(){if(Li.workerSrc)return Li.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xt(this,"_setupFakeWorkerGlobal",(async()=>qt(this,na,co)?qt(this,na,co):(await import(this.workerSrc)).WorkerMessageHandler)())}};Di=new WeakMap,vn=new WeakMap,Jn=new WeakMap,es=new WeakMap,go=new WeakMap,ns=new WeakMap,is=new WeakMap,Pe=new WeakSet,uo=function(){qt(this,Di).resolve(),qt(this,vn).send("configure",{verbosity:this.verbosity})},by=function(t){je(this,Jn,t),je(this,vn,new fr("main","worker",t)),qt(this,vn).on("ready",()=>{}),Cn(this,Pe,uo).call(this)},vy=function(){if(qt(Vt,ns)||qt(Vt,na,co)){Cn(this,Pe,pr).call(this);return}let{workerSrc:t}=Vt;try{Vt._isSameOrigin(window.location,t)||(t=Vt._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),s=new fr("main","worker",n),r=()=>{l.abort(),s.destroy(),n.terminate(),this.destroyed?qt(this,Di).reject(new Error("Worker was destroyed")):Cn(this,Pe,pr).call(this)},l=new AbortController;n.addEventListener("error",()=>{qt(this,es)||r()},{signal:l.signal}),s.on("test",c=>{if(l.abort(),this.destroyed||!c){r();return}je(this,vn,s),je(this,Jn,n),je(this,es,n),Cn(this,Pe,uo).call(this)}),s.on("ready",c=>{if(l.abort(),this.destroyed){r();return}try{u()}catch{Cn(this,Pe,pr).call(this)}});const u=()=>{const c=new Uint8Array;s.send("test",c,[c.buffer])};u();return}catch{vo("The worker has been disabled.")}Cn(this,Pe,pr).call(this)},pr=function(){qt(Vt,ns)||(vt("Setting up fake worker."),je(Vt,ns,!0)),Vt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){qt(this,Di).reject(new Error("Worker was destroyed"));return}const n=new rS;je(this,Jn,n);const s=`fake${zg(Vt,go)._++}`,r=new fr(s+"_worker",s,n);t.setup(r,n),je(this,vn,new fr(s,s+"_worker",n)),Cn(this,Pe,uo).call(this)}).catch(t=>{qt(this,Di).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},na=new WeakSet,co=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},xn(Vt,na),xn(Vt,go,0),xn(Vt,ns,!1),xn(Vt,is,new WeakMap),ke&&(je(Vt,ns,!0),Li.workerSrc||="./pdf.worker.mjs"),Vt._isSameOrigin=(t,n)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(n,s);return s.origin===r.origin},Vt._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Vt.fromPort=t=>{if(KA("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Vt.create(t)};let ia=Vt;class WS{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#a=null;constructor(t,n,s,r,l){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new yy,this.fontLoader=new eS({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,n=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,r),r}get annotationStorage(){return xt(this,"annotationStorage",new Oh)}getRenderingIntent(t,n=Nn.ENABLE,s=null,r=!1,l=!1){let u=tn.DISPLAY,c=uh;switch(t){case"any":u=tn.ANY;break;case"display":break;case"print":u=tn.PRINT;break;default:vt(`getRenderingIntent - invalid intent: ${t}`)}const d=u&tn.PRINT&&s instanceof sy?s:this.annotationStorage;switch(n){case Nn.DISABLE:u+=tn.ANNOTATIONS_DISABLE;break;case Nn.ENABLE:break;case Nn.ENABLE_FORMS:u+=tn.ANNOTATIONS_FORMS;break;case Nn.ENABLE_STORAGE:u+=tn.ANNOTATIONS_STORAGE,c=d.serializable;break;default:vt(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(u+=tn.IS_EDITING),l&&(u+=tn.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[u,c.hash,g];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Ar.cleanup(),this._networkStream?.cancelAllRequests(new ni("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(s,r)=>{ue(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:u}){if(u){r.close();return}ue(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:u}=this._fullReader;return(!r||!l)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{n.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:u}}),t.on("GetRangeReader",(s,r)=>{ue(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:u,done:c}){if(c){r.close();return}ue(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{l.cancel(u),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new $S(s,this))}),t.on("DocException",s=>{n._capability.reject(Ge(s))}),t.on("PasswordRequest",s=>{this.#a=Promise.withResolvers();try{if(!n.onPassword)throw Ge(s);const r=l=>{l instanceof Error?this.#a.reject(l):this.#a.resolve({password:l})};n.onPassword(r,s.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),t.on("DataLoaded",s=>{n.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,l])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in l){const p=l.error;vt(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,c=new nS(l,u);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:d}=l;ue(d,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,g]of p.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,l,u])=>{if(this.destroyed)return;const c=this.#e.get(r);if(!c.objs.has(s)){if(c._intentStates.size===0){u?.bitmap?.close();return}switch(l){case"Image":case"Pattern":c.objs.resolve(s,u);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",s=>{this.destroyed||n.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,s=this.#n.get(n);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#i.set(l.refStr,t);const u=new KS(n,l,this,this._params.pdfBug);return this.#e.set(n,u),u});return this.#n.set(n,r),r}getPageIndex(t){return ch(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(n=>new RS(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new xS(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Ar.cleanup()}}cachedPageNumber(t){if(!ch(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(n)??null}}class QS{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}class Zs{#t=null;static#e=new WeakSet;constructor({callback:t,params:n,objs:s,commonObjs:r,annotationCanvasMap:l,operatorList:u,pageIndex:c,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null}){this.callback=t,this.params=n,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new QS(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(Zs.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Zs.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:l,background:u}=this.params;this.gfx=new Js(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:r,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Zs.#e.delete(this._canvas),t||=new Ao(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Zs.#e.delete(this._canvas),this.callback())))}}const Ih="5.3.31",Ay="47ad820d9";function ym(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function cr(h){return Math.max(0,Math.min(255,255*h))}class bm{static CMYK_G([t,n,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*n+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=cr(t),[t,t,t]}static G_HTML([t]){const n=ym(t);return`#${n}${n}${n}`}static RGB_G([t,n,s]){return["G",.3*t+.59*n+.11*s]}static RGB_rgb(t){return t.map(cr)}static RGB_HTML(t){return`#${t.map(ym).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,n+r)]}static CMYK_rgb([t,n,s,r]){return[cr(1-Math.min(1,t+r)),cr(1-Math.min(1,s+r)),cr(1-Math.min(1,n+r))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,s]){const r=1-t,l=1-n,u=1-s,c=Math.min(r,l,u);return["CMYK",r,l,u,c]}}class ZS{create(t,n,s=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${n}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){It("Abstract method `_createSVG` called.")}}class Er extends ZS{_createSVG(t){return document.createElementNS(Zn,t)}}class Fh{static setupStorage(t,n,s,r,l){const u=r.getValue(n,{value:null});switch(s.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),l==="print")break;t.addEventListener("input",c=>{r.setValue(n,{value:c.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(u.value===s.attributes.xfaOn?t.setAttribute("checked",!0):u.value===s.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",c=>{r.setValue(n,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),l==="print")break;t.addEventListener("input",c=>{r.setValue(n,{value:c.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const c of s.children)c.attributes.value===u.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const d=c.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(n,{value:p})});break}}static setAttributes({html:t,element:n,storage:s=null,intent:r,linkService:l}){const{attributes:u}=n,c=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[d,p]of Object.entries(u))if(p!=null)switch(d){case"class":p.length&&t.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!c||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,p)}c&&l.addLinkAttributes(t,u.href,u.newWindow),s&&u.dataId&&this.setupStorage(t,u.dataId,n,s)}static render(t){const n=t.annotationStorage,s=t.linkService,r=t.xfaHtml,l=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:l,linkService:s});const c=l!=="richText",d=t.div;if(d.append(u),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}c&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);u.append(y),c&&Sr.shouldBuildText(r.name)&&p.push(y)}return{textDivs:p}}const g=[[r,-1,u]];for(;g.length>0;){const[y,b,v]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const E=y.children[++g.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const w=document.createTextNode(E.value);p.push(w),v.append(w);continue}const T=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(v.append(T),E.attributes&&this.setAttributes({html:T,element:E,storage:n,intent:l,linkService:s}),E.children?.length>0)g.push([E,-1,T]);else if(E.value){const w=document.createTextNode(E.value);c&&Sr.shouldBuildText(S)&&p.push(w),T.append(w)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const Nr=1e3,JS=9,as=new WeakSet;class vm{static create(t){switch(t.data.annotationType){case te.LINK:return new Sy(t);case te.TEXT:return new tE(t);case te.WIDGET:switch(t.data.fieldType){case"Tx":return new eE(t);case"Btn":return t.data.radioButton?new Ey(t):t.data.checkBox?new iE(t):new sE(t);case"Ch":return new aE(t);case"Sig":return new nE(t)}return new us(t);case te.POPUP:return new dh(t);case te.FREETEXT:return new _y(t);case te.LINE:return new lE(t);case te.SQUARE:return new oE(t);case te.CIRCLE:return new uE(t);case te.POLYLINE:return new wy(t);case te.CARET:return new hE(t);case te.INK:return new Uh(t);case te.POLYGON:return new cE(t);case te.HIGHLIGHT:return new Ty(t);case te.UNDERLINE:return new dE(t);case te.SQUIGGLY:return new fE(t);case te.STRIKEOUT:return new pE(t);case te.STAMP:return new xy(t);case te.FILEATTACHMENT:return new gE(t);default:return new ie(t)}}}class ie{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:n,richText:s}){return!!(t?.str||n?.str||s?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ie._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:n}=t;n&&this.#i(n),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:n},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:u,pageX:c,pageY:d}}}}=this;s?.splice(0,4,...t),n.left=`${100*(t[0]-c)/l}%`,n.top=`${100*(u-t[3]+d)/u}%`,r===0?(n.width=`${100*(t[2]-t[0])/l}%`,n.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(r)}_createContainer(t){const{data:n,parent:{page:s,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",n.id),this instanceof us||(l.tabIndex=Nr);const{style:u}=l;if(u.zIndex=this.parent.zIndex++,n.alternativeText&&(l.title=n.alternativeText),n.noRotate&&l.classList.add("norotate"),!n.rect||this instanceof dh){const{rotation:S}=n;return!n.hasOwnCanvas&&S!==0&&this.setRotation(S,l),l}const{width:c,height:d}=this;if(!t&&n.borderStyle.width>0){u.borderWidth=`${n.borderStyle.width}px`;const S=n.borderStyle.horizontalCornerRadius,T=n.borderStyle.verticalCornerRadius;if(S>0||T>0){const L=`calc(${S}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;u.borderRadius=L}else if(this instanceof Ey){const L=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;u.borderRadius=L}switch(n.borderStyle.style){case Ks.SOLID:u.borderStyle="solid";break;case Ks.DASHED:u.borderStyle="dashed";break;case Ks.BEVELED:vt("Unimplemented border style: beveled");break;case Ks.INSET:vt("Unimplemented border style: inset");break;case Ks.UNDERLINE:u.borderBottomStyle="solid";break}const w=n.borderColor||null;w?(this.#e=!0,u.borderColor=ot.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):u.borderWidth=0}const p=ot.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:v}=r.rawDims;u.left=`${100*(p[0]-b)/g}%`,u.top=`${100*(p[1]-v)/y}%`;const{rotation:E}=n;return n.hasOwnCanvas||E===0?(u.width=`${100*c/g}%`,u.height=`${100*d/y}%`):this.setRotation(E,l),l}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:u}=this;t%180!==0&&([l,u]=[u,l]),n.style.width=`${100*l/s}%`,n.style.height=`${100*u/r}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,s,r)=>{const l=r.detail[n],u=l[0],c=l.slice(1);r.target.style[s]=bm[`${u}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[s]:bm[`${u}_rgb`](c)})};return xt(this,"_commonActions",{display:n=>{const{display:s}=n.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,n){const s=this._commonActions;for(const r of Object.keys(n.detail))(t[r]||s[r])?.(n)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[r,l]of Object.entries(n)){const u=s[r];if(u){const c={detail:{[r]:l},target:t};u(c),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,s,r,l]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,T,w,L]=t.subarray(2,6);if(r===S&&l===T&&n===w&&s===L)return}const{style:u}=this.container;let c;if(this.#e){const{borderColor:S,borderWidth:T}=u;u.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=r-n,p=l-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=g.createElement("defs");y.append(b);const v=g.createElement("clipPath"),E=`clippath_${this.data.id}`;v.setAttribute("id",E),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let S=2,T=t.length;S<T;S+=8){const w=t[S],L=t[S+1],C=t[S+2],N=t[S+3],M=g.createElement("rect"),I=(C-n)/d,H=(l-L)/p,X=(w-C)/d,$=(L-N)/p;M.setAttribute("x",I),M.setAttribute("y",H),M.setAttribute("width",X),M.setAttribute("height",$),v.append(M),c?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${H}" width="${X}" height="${$}"/>`)}this.#e&&(c.push("</g></svg>')"),u.backgroundImage=c.join("")),this.container.append(y),this.container.style.clipPath=`url(#${E})`}_createPopup(){const{data:t}=this,n=this.#n=new dh({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){It("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:u,exportValues:c}of r){if(l===-1||u===n)continue;const d=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!as.has(p)){vt(`_getElementsByName - element not allowed: ${u}`);continue}s.push({id:u,exportValue:d,domElement:p})}return s}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,u=r.getAttribute("data-element-id");u!==n&&as.has(r)&&s.push({id:u,exportValue:l,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Sy extends ie{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(this.#e(s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t()}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),this.#t()}#e(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,s),!1),this.#t()}#n(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),this.#t()}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const l=s.get(r);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:l,include:u}=n,c=[];if(r.length!==0||l.length!==0){const g=new Set(l);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:v}of b)g.add(v)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===u&&c.push(b)}else for(const g of Object.values(this._fieldObjects))c.push(...g);const d=this.annotationStorage,p=[];for(const g of c){const{id:y}=g;switch(p.push(y),g.type){case"text":{const v=g.defaultValue||"";d.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=g.defaultValue===g.exportValues;d.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=g.defaultValue||"";d.setValue(y,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!as.has(b)){vt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class tE extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class us extends ie{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ee.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,s,r,l){s.includes("mouse")?t.addEventListener(s,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(s,u=>{if(s==="blur"){if(!n.focused||!u.relatedTarget)return;n.focused=!1}else if(s==="focus"){if(n.focused)return;n.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u)}})})}_setEventListeners(t,n,s,r){for(const[l,u]of s)(u==="Action"||this.data.actions?.[u])&&((u==="Focus"||u==="Blur")&&(n||={focused:!1}),this._setEventListener(t,n,l,u,r),u==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,n,"blur","Blur",null):u==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":ot.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||JS,l=t.style;let u;const c=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),g=Math.round(p/(Qc*r))||1,y=p/g;u=Math.min(r,d(y/Qc))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);u=Math.min(r,d(p/Qc))}l.fontSize=`calc(${u}px * var(--total-scale-factor))`,l.color=ot.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class eE extends us{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,s,r){const l=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[n]=s),l.setValue(u.id,{[r]:s})}render(){const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(n,{value:this.data.fieldValue});let l=r.value||"";const u=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let c=r.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),as.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Nr,this._setRequired(s,this.data.required),u&&(s.maxLength=u),s.addEventListener("input",g=>{t.setValue(n,{value:g.target.value}),this.setPropertyOnSiblings(s,"value",g.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue??"";s.value=d.userValue=y,d.formattedValue=null});let p=g=>{const{formattedValue:y}=d;y!=null&&(g.target.value=y),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",y=>{if(d.focused)return;const{target:b}=y;d.userValue&&(b.value=d.userValue),d.lastCommittedValue=b.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const b={value(v){d.userValue=v.detail.value??"",t.setValue(n,{value:d.userValue.toString()}),v.target.value=d.userValue},formattedValue(v){const{formattedValue:E}=v.detail;d.formattedValue=E,E!=null&&v.target!==document.activeElement&&(v.target.value=E),t.setValue(n,{formattedValue:E})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{const{charLimit:E}=v.detail,{target:S}=v;if(E===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",E);let T=d.userValue;!T||T.length<=E||(T=T.slice(0,E),S.value=d.userValue=T,t.setValue(n,{value:T}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(b,y)}),s.addEventListener("keydown",y=>{d.commitKey=1;let b=-1;if(y.key==="Escape"?b=0:y.key==="Enter"&&!this.data.multiLine?b=2:y.key==="Tab"&&(d.commitKey=3),b===-1)return;const{value:v}=y.target;d.lastCommittedValue!==v&&(d.lastCommittedValue=v,d.userValue=v,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:v,willCommit:!0,commitKey:b,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const g=p;p=null,s.addEventListener("blur",y=>{if(!d.focused||!y.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:b}=y.target;d.userValue=b,d.lastCommittedValue!==b&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:b,willCommit:!0,commitKey:d.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}),g(y)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",y=>{d.lastCommittedValue=null;const{data:b,target:v}=y,{value:E,selectionStart:S,selectionEnd:T}=v;let w=S,L=T;switch(y.inputType){case"deleteWordBackward":{const C=E.substring(0,S).match(/\w*[^\w]*$/);C&&(w-=C[0].length);break}case"deleteWordForward":{const C=E.substring(S).match(/^[^\w]*\w*/);C&&(L+=C[0].length);break}case"deleteContentBackward":S===T&&(w-=1);break;case"deleteContentForward":S===T&&(L+=1);break}y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:E,change:b||"",willCommit:!1,selStart:w,selEnd:L}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(p&&s.addEventListener("blur",p),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/u;s.classList.add("comb"),s.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class nE extends us{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class iE extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,s=n.id;let r=t.getValue(s,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return as.add(l),l.setAttribute("data-element-id",s),l.disabled=n.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=n.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",n.exportValue),l.tabIndex=Nr,l.addEventListener("change",u=>{const{name:c,checked:d}=u.target;for(const p of this._getElementsByName(c,s)){const g=d&&p.exportValue===n.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(s,{value:d})}),l.addEventListener("resetform",u=>{const c=n.defaultFieldValue||"Off";u.target.checked=c===n.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",u=>{const c={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class Ey extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,s=n.id;let r=t.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,t.setValue(s,{value:r})),r)for(const u of this._getElementsByName(n.fieldName,s))t.setValue(u.id,{value:!1});const l=document.createElement("input");if(as.add(l),l.setAttribute("data-element-id",s),l.disabled=n.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=n.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=Nr,l.addEventListener("change",u=>{const{name:c,checked:d}=u.target;for(const p of this._getElementsByName(c,s))t.setValue(p.id,{value:!1});t.setValue(s,{value:d})}),l.addEventListener("resetform",u=>{const c=n.defaultFieldValue;u.target.checked=c!=null&&c===n.buttonValue}),this.enableScripting&&this.hasJSActions){const u=n.buttonValue;l.addEventListener("updatefromsandbox",c=>{const d={value:p=>{const g=u===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class sE extends Sy{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class aE extends us{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,s=t.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");as.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Nr;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),l=!1),r.append(y)}let u=null;if(l){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),u=()=>{g.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const c=g=>{const y=g?"value":"textContent",{options:b,multiple:v}=r;return v?Array.prototype.filter.call(b,E=>E.selected).map(E=>E[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=c(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){u?.();const v=b.detail.value,E=new Set(Array.isArray(v)?v:[v]);for(const S of r.options)S.selected=E.has(S.value);t.setValue(n,{value:c(!0)}),d=c(!1)},multipleSelection(b){r.multiple=!0},remove(b){const v=r.options,E=b.detail.remove;v[E].selected=!1,r.remove(E),v.length>0&&Array.prototype.findIndex.call(v,T=>T.selected)===-1&&(v[0].selected=!0),t.setValue(n,{value:c(!0),items:p(b)}),d=c(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(n,{value:null,items:[]}),d=c(!1)},insert(b){const{index:v,displayValue:E,exportValue:S}=b.detail.insert,T=r.children[v],w=document.createElement("option");w.textContent=E,w.value=S,T?T.before(w):r.append(w),t.setValue(n,{value:c(!0),items:p(b)}),d=c(!1)},items(b){const{items:v}=b.detail;for(;r.length!==0;)r.remove(0);for(const E of v){const{displayValue:S,exportValue:T}=E,w=document.createElement("option");w.textContent=S,w.value=T,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(n,{value:c(!0),items:p(b)}),d=c(!1)},indices(b){const v=new Set(b.detail.indices);for(const E of b.target.options)E.selected=v.has(E.index);t.setValue(n,{value:c(!0)}),d=c(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{const y=c(!0),b=c(!1);t.setValue(n,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(n,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class dh extends ie{constructor(t){const{data:n,elements:s}=t;super(t,{isRenderable:ie._hasPopupData(n)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new rE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${Ch}${s}`).join(",")),this.container}}class rE{#t=this.#C.bind(this);#e=this.#x.bind(this);#n=this.#R.bind(this);#i=this.#E.bind(this);#a=null;#s=null;#o=null;#l=null;#h=null;#u=null;#d=null;#c=!1;#f=null;#r=null;#p=null;#m=null;#g=null;#y=null;#b=!1;constructor({container:t,color:n,elements:s,titleObj:r,modificationDate:l,contentsObj:u,richText:c,parent:d,rect:p,parentRect:g,open:y}){this.#s=t,this.#g=r,this.#o=u,this.#m=c,this.#u=d,this.#a=n,this.#p=p,this.#d=g,this.#h=s,this.#l=Rh.toDateObject(l),this.trigger=s.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",this.#i),b.addEventListener("mouseenter",this.#n),b.addEventListener("mouseleave",this.#e),b.classList.add("popupTriggerArea");for(const b of s)b.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,y&&this.#E()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#a){const l=t.style.outlineColor=ot.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const n=document.createElement("span");n.className="header";const s=document.createElement("h1");if(n.append(s),{dir:s.dir,str:s.textContent}=this.#g,t.append(n),this.#l){const l=document.createElement("span");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#l.valueOf()})),n.append(l)}const r=this.#v;if(r)Fh.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(this.#o);t.append(l)}this.#s.append(t)}get#v(){const t=this.#m,n=this.#o;return t?.str&&(!n?.str||n.str===t.str)&&this.#m.html||null}get#S(){return this.#v?.attributes?.style?.fontSize||0}get#_(){return this.#v?.attributes?.style?.color||null}#T(t){const n=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:this.#_,fontSize:this.#S?`calc(${this.#S}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))n.push({name:"span",value:l,attributes:r});return s}_formatContents({str:t,dir:n}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=n;const r=t.split(/(?:\r\n?|\n)/);for(let l=0,u=r.length;l<u;++l){const c=r[l];s.append(document.createTextNode(c)),l<u-1&&s.append(document.createElement("br"))}return s}#C(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#c)&&this.#E()}updateEdited({rect:t,popupContent:n}){this.#y||={contentsObj:this.#o,richText:this.#m},t&&(this.#r=null),n&&(this.#m=this.#T(n),this.#o=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#o,richText:this.#m}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#r=null)}#M(){if(this.#r!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:l}}}=this.#u;let u=!!this.#d,c=u?this.#d:this.#p;for(const E of this.#h)if(!c||ot.intersect(E.data.rect,c)!==null){c=E.data.rect,u=!0;break}const d=ot.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),g=u?c[2]-c[0]+5:0,y=d[0]+g,b=d[1];this.#r=[100*(y-r)/n,100*(b-l)/s];const{style:v}=this.#s;v.left=`${this.#r[0]}%`,v.top=`${this.#r[1]}%`}#E(){this.#c=!this.#c,this.#c?(this.#R(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#t)):(this.#x(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#t))}#R(){this.#f||this.render(),this.isVisible?this.#c&&this.#s.classList.add("focused"):(this.#M(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#x(){this.#s.classList.remove("focused"),!(this.#c||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#s.hidden=!0)}maybeShow(){this.#b&&(this.#f||this.#R(),this.#b=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class _y extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=yt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class lE extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class oE extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),l=t.borderStyle.width,u=this.#t=this.svgFactory.createElement("svg:rect");return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",n-l),u.setAttribute("height",s-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),r.append(u),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class uE extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),l=t.borderStyle.width,u=this.#t=this.svgFactory.createElement("svg:ellipse");return u.setAttribute("cx",n/2),u.setAttribute("cy",s/2),u.setAttribute("rx",n/2-l/2),u.setAttribute("ry",s/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),r.append(u),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class wy extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:r},width:l,height:u}=this;if(!n)return this.container;const c=this.svgFactory.create(l,u,!0);let d=[];for(let g=0,y=n.length;g<y;g+=2){const b=n[g]-t[0],v=t[3]-n[g+1];d.push(`${b},${v}`)}d=d.join(" ");const p=this.#t=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",d),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),c.append(p),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class cE extends wy{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class hE extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Uh extends ie{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?yt.HIGHLIGHT:yt.INK}#n(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:r,popupRef:l}}=this,{transform:u,width:c,height:d}=this.#n(n,t),p=this.svgFactory.create(c,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");p.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let y=0,b=s.length;y<b;y++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",s[y].join(",")),g.append(v)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:r}=t,l=this.#t;if(n>=0&&l.setAttribute("stroke-width",n||1),s)for(let u=0,c=this.#e.length;u<c;u++)this.#e[u].setAttribute("points",s[u].join(","));if(r){const{transform:u,width:c,height:d}=this.#n(this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ty extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=yt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class dE extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class fE extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pE extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class xy extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=yt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class gE extends ie{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=Ee.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let jh=class Cy{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:r,page:l,viewport:u,structTreeLayer:c}){this.div=t,this.#t=n,this.#e=s,this.#i=c||null,this.page=l,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}async#a(t,n){const s=t.firstChild||t,r=s.id=`${Ch}${n}`,l=await this.#i?.getAriaAttributes(r);if(l)for(const[u,c]of l)s.setAttribute(u,c);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,s,!1)}async render(t){const{annotations:n}=t,s=this.div;Oi(s,this.viewport);const r=new Map,l={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Er,annotationStorage:t.annotationStorage||new Oh,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of n){if(u.noHTML)continue;const c=u.annotationType===te.POPUP;if(c){const g=r.get(u.id);if(!g)continue;l.elements=g}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;l.data=u;const d=vm.create(l);if(!d.isRenderable)continue;if(!c&&u.popupRef){const g=r.get(u.popupRef);g?g.push(d):r.set(u.popupRef,[d])}const p=d.render();u.hidden&&(p.style.visibility="hidden"),await this.#a(p,u.id),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#s()}async addLinkAnnotations(t,n){const s={data:null,layer:this.div,linkService:n,svgFactory:new Er,parent:this};for(const r of t){r.borderStyle||=Cy._defaultBorderStyle,s.data=r;const l=vm.create(s);if(!l.isRenderable)continue;const u=l.render();await this.#a(u,r.id)}}update({viewport:t}){const n=this.div;this.viewport=t,Oi(n,{rotation:t.rotation}),this.#s(),n.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[n,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):r.append(s);const u=this.#n.get(n);u&&(u._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,r.id,s),u._hasNoCanvas=!1):u.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return xt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ks.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const so=/\r\n?|\n/g;class ge extends ct{#t;#e="";#n=`${this.id}-editor`;#i=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ge.prototype,n=l=>l.isEmpty(),s=ii.TRANSLATE_SMALL,r=ii.TRANSLATE_BIG;return xt(this,"_keyboardManager",new Dr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static _type="freetext";static _editorType=yt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||ge._defaultColor||ct._defaultLineColor,this.#a=t.fontSize||ge._defaultFontSize}static initialize(t,n){ct.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ct.FREETEXT_SIZE:ge._defaultFontSize=n;break;case Ct.FREETEXT_COLOR:ge._defaultColor=n;break}}updateParams(t,n){switch(t){case Ct.FREETEXT_SIZE:this.#s(n);break;case Ct.FREETEXT_COLOR:this.#o(n);break}}static get defaultPropertiesToUpdate(){return[[Ct.FREETEXT_SIZE,ge._defaultFontSize],[Ct.FREETEXT_COLOR,ge._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[Ct.FREETEXT_SIZE,this.#a],[Ct.FREETEXT_COLOR,this.#t]]}#s(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#a)*this.parentScale),this.#a=r,this.#h()},s=this.#a;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const n=r=>{this.#t=this.editorDiv.style.color=r},s=this.#t;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ge._internalPadding*t,-(ge._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#l(){const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(ge.#u(s)),n=s);return t.join(`
`)}#h(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,u=l.style.display,c=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,n=this.#e=this.#l().trimEnd();if(t===n)return;const s=r=>{if(this.#e=r,!r){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ge._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[p,g]=this.pageDimensions,[y,b]=this.pageTranslation;let v,E;switch(this.rotation){case 0:v=t+(u[0]-y)/p,E=n+this.height-(u[1]-b)/g;break;case 90:v=t+(u[0]-y)/p,E=n-(u[1]-b)/g,[c,d]=[d,-c];break;case 180:v=t-this.width+(u[0]-y)/p,E=n-(u[1]-b)/g,[c,d]=[-c,-d];break;case 270:v=t+(u[0]-y-this.height*g)/p,E=n+(u[1]-b-this.width*p)/g,[c,d]=[-d,c];break}this.setAt(v*r,E*l,c,d)}else this._moveAfterPaste(t,n);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(so,"")}editorDivPaste(t){const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=ge.#f(n.getData("text")||"").replaceAll(so,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!r.includes(`
`)){u.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:c,startOffset:d}=u,p=[],g=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(g.push(c.nodeValue.slice(d).replaceAll(so,"")),v!==this.editorDiv){let E=p;for(const S of this.editorDiv.childNodes){if(S===v){E=g;continue}E.push(ge.#u(S))}}p.push(c.nodeValue.slice(0,d).replaceAll(so,""))}else if(c===this.editorDiv){let v=p,E=0;for(const S of this.editorDiv.childNodes)E++===d&&(v=g),v.push(ge.#u(S))}this.#e=`${p.join(`
`)}${r}${g.join(`
`)}`,this.#d();const y=new Range;let b=Math.sumPrecise(p.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const E=v.nodeValue.length;if(b<=E){y.setStart(v,b),y.setEnd(v,b);break}b-=E}l.removeAllRanges(),l.addRange(y)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}#c(){return this.#e.replaceAll(" "," ")}static#f(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(t,n,s){let r=null;if(t instanceof _y){const{data:{defaultAppearanceData:{fontSize:u,fontColor:c},rect:d,rotation:p,id:g,popupRef:y},textContent:b,textPosition:v,parent:{page:{pageNumber:E}}}=t;if(!b||b.length===0)return null;r=t={annotationType:yt.FREETEXT,color:Array.from(c),fontSize:u,value:b.join(`
`),position:v,pageIndex:E-1,rect:d.slice(0),rotation:p,id:g,deleted:!1,popupRef:y}}const l=await super.deserialize(t,n,s);return l.#a=t.fontSize,l.#t=ot.makeHexColor(...t.color),l.#e=ge.#f(t.value),l.annotationElementId=t.id||null,l._initialData=r,l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ge._internalPadding*this.parentScale,s=this.getRect(n,n),r=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),l={annotationType:yt.FREETEXT,color:r,fontSize:this.#a,value:this.#c(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(l.isCopy=!0,l):this.annotationElementId&&!this.#r(l)?null:(l.id=this.annotationElementId,l)}#r(t){const{value:n,fontSize:s,color:r,pageIndex:l}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((u,c)=>u!==r[c])||t.pageIndex!==l}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#t,n.replaceChildren();for(const l of this.#e.split(`
`)){const u=document.createElement("div");u.append(l?document.createTextNode(l):document.createElement("br")),n.append(u)}const r=ge._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){It("Abstract method `toSVGPath` must be implemented.")}get box(){It("Abstract getter `box` must be implemented.")}serialize(t,n){It("Abstract method `serialize` must be implemented.")}static _rescale(t,n,s,r,l,u){u||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)u[c]=n+t[c]*r,u[c+1]=s+t[c+1]*l;return u}static _rescaleAndSwap(t,n,s,r,l,u){u||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)u[c]=n+t[c+1]*r,u[c+1]=s+t[c]*l;return u}static _translate(t,n,s,r){r||=new Float32Array(t.length);for(let l=0,u=t.length;l<u;l+=2)r[l]=n+t[l],r[l+1]=s+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,s,r,l){switch(l){case 90:return[1-n/s,t/r];case 180:return[1-t/s,1-n/r];case 270:return[n/s,1-t/r];default:return[t/s,n/r]}}static _normalizePagePoint(t,n,s){switch(s){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,s,r,l,u){return[(t+5*s)/6,(n+5*r)/6,(5*s+l)/6,(5*r+u)/6,(s+l)/2,(r+u)/2]}}class ts{#t;#e=[];#n;#i;#a=[];#s=new Float32Array(18);#o;#l;#h;#u;#d;#c;#f=[];static#r=8;static#p=2;static#m=ts.#r+ts.#p;constructor({x:t,y:n},s,r,l,u,c=0){this.#t=s,this.#c=l*r,this.#i=u,this.#s.set([NaN,NaN,NaN,NaN,t,n],6),this.#n=c,this.#u=ts.#r*r,this.#h=ts.#m*r,this.#d=r,this.#f.push(t,n)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[s,r,l,u]=this.#t;return[(this.#o+(t[0]-n[0])/2-s)/l,(this.#l+(t[1]-n[1])/2-r)/u,(this.#o+(n[0]-t[0])/2-s)/l,(this.#l+(n[1]-t[1])/2-r)/u]}add({x:t,y:n}){this.#o=t,this.#l=n;const[s,r,l,u]=this.#t;let[c,d,p,g]=this.#s.subarray(8,12);const y=t-p,b=n-g,v=Math.hypot(y,b);if(v<this.#h)return!1;const E=v-this.#u,S=E/v,T=S*y,w=S*b;let L=c,C=d;c=p,d=g,p+=T,g+=w,this.#f?.push(t,n);const N=-w/E,M=T/E,I=N*this.#c,H=M*this.#c;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([p+I,g+H],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([p-I,g-H],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([c+I,d+H],2),this.#a.push(NaN,NaN,NaN,NaN,(c+I-s)/l,(d+H-r)/u),this.#s.set([c-I,d-H],14),this.#e.push(NaN,NaN,NaN,NaN,(c-I-s)/l,(d-H-r)/u)),this.#s.set([L,C,c,d,p,g],6),!this.isEmpty()):(this.#s.set([L,C,c,d,p,g],6),Math.abs(Math.atan2(C-d,L-c)-Math.atan2(w,T))<Math.PI/2?([c,d,p,g]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((c+p)/2-s)/l,((d+g)/2-r)/u),[c,d,L,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((L+c)/2-s)/l,((C+d)/2-r)/u),!0):([L,C,c,d,p,g]=this.#s.subarray(0,6),this.#a.push(((L+5*c)/6-s)/l,((C+5*d)/6-r)/u,((5*c+p)/6-s)/l,((5*d+g)/6-r)/u,((c+p)/2-s)/l,((d+g)/2-r)/u),[p,g,c,d,L,C]=this.#s.subarray(12,18),this.#e.push(((L+5*c)/6-s)/l,((C+5*d)/6-r)/u,((5*c+p)/6-s)/l,((5*d+g)/6-r)/u,((c+p)/2-s)/l,((d+g)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,n=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#v(s);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?s.push(`L${n[r+4]} ${n[r+5]}`):s.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return this.#b(s),s.join(" ")}#y(){const[t,n,s,r]=this.#t,[l,u,c,d]=this.#g();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-n)/r} L${(this.#s[4]-t)/s} ${(this.#s[5]-n)/r} L${l} ${u} L${c} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-n)/r} L${(this.#s[14]-t)/s} ${(this.#s[15]-n)/r} Z`}#b(t){const n=this.#e;t.push(`L${n[4]} ${n[5]} Z`)}#v(t){const[n,s,r,l]=this.#t,u=this.#s.subarray(4,6),c=this.#s.subarray(16,18),[d,p,g,y]=this.#g();t.push(`L${(u[0]-n)/r} ${(u[1]-s)/l} L${d} ${p} L${g} ${y} L${(c[0]-n)/r} ${(c[1]-s)/l}`)}newFreeDrawOutline(t,n,s,r,l,u){return new Ry(t,n,s,r,l,u)}getOutlines(){const t=this.#a,n=this.#e,s=this.#s,[r,l,u,c]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-r)/u,d[y+1]=(this.#f[y+1]-l)/c;if(d[d.length-2]=(this.#o-r)/u,d[d.length-1]=(this.#l-l)/c,isNaN(s[6])&&!this.isEmpty())return this.#S(d);const p=new Float32Array(this.#a.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){p[y]=p[y+1]=NaN;continue}p[y]=t[y],p[y+1]=t[y+1]}g=this.#T(p,g);for(let y=n.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(n[y+b])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=n[y+b],p[g+1]=n[y+b+1],g+=2}return this.#_(p,g),this.newFreeDrawOutline(p,d,this.#t,this.#d,this.#n,this.#i)}#S(t){const n=this.#s,[s,r,l,u]=this.#t,[c,d,p,g]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(n[2]-s)/l,(n[3]-r)/u,NaN,NaN,NaN,NaN,(n[4]-s)/l,(n[5]-r)/u,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(n[16]-s)/l,(n[17]-r)/u,NaN,NaN,NaN,NaN,(n[14]-s)/l,(n[15]-r)/u],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#_(t,n){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],n),n+=6}#T(t,n){const s=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[l,u,c,d]=this.#t,[p,g,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-l)/c,(s[1]-u)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-l)/c,(r[1]-u)/d],n),n+=24}}class Ry extends et{#t;#e=new Float32Array(4);#n;#i;#a;#s;#o;constructor(t,n,s,r,l,u){super(),this.#o=t,this.#a=n,this.#t=s,this.#s=r,this.#n=l,this.#i=u,this.lastPoint=[NaN,NaN],this.#l(u);const[c,d,p,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-c)/p,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=n.length;y<b;y+=2)n[y]=(n[y]-c)/p,n[y+1]=(n[y+1]-d)/g}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let n=6,s=this.#o.length;n<s;n+=6){if(isNaN(this.#o[n])){t.push(`L${this.#o[n+4]} ${this.#o[n+5]}`);continue}t.push(`C${this.#o[n]} ${this.#o[n+1]} ${this.#o[n+2]} ${this.#o[n+3]} ${this.#o[n+4]} ${this.#o[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,r],l){const u=s-t,c=r-n;let d,p;switch(l){case 0:d=et._rescale(this.#o,t,r,u,-c),p=et._rescale(this.#a,t,r,u,-c);break;case 90:d=et._rescaleAndSwap(this.#o,t,n,u,c),p=et._rescaleAndSwap(this.#a,t,n,u,c);break;case 180:d=et._rescale(this.#o,s,n,-u,c),p=et._rescale(this.#a,s,n,-u,c);break;case 270:d=et._rescaleAndSwap(this.#o,s,r,-u,-c),p=et._rescaleAndSwap(this.#a,s,r,-u,-c);break}return{outline:Array.from(d),points:[Array.from(p)]}}#l(t){const n=this.#o;let s=n[4],r=n[5];const l=[s,r,s,r];let u=s,c=r;const d=t?Math.max:Math.min;for(let g=6,y=n.length;g<y;g+=6){const b=n[g+4],v=n[g+5];if(isNaN(n[g]))ot.pointBoundingBox(b,v,l),c<v?(u=b,c=v):c===v&&(u=d(u,b));else{const E=[1/0,1/0,-1/0,-1/0];ot.bezierBoundingBox(s,r,...n.slice(g,g+6),E),ot.rectBoundingBox(...E,l),c<E[3]?(u=E[2],c=E[3]):c===E[3]&&(u=d(u,E[2]))}s=b,r=v}const p=this.#e;p[0]=l[0]-this.#n,p[1]=l[1]-this.#n,p[2]=l[2]-l[0]+2*this.#n,p[3]=l[3]-l[1]+2*this.#n,this.lastPoint=[u,c]}get box(){return this.#e}newOutliner(t,n,s,r,l,u=0){return new ts(t,n,s,r,l,u)}getNewOutline(t,n){const[s,r,l,u]=this.#e,[c,d,p,g]=this.#t,y=l*p,b=u*g,v=s*p+c,E=r*g+d,S=this.newOutliner({x:this.#a[0]*y+v,y:this.#a[1]*b+E},this.#t,this.#s,t,this.#i,n??this.#n);for(let T=2;T<this.#a.length;T+=2)S.add({x:this.#a[T]*y+v,y:this.#a[T+1]*b+E});return S.getOutlines()}}class fh{#t;#e;#n=[];#i=[];constructor(t,n=0,s=0,r=!0){const l=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:v,y:E,width:S,height:T}of t){const w=Math.floor((v-n)/u)*u,L=Math.ceil((v+S+n)/u)*u,C=Math.floor((E-n)/u)*u,N=Math.ceil((E+T+n)/u)*u,M=[w,C,N,!0],I=[L,C,N,!1];this.#n.push(M,I),ot.rectBoundingBox(w,C,L,N,l)}const c=l[2]-l[0]+2*s,d=l[3]-l[1]+2*s,p=l[0]-s,g=l[1]-s,y=this.#n.at(r?-1:-2),b=[y[0],y[2]];for(const v of this.#n){const[E,S,T]=v;v[0]=(E-p)/c,v[1]=(S-g)/d,v[2]=(T-g)/d}this.#t=new Float32Array([p,g,c,d]),this.#e=b}getOutlines(){this.#n.sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const t=[];for(const n of this.#n)n[3]?(t.push(...this.#h(n)),this.#o(n)):(this.#l(n),t.push(...this.#h(n)));return this.#a(t)}#a(t){const n=[],s=new Set;for(const u of t){const[c,d,p]=u;n.push([c,d,u],[c,p,u])}n.sort((u,c)=>u[1]-c[1]||u[0]-c[0]);for(let u=0,c=n.length;u<c;u+=2){const d=n[u][2],p=n[u+1][2];d.push(p),p.push(d),s.add(d),s.add(p)}const r=[];let l;for(;s.size>0;){const u=s.values().next().value;let[c,d,p,g,y]=u;s.delete(u);let b=c,v=d;for(l=[c,p],r.push(l);;){let E;if(s.has(g))E=g;else if(s.has(y))E=y;else break;s.delete(E),[c,d,p,g,y]=E,b!==c&&(l.push(b,v,c,v===d?d:p),b=c),v=v===d?p:d}l.push(b,v)}return new mE(r,this.#t,this.#e)}#s(t){const n=this.#i;let s=0,r=n.length-1;for(;s<=r;){const l=s+r>>1,u=n[l][0];if(u===t)return l;u<t?s=l+1:r=l-1}return r+1}#o([,t,n]){const s=this.#s(t);this.#i.splice(s,0,[t,n])}#l([,t,n]){const s=this.#s(t);for(let r=s;r<this.#i.length;r++){const[l,u]=this.#i[r];if(l!==t)break;if(l===t&&u===n){this.#i.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[l,u]=this.#i[r];if(l!==t)break;if(l===t&&u===n){this.#i.splice(r,1);return}}}#h(t){const[n,s,r]=t,l=[[n,s,r]],u=this.#s(r);for(let c=0;c<u;c++){const[d,p]=this.#i[c];for(let g=0,y=l.length;g<y;g++){const[,b,v]=l[g];if(!(p<=b||v<=d)){if(b>=d){if(v>p)l[g][1]=p;else{if(y===1)return[];l.splice(g,1),g--,y--}continue}l[g][2]=d,v>p&&l.push([n,p,v])}}}return l}}class mE extends et{#t;#e;constructor(t,n,s){super(),this.#e=t,this.#t=n,this.lastPoint=s}toSVGPath(){const t=[];for(const n of this.#e){let[s,r]=n;t.push(`M${s} ${r}`);for(let l=2;l<n.length;l+=2){const u=n[l],c=n[l+1];u===s?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${u}`),s=u)}t.push("Z")}return t.join(" ")}serialize([t,n,s,r],l){const u=[],c=s-t,d=r-n;for(const p of this.#e){const g=new Array(p.length);for(let y=0;y<p.length;y+=2)g[y]=t+p[y]*c,g[y+1]=r-p[y+1]*d;u.push(g)}return u}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class ph extends ts{newFreeDrawOutline(t,n,s,r,l,u){return new yE(t,n,s,r,l,u)}}class yE extends Ry{newOutliner(t,n,s,r,l,u=0){return new ph(t,n,s,r,l,u)}}class en{#t=null;#e=null;#n;#i=null;#a=!1;#s=!1;#o=null;#l;#h=null;#u=null;#d;static#c=null;static get _keyboardManager(){return xt(this,"_keyboardManager",new Dr([[["Escape","mac+Escape"],en.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],en.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],en.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],en.prototype._moveToPrevious],[["Home","mac+Home"],en.prototype._moveToBeginning],[["End","mac+End"],en.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#s=!1,this.#d=Ct.HIGHLIGHT_COLOR,this.#o=t):(this.#s=!0,this.#d=Ct.HIGHLIGHT_DEFAULT_COLOR),this.#u=t?._uiManager||n,this.#l=this.#u._eventBus,this.#n=t?.color||this.#u?.highlightColors.values().next().value||"#FFFF98",en.#c||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const n=this.#u._signal;t.addEventListener("click",this.#m.bind(this),{signal:n}),t.addEventListener("keydown",this.#p.bind(this),{signal:n});const s=this.#e=document.createElement("span");return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#f();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#f(){const t=document.createElement("div"),n=this.#u._signal;t.addEventListener("contextmenu",gn,{signal:n}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,r]of this.#u.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=s,l.setAttribute("data-l10n-id",en.#c[s]);const u=document.createElement("span");l.append(u),u.className="swatch",u.style.backgroundColor=r,l.setAttribute("aria-selected",r===this.#n),l.addEventListener("click",this.#r.bind(this,r),{signal:n}),t.append(l)}return t.addEventListener("keydown",this.#p.bind(this),{signal:n}),t}#r(t,n){n.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const n=t.target.getAttribute("data-color");n&&this.#r(n,t)}_moveToNext(t){if(!this.#y){this.#m(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#m(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#m(t);return}this.#i.lastChild?.focus()}#p(t){en._keyboardManager.exec(this,t)}#m(t){if(this.#y){this.hideDropdown();return}if(this.#a=t.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#u.combinedSignal(this.#h)})),this.#i){this.#i.classList.remove("hidden");return}const n=this.#i=this.#f();this.#t.append(n)}#g(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#h?.abort(),this.#h=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const n=this.#u.highlightColors.values();for(const s of this.#i.children)s.setAttribute("aria-selected",n.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class ee extends ct{#t=null;#e=0;#n;#i=null;#a=null;#s=null;#o=null;#l=0;#h=null;#u=null;#d=null;#c=!1;#f=null;#r;#p=null;#m="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=yt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ee.prototype;return xt(this,"_keyboardManager",new Dr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ee._defaultColor,this.#g=t.thickness||ee._defaultThickness,this.#r=t.opacity||ee._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#m=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#c=!0,this.#v(t),this.#M()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#l=t.focusOffset,this.#b(),this.#M(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#c?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new fh(this.#n,.001);this.#u=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#u.box;const n=new fh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=n.getOutlines();const{lastPoint:s}=this.#s;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:n,clipPathId:s}){this.#u=t;const r=1.5;if(this.#s=t.getNewOutline(this.#g/2+r,.0025),n>=0)this.#d=n,this.#i=s,this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ee.#E(this.#u.box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ee.#E(this.#s.box,g),path:{d:this.#s.toSVGPath()}})}const[l,u,c,d]=t.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=c,this.height=d;break;case 90:{const[g,y]=this.parentDimensions;this.x=u,this.y=1-l,this.width=c*y/g,this.height=d*g/y;break}case 180:this.x=1-l,this.y=1-u,this.width=c,this.height=d;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-u,this.y=l,this.width=c*y/g,this.height=d*g/y;break}}const{lastPoint:p}=this.#s;this.#f=[(p[0]-l)/c,(p[1]-u)/d]}static initialize(t,n){ct.initialize(t,n),ee._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,n){switch(t){case Ct.HIGHLIGHT_DEFAULT_COLOR:ee._defaultColor=n;break;case Ct.HIGHLIGHT_THICKNESS:ee._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return this.#f}updateParams(t,n){switch(t){case Ct.HIGHLIGHT_COLOR:this.#S(n);break;case Ct.HIGHLIGHT_THICKNESS:this.#_(n);break}}static get defaultPropertiesToUpdate(){return[[Ct.HIGHLIGHT_DEFAULT_COLOR,ee._defaultColor],[Ct.HIGHLIGHT_THICKNESS,ee._defaultThickness]]}get propertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,this.color||ee._defaultColor],[Ct.HIGHLIGHT_THICKNESS,this.#g||ee._defaultThickness],[Ct.HIGHLIGHT_FREE,this.#c]]}#S(t){const n=(l,u)=>{this.color=l,this.#r=u,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:l,"fill-opacity":u}}),this.#a?.updateColor(l)},s=this.color,r=this.#r;this.addCommands({cmd:n.bind(this,t,ee._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#_(t){const n=this.#g,s=r=>{this.#g=r,this.#T(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#a=new en({editor:this}),t.addColorPicker(this.#a)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#L())}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,this.#L())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?this.#C():t&&(this.#M(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}#T(t){if(!this.#c)return;this.#v({highlightOutlines:this.#u.getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#M(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#u.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#r},rootClass:{highlight:!0,free:this.#c},path:{d:this.#u.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#c},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#c),this.#h&&(this.#h.style.clipPath=this.#i))}static#E([t,n,s,r],l){switch(l){case 90:return[1-n-r,t,r,s];case 180:return[1-t-s,1-n-r,s,r];case 270:return[n,1-t-s,r,s]}return[t,n,s,r]}rotate(t){const{drawLayer:n}=this.parent;let s;this.#c?(t=(t-this.rotation+360)%360,s=ee.#E(this.#u.box,t)):s=ee.#E([this.x,this.y,this.width,this.height],t),n.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(this.#p,{bbox:ee.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#m&&(t.setAttribute("aria-label",this.#m),t.setAttribute("role","mark")),this.#c?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const n=this.#h=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#i;const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),ny(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(t){ee._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#x(!0);break;case 1:case 3:this.#x(!1);break}}#x(t){if(!this.#t)return;const n=window.getSelection();t?n.setPosition(this.#t,this.#e):n.setPosition(this.#o,this.#l)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#c||this.#x(!1))}get _mustFixPosition(){return!this.#c}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#L(){return this.#c?this.rotation:0}#O(){if(this.#c)return null;const[t,n]=this.pageDimensions,[s,r]=this.pageTranslation,l=this.#n,u=new Float32Array(l.length*8);let c=0;for(const{x:d,y:p,width:g,height:y}of l){const b=d*t+s,v=(1-p)*n+r;u[c]=u[c+4]=b,u[c+1]=u[c+3]=v,u[c+2]=u[c+6]=b+g*t,u[c+5]=u[c+7]=v-y*n,c+=8}return u}#N(t){return this.#u.serialize(t,this.#L())}static startHighlighting(t,n,{target:s,x:r,y:l}){const{x:u,y:c,width:d,height:p}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=v=>{g.abort(),this.#w(t,v)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",gn,{signal:y}),s.addEventListener("pointermove",this.#F.bind(this,t),{signal:y}),this._freeHighlight=new ph({x:r,y:l},[u,c,d,p],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#F(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#w(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,n,s){let r=null;if(t instanceof Ty){const{data:{quadPoints:E,rect:S,rotation:T,id:w,color:L,opacity:C,popupRef:N},parent:{page:{pageNumber:M}}}=t;r=t={annotationType:yt.HIGHLIGHT,color:Array.from(L),opacity:C,quadPoints:E,boxes:null,pageIndex:M-1,rect:S.slice(0),rotation:T,id:w,deleted:!1,popupRef:N}}else if(t instanceof Uh){const{data:{inkLists:E,rect:S,rotation:T,id:w,color:L,borderStyle:{rawWidth:C},popupRef:N},parent:{page:{pageNumber:M}}}=t;r=t={annotationType:yt.HIGHLIGHT,color:Array.from(L),thickness:C,inkLists:E,boxes:null,pageIndex:M-1,rect:S.slice(0),rotation:T,id:w,deleted:!1,popupRef:N}}const{color:l,quadPoints:u,inkLists:c,opacity:d}=t,p=await super.deserialize(t,n,s);p.color=ot.makeHexColor(...l),p.#r=d||1,c&&(p.#g=t.thickness),p.annotationElementId=t.id||null,p._initialData=r;const[g,y]=p.pageDimensions,[b,v]=p.pageTranslation;if(u){const E=p.#n=[];for(let S=0;S<u.length;S+=8)E.push({x:(u[S]-b)/g,y:1-(u[S+1]-v)/y,width:(u[S+2]-u[S])/g,height:(u[S+1]-u[S+5])/y});p.#b(),p.#M(),p.rotate(p.rotation)}else if(c){p.#c=!0;const E=c[0],S={x:E[0]-b,y:y-(E[1]-v)},T=new ph(S,[0,0,g,y],1,p.#g/2,!0,.001);for(let C=0,N=E.length;C<N;C+=2)S.x=E[C]-b,S.y=y-(E[C+1]-v),T.add(S);const{id:w,clipPathId:L}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);p.#v({highlightOutlines:T.getOutlines(),highlightId:w,clipPathId:L}),p.#M(),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=ct._colorManager.convert(this.color),r={annotationType:yt.HIGHLIGHT,color:s,opacity:this.#r,thickness:this.#g,quadPoints:this.#O(),outlines:this.#N(n),pageIndex:this.pageIndex,rect:n,rotation:this.#L(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#A(r)?null:(r.id=this.annotationElementId,r)}#A(t){const{color:n}=this._initialData;return t.color.some((s,r)=>s!==n[r])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class My{#t=Object.create(null);updateProperty(t,n){this[t]=n,this.updateSVGProperty(t,n)}updateProperties(t){if(t)for(const[n,s]of Object.entries(t))n.startsWith("_")||this.updateProperty(n,s)}updateSVGProperty(t,n){this.#t[t]=n}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){It("Not implemented")}}class ft extends ct{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static#s=NaN;static#o=null;static#l=null;static#h=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#u(t),this.#f())}#u({drawOutlines:t,drawId:n,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#m(t.box)}#d(t,n){const{id:s}=n.drawLayer.draw(ft._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[r,l]of Object.entries(n))s.has(r)?Object.assign(t[r],l):t[r]=l;return t}static getDefaultDrawingOptions(t){It("Not implemented")}static get typesMap(){It("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(ft.#n.updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,n[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,n[r]]);return t}_updateProperty(t,n,s){const r=this._drawingOptions,l=r[n],u=c=>{r.updateProperty(n,c);const d=this.#t.updateProperty(n,c);d&&this.#m(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:u.bind(this,s),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#c(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#m(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#c()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}#c(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#r([t,n,s,r]){const{parentDimensions:[l,u],rotation:c}=this;switch(c){case 90:return[n,1-t,s*(u/l),r*(l/u)];case 180:return[1-t,1-n,s,r];case 270:return[1-n,t,s*(u/l),r*(l/u)];default:return[t,n,s,r]}}#p(){const{x:t,y:n,width:s,height:r,parentDimensions:[l,u],rotation:c}=this;switch(c){case 90:return[1-n,t,s*(l/u),r*(u/l)];case 180:return[1-t,1-n,s,r];case 270:return[n,1-t,s*(l/u),r*(u/l)];default:return[t,n,s,r]}}#m(t){if([this.x,this.y,this.width,this.height]=this.#r(t),this.div){this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}this._onResized()}#g(){const{x:t,y:n,width:s,height:r,rotation:l,parentRotation:u,parentDimensions:[c,d]}=this;switch((l*4+u)/90){case 1:return[1-n-r,t,r,s];case 2:return[1-t-s,1-n-r,s,r];case 3:return[n,1-t-s,r,s];case 4:return[t,n-s*(c/d),r*(d/c),s*(c/d)];case 5:return[1-n,t,s*(c/d),r*(d/c)];case 6:return[1-t-r*(d/c),1-n,r*(d/c),s*(c/d)];case 7:return[n-s*(c/d),1-t-r*(d/c),s*(c/d),r*(d/c)];case 8:return[t-s,n-r,s,r];case 9:return[1-n,t-s,r,s];case 10:return[1-t,1-n,s,r];case 11:return[n-r,1-t,r,s];case 12:return[t-r*(d/c),n,r*(d/c),s*(c/d)];case 13:return[1-n-s*(c/d),t-r*(d/c),s*(c/d),r*(d/c)];case 14:return[1-t,1-n-s*(c/d),r*(d/c),s*(c/d)];case 15:return[n,1-t,s*(c/d),r*(d/c)];default:return[t,n,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[l,u]=this.parentDimensions;return this.setDims(this.width*l,this.height*u),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,r,l){It("Not implemented")}static startDrawing(t,n,s,r){const{target:l,offsetX:u,offsetY:c,pointerId:d,pointerType:p}=r;if(ft.#o&&ft.#o!==p)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=l.getBoundingClientRect(),v=ft.#i=new AbortController,E=t.combinedSignal(v);if(ft.#s||=d,ft.#o??=p,window.addEventListener("pointerup",S=>{ft.#s===S.pointerId?this._endDraw(S):ft.#l?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointercancel",S=>{ft.#s===S.pointerId?this._currentParent.endDrawingSession():ft.#l?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointerdown",S=>{ft.#o===S.pointerType&&((ft.#l||=new Set).add(S.pointerId),ft.#n.isCancellable()&&(ft.#n.removeLastElement(),ft.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",gn,{signal:E}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),l.addEventListener("touchmove",S=>{S.timeStamp===ft.#h&&ne(S)},{signal:E}),t.toggleDrawing(),n._editorUndoBar?.hide(),ft.#n){t.drawLayer.updateProperties(this._currentDrawId,ft.#n.startNew(u,c,y,b,g));return}n.updateUIForDefaultProperties(this),ft.#n=this.createDrawerInstance(u,c,y,b,g),ft.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ft.#a.toSVGProperties(),ft.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ft.#h=-1,!ft.#n)return;const{offsetX:n,offsetY:s,pointerId:r}=t;if(ft.#s===r){if(ft.#l?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ft.#n.add(n,s)),ft.#h=t.timeStamp,ne(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ft.#n=null,ft.#a=null,ft.#o=null,ft.#h=NaN),ft.#i&&(ft.#i.abort(),ft.#i=null,ft.#s=NaN,ft.#l=null)}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,ft.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=ft.#n,r=this._currentDrawId,l=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,s.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ct.DRAW_STEP),!ft.#n.isEmpty()){const{pageDimensions:[s,r],scale:l}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ft.#n.getOutlines(s*l,r*l,l,this._INNER_MARGIN),drawingOptions:ft.#a,mustBeCommitted:!t});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,r,l,u){It("Not implemented")}static async deserialize(t,n,s){const{rawDims:{pageWidth:r,pageHeight:l,pageX:u,pageY:c}}=n.viewport,d=this.deserializeDraw(u,c,r,l,this._INNER_MARGIN,t),p=await super.deserialize(t,n,s);return p.createDrawingOptions(t),p.#u({drawOutlines:d}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[n,s]=this.pageTranslation,[r,l]=this.pageDimensions;return this.#t.serialize([n,s,r,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class bE{#t=new Float64Array(6);#e;#n;#i;#a;#s;#o="";#l=0;#h=new kr;#u;#d;constructor(t,n,s,r,l,u){this.#u=s,this.#d=r,this.#i=l,this.#a=u,[t,n]=this.#c(t,n);const c=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n],this.#n=[{line:c,points:this.#s}],this.#t.set(c,0)}updateProperty(t,n){t==="stroke-width"&&(this.#a=n)}#c(t,n){return et._normalizePoint(t,n,this.#u,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,n){[t,n]=this.#c(t,n);const[s,r,l,u]=this.#t.subarray(2,6),c=t-l,d=n-u;return Math.hypot(this.#u*c,this.#d*d)<=2?null:(this.#s.push(t,n),isNaN(s)?(this.#t.set([l,u,t,n],2),this.#e.push(NaN,NaN,NaN,NaN,t,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,l,u,t,n],0),this.#e.push(...et.createBezierPoints(s,r,l,u,t,n)),{path:{d:this.toSVGPath()}}))}end(t,n){const s=this.add(t,n);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,n,s,r,l){this.#u=s,this.#d=r,this.#i=l,[t,n]=this.#c(t,n);const u=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n];const c=this.#n.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#n.push({line:u,points:this.#s}),this.#t.set(u,0),this.#l=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#l=0,{path:{d:this.toSVGPath()}}):this.#h.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#h.removeLastElement();this.#n.pop(),this.#o="";for(let t=0,n=this.#n.length;t<n;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#s=r,this.#l=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const t=et.svgRound(this.#e[4]),n=et.svgRound(this.#e[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${t} ${n} Z`,this.#o;if(this.#s.length<=6){const r=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,r)} M ${t} ${n}`,this.#l=6}if(this.#s.length===4){const r=et.svgRound(this.#e[10]),l=et.svgRound(this.#e[11]);return this.#o=`${this.#o} L ${r} ${l}`,this.#l=12,this.#o}const s=[];this.#l===0&&(s.push(`M ${t} ${n}`),this.#l=6);for(let r=this.#l,l=this.#e.length;r<l;r+=6){const[u,c,d,p,g,y]=this.#e.slice(r,r+6).map(et.svgRound);s.push(`C${u} ${c} ${d} ${p} ${g} ${y}`)}return this.#o+=s.join(" "),this.#l=this.#e.length,this.#o}getOutlines(t,n,s,r){const l=this.#n.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#h.build(this.#n,t,n,s,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#o=null,this.#h}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class kr extends et{#t;#e=0;#n;#i;#a;#s;#o;#l;#h;build(t,n,s,r,l,u,c){this.#a=n,this.#s=s,this.#o=r,this.#l=l,this.#h=u,this.#n=c??0,this.#i=t,this.#c()}get thickness(){return this.#h}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of this.#i){if(t.push(`M${et.svgRound(n[4])} ${et.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${et.svgRound(n[10])} ${et.svgRound(n[11])}`);continue}for(let s=6,r=n.length;s<r;s+=6){const[l,u,c,d,p,g]=n.subarray(s,s+6).map(et.svgRound);t.push(`C${l} ${u} ${c} ${d} ${p} ${g}`)}}return t.join("")}serialize([t,n,s,r],l){const u=[],c=[],[d,p,g,y]=this.#d();let b,v,E,S,T,w,L,C,N;switch(this.#l){case 0:N=et._rescale,b=t,v=n+r,E=s,S=-r,T=t+d*s,w=n+(1-p-y)*r,L=t+(d+g)*s,C=n+(1-p)*r;break;case 90:N=et._rescaleAndSwap,b=t,v=n,E=s,S=r,T=t+p*s,w=n+d*r,L=t+(p+y)*s,C=n+(d+g)*r;break;case 180:N=et._rescale,b=t+s,v=n,E=-s,S=r,T=t+(1-d-g)*s,w=n+p*r,L=t+(1-d)*s,C=n+(p+y)*r;break;case 270:N=et._rescaleAndSwap,b=t+s,v=n+r,E=-s,S=-r,T=t+(1-p-y)*s,w=n+(1-d-g)*r,L=t+(1-p)*s,C=n+(1-d)*r;break}for(const{line:M,points:I}of this.#i)u.push(N(M,b,v,E,S,l?new Array(M.length):null)),c.push(N(I,b,v,E,S,l?new Array(I.length):null));return{lines:u,points:c,rect:[T,w,L,C]}}static deserialize(t,n,s,r,l,{paths:{lines:u,points:c},rotation:d,thickness:p}){const g=[];let y,b,v,E,S;switch(d){case 0:S=et._rescale,y=-t/s,b=n/r+1,v=1/s,E=-1/r;break;case 90:S=et._rescaleAndSwap,y=-n/r,b=-t/s,v=1/r,E=1/s;break;case 180:S=et._rescale,y=t/s+1,b=-n/r,v=-1/s,E=1/r;break;case 270:S=et._rescaleAndSwap,y=n/r+1,b=t/s+1,v=-1/r,E=-1/s;break}if(!u){u=[];for(const w of c){const L=w.length;if(L===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(L===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const C=new Float32Array(3*(L-2));u.push(C);let[N,M,I,H]=w.subarray(0,4);C.set([NaN,NaN,NaN,NaN,N,M],0);for(let X=4;X<L;X+=2){const $=w[X],Z=w[X+1];C.set(et.createBezierPoints(N,M,I,H,$,Z),(X-2)*3),[N,M,I,H]=[I,H,$,Z]}}}for(let w=0,L=u.length;w<L;w++)g.push({line:S(u[w].map(C=>C??NaN),y,b,v,E),points:S(c[w].map(C=>C??NaN),y,b,v,E)});const T=new this.prototype.constructor;return T.build(g,s,r,1,d,p,l),T}#u(t=this.#h){const n=this.#n+t/2*this.#o;return this.#l%180===0?[n/this.#a,n/this.#s]:[n/this.#s,n/this.#a]}#d(){const[t,n,s,r]=this.#t,[l,u]=this.#u(0);return[t+l,n+u,s-2*l,r-2*u]}#c(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let c=4,d=r.length;c<d;c+=6)ot.pointBoundingBox(r[c],r[c+1],t);continue}let l=r[4],u=r[5];for(let c=6,d=r.length;c<d;c+=6){const[p,g,y,b,v,E]=r.subarray(c,c+6);ot.bezierBoundingBox(l,u,p,g,y,b,v,E,t),l=v,u=E}}const[n,s]=this.#u();t[0]=Le(t[0]-n,0,1),t[1]=Le(t[1]-s,0,1),t[2]=Le(t[2]+n,0,1),t[3]=Le(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,n){return t==="stroke-width"?this.#f(n):null}#f(t){const[n,s]=this.#u();this.#h=t;const[r,l]=this.#u(),[u,c]=[r-n,l-s],d=this.#t;return d[0]-=u,d[1]-=c,d[2]+=2*u,d[3]+=2*c,d}updateParentDimensions([t,n],s){const[r,l]=this.#u();this.#a=t,this.#s=n,this.#o=s;const[u,c]=this.#u(),d=u-r,p=c-l,g=this.#t;return g[0]-=d,g[1]-=p,g[2]+=2*d,g[3]+=2*p,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,n]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=this.#t;let s=0,r=0,l=0,u=0,c=0,d=0;switch(this.#e){case 90:r=n/t,l=-t/n,c=t;break;case 180:s=-1,u=-1,c=t,d=n;break;case 270:r=-n/t,l=t/n,d=n;break;default:return""}return`matrix(${s} ${r} ${l} ${u} ${et.svgRound(c)} ${et.svgRound(d)})`}getPathResizingSVGProperties([t,n,s,r]){const[l,u]=this.#u(),[c,d,p,g]=this.#t;if(Math.abs(p-l)<=et.PRECISION||Math.abs(g-u)<=et.PRECISION){const S=t+s/2-(c+p/2),T=n+r/2-(d+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${T})`}}}const y=(s-2*l)/(p-2*l),b=(r-2*u)/(g-2*u),v=p/s,E=g/r;return{path:{"transform-origin":`${et.svgRound(c)} ${et.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${E}) translate(${et.svgRound(l)} ${et.svgRound(u)}) scale(${y} ${b}) translate(${et.svgRound(-l)} ${et.svgRound(-u)})`}}}getPathResizedSVGProperties([t,n,s,r]){const[l,u]=this.#u(),c=this.#t,[d,p,g,y]=c;if(c[0]=t,c[1]=n,c[2]=s,c[3]=r,Math.abs(g-l)<=et.PRECISION||Math.abs(y-u)<=et.PRECISION){const T=t+s/2-(d+g/2),w=n+r/2-(p+y/2);for(const{line:L,points:C}of this.#i)et._translate(L,T,w,L),et._translate(C,T,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*l)/(g-2*l),v=(r-2*u)/(y-2*u),E=-b*(d+l)+t+l,S=-v*(p+u)+n+u;if(b!==1||v!==1||E!==0||S!==0)for(const{line:T,points:w}of this.#i)et._rescale(T,E,S,b,v,T),et._rescale(w,E,S,b,v,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[r,l]=s,u=this.#t,c=t-u[0],d=n-u[1];if(this.#a===r&&this.#s===l)for(const{line:p,points:g}of this.#i)et._translate(p,c,d,p),et._translate(g,c,d,g);else{const p=this.#a/r,g=this.#s/l;this.#a=r,this.#s=l;for(const{line:y,points:b}of this.#i)et._rescale(y,c,d,p,g,y),et._rescale(b,c,d,p,g,b);u[2]*=p,u[3]*=g}return u[0]=t,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class _o extends My{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ct._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(t,n)}clone(){const t=new _o(this._viewParameters);return t.updateAll(this),t}}class Gh extends ft{static _type="ink";static _editorType=yt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){ct.initialize(t,n),this._defaultDrawingOptions=new _o(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return xt(this,"typesMap",new Map([[Ct.INK_THICKNESS,"stroke-width"],[Ct.INK_COLOR,"stroke"],[Ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,r,l){return new bE(t,n,s,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,r,l,u){return kr.deserialize(t,n,s,r,l,u)}static async deserialize(t,n,s){let r=null;if(t instanceof Uh){const{data:{inkLists:u,rect:c,rotation:d,id:p,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:v},parent:{page:{pageNumber:E}}}=t;r=t={annotationType:yt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:u},boxes:null,pageIndex:E-1,rect:c.slice(0),rotation:d,id:p,deleted:!1,popupRef:v}}const l=await super.deserialize(t,n,s);return l.annotationElementId=t.id||null,l._initialData=r,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=Gh.getDefaultDrawingOptions({stroke:ot.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:l,"stroke-opacity":u,"stroke-width":c}}=this,d={annotationType:yt.INK,color:ct._colorManager.convert(l),opacity:u,thickness:c,paths:{lines:n,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(d.isCopy=!0,d):this.annotationElementId&&!this.#t(d)?null:(d.id=this.annotationElementId,d)}#t(t){const{color:n,thickness:s,opacity:r,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((u,c)=>u!==n[c])||t.thickness!==s||t.opacity!==r||t.pageIndex!==l}renderAnnotationElement(t){const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n}),null}}class gh extends kr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const ao=8,hr=3;class Ji{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,n,s,r){return s-=t,r-=n,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,n,s,r,l,u,c){const d=this.#e(s,r,l,u);for(let p=0;p<8;p++){const g=(-p+d-c+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*n+(r+b)]!==0)return g}return-1}static#a(t,n,s,r,l,u,c){const d=this.#e(s,r,l,u);for(let p=0;p<8;p++){const g=(p+d+c+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*n+(r+b)]!==0)return g}return-1}static#s(t,n,s,r){const l=t.length,u=new Int32Array(l);for(let g=0;g<l;g++)u[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)u[g*n]=u[g*n+n-1]=0;for(let g=0;g<n;g++)u[g]=u[n*s-1-g]=0;let c=1,d;const p=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<n-1;y++){const b=g*n+y,v=u[b];if(v===0)continue;let E=g,S=y;if(v===1&&u[b-1]===0)c+=1,S-=1;else if(v>=1&&u[b+1]===0)c+=1,S+=1,v>1&&(d=v);else{v!==1&&(d=Math.abs(v));continue}const T=[y,g],w=S===y+1,L={isHole:w,points:T,id:c,parent:0};p.push(L);let C;for(const Q of p)if(Q.id===d){C=Q;break}C?C.isHole?L.parent=w?C.parent:d:L.parent=w?d:C.parent:L.parent=w?d:0;const N=this.#i(u,n,g,y,E,S,0);if(N===-1){u[b]=-c,u[b]!==1&&(d=Math.abs(u[b]));continue}let M=this.#n[2*N],I=this.#n[2*N+1];const H=g+M,X=y+I;E=H,S=X;let $=g,Z=y;for(;;){const Q=this.#a(u,n,$,Z,E,S,1);M=this.#n[2*Q],I=this.#n[2*Q+1];const at=$+M,bt=Z+I;T.push(bt,at);const ut=$*n+Z;if(u[ut+1]===0?u[ut]=-c:u[ut]===1&&(u[ut]=c),at===g&&bt===y&&$===H&&Z===X){u[b]!==1&&(d=Math.abs(u[b]));break}else E=$,S=Z,$=at,Z=bt}}}return p}static#o(t,n,s,r){if(s-n<=4){for(let H=n;H<s-2;H+=2)r.push(t[H],t[H+1]);return}const l=t[n],u=t[n+1],c=t[s-4]-l,d=t[s-3]-u,p=Math.hypot(c,d),g=c/p,y=d/p,b=g*u-y*l,v=d/c,E=1/p,S=Math.atan(v),T=Math.cos(S),w=Math.sin(S),L=E*(Math.abs(T)+Math.abs(w)),C=E*(1-L+L**2),N=Math.max(Math.atan(Math.abs(w+T)*C),Math.atan(Math.abs(w-T)*C));let M=0,I=n;for(let H=n+2;H<s-2;H+=2){const X=Math.abs(b-g*t[H+1]+y*t[H]);X>M&&(I=H,M=X)}M>(p*N)**2?(this.#o(t,n,I+2,r),this.#o(t,I,s,r)):r.push(l,u)}static#l(t){const n=[],s=t.length;return this.#o(t,0,s,n),n.push(t[s-2],t[s-1]),n.length<=4?null:n}static#h(t,n,s,r,l,u){const c=new Float32Array(u**2),d=-2*r**2,p=u>>1;for(let S=0;S<u;S++){const T=(S-p)**2;for(let w=0;w<u;w++)c[S*u+w]=Math.exp((T+(w-p)**2)/d)}const g=new Float32Array(256),y=-2*l**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,v=new Uint8Array(b),E=new Uint32Array(256);for(let S=0;S<s;S++)for(let T=0;T<n;T++){const w=S*n+T,L=t[w];let C=0,N=0;for(let I=0;I<u;I++){const H=S+I-p;if(!(H<0||H>=s))for(let X=0;X<u;X++){const $=T+X-p;if($<0||$>=n)continue;const Z=t[H*n+$],Q=c[I*u+X]*g[Math.abs(Z-L)];C+=Z*Q,N+=Q}}const M=v[w]=Math.round(C/N);E[M]++}return[v,E]}static#u(t){const n=new Uint32Array(256);for(const s of t)n[s]++;return n}static#d(t){const n=t.length,s=new Uint8ClampedArray(n>>2);let r=-1/0,l=1/0;for(let c=0,d=s.length;c<d;c++){if(t[(c<<2)+3]===0){r=s[c]=255;continue}const g=s[c]=t[c<<2];g>r&&(r=g),g<l&&(l=g)}const u=255/(r-l);for(let c=0;c<n;c++)s[c]=(s[c]-l)*u;return s}static#c(t){let n,s=-1/0,r=-1/0;const l=t.findIndex(d=>d!==0);let u=l,c=l;for(n=l;n<256;n++){const d=t[n];d>s&&(n-u>r&&(r=n-u,c=n-1),s=d,u=n)}for(n=c-1;n>=0&&!(t[n]>t[n+1]);n--);return n}static#f(t){const n=t,{width:s,height:r}=t,{maxDim:l}=this.#t;let u=s,c=r;if(s>l||r>l){let b=s,v=r,E=Math.log2(Math.max(s,r)/l);const S=Math.floor(E);E=E===S?S-1:S;for(let w=0;w<E;w++){u=Math.ceil(b/2),c=Math.ceil(v/2);const L=new OffscreenCanvas(u,c);L.getContext("2d").drawImage(t,0,0,b,v,0,0,u,c),b=u,v=c,t!==n&&t.close(),t=L.transferToImageBitmap()}const T=Math.min(l/u,l/c);u=Math.round(u*T),c=Math.round(c*T)}const p=new OffscreenCanvas(u,c).getContext("2d",{willReadFrequently:!0});p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,u,c);const g=p.getImageData(0,0,u,c).data;return[this.#d(g),u,c]}static extractContoursFromText(t,{fontFamily:n,fontStyle:s,fontWeight:r},l,u,c,d){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${r} ${y}px ${n}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:E,actualBoundingBoxAscent:S,actualBoundingBoxDescent:T,fontBoundingBoxAscent:w,fontBoundingBoxDescent:L,width:C}=g.measureText(t),N=1.5,M=Math.ceil(Math.max(Math.abs(v)+Math.abs(E)||0,C)*N),I=Math.ceil(Math.max(Math.abs(S)+Math.abs(T)||y,Math.abs(w)+Math.abs(L)||y)*N);p=new OffscreenCanvas(M,I),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,M,I),g.fillStyle="black",g.fillText(t,M*(N-1)/2,I*(3-N)/2);const H=this.#d(g.getImageData(0,0,M,I).data),X=this.#u(H),$=this.#c(X),Z=this.#s(H,M,I,$);return this.processDrawnLines({lines:{curves:Z,width:M,height:I},pageWidth:l,pageHeight:u,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,n,s,r,l){const[u,c,d]=this.#f(t),[p,g]=this.#h(u,c,d,Math.hypot(c,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#c(g),b=this.#s(p,c,d,y);return this.processDrawnLines({lines:{curves:b,width:c,height:d},pageWidth:n,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:u,areContours:c}){r%180!==0&&([n,s]=[s,n]);const{curves:d,width:p,height:g}=t,y=t.thickness??0,b=[],v=Math.min(n/p,s/g),E=v/n,S=v/s,T=[];for(const{points:L}of d){const C=u?this.#l(L):L;if(!C)continue;T.push(C);const N=C.length,M=new Float32Array(N),I=new Float32Array(3*(N===2?2:N-2));if(b.push({line:I,points:M}),N===2){M[0]=C[0]*E,M[1]=C[1]*S,I.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[H,X,$,Z]=C;H*=E,X*=S,$*=E,Z*=S,M.set([H,X,$,Z],0),I.set([NaN,NaN,NaN,NaN,H,X],0);for(let Q=4;Q<N;Q+=2){const at=M[Q]=C[Q]*E,bt=M[Q+1]=C[Q+1]*S;I.set(et.createBezierPoints(H,X,$,Z,at,bt),(Q-2)*3),[H,X,$,Z]=[$,Z,at,bt]}}if(b.length===0)return null;const w=c?new gh:new kr;return w.build(b,n,s,1,r,c?0:y,l),{outline:w,newCurves:T,areContours:c,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:n,thickness:s,width:r,height:l}){let u=1/0,c=-1/0,d=0;for(const C of t){d+=C.length;for(let N=2,M=C.length;N<M;N++){const I=C[N]-C[N-2];u=Math.min(u,I),c=Math.max(c,I)}}let p;u>=-128&&c<=127?p=Int8Array:u>=-32768&&c<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=ao+hr*g,b=new Uint32Array(y);let v=0;b[v++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*p.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=r,b[v++]=l,b[v++]=n?0:1,b[v++]=Math.max(0,Math.floor(s??0)),b[v++]=g,b[v++]=p.BYTES_PER_ELEMENT;for(const C of t)b[v++]=C.length-2,b[v++]=C[0],b[v++]=C[1];const E=new CompressionStream("deflate-raw"),S=E.writable.getWriter();await S.ready,S.write(b);const T=p.prototype.constructor;for(const C of t){const N=new T(C.length-2);for(let M=2,I=C.length;M<I;M++)N[M-2]=C[M]-C[M-2];S.write(N)}S.close();const w=await new Response(E.readable).arrayBuffer(),L=new Uint8Array(w);return Zm(L)}static async decompressSignature(t){try{const n=$A(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(n).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let u=null,c=0;for await(const C of s)u||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),u.set(C,c),c+=C.length;const d=new Uint32Array(u.buffer,0,u.length>>2),p=d[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=d[2],y=d[3],b=d[4]===0,v=d[5],E=d[6],S=d[7],T=[],w=(ao+hr*E)*Uint32Array.BYTES_PER_ELEMENT;let L;switch(S){case Int8Array.BYTES_PER_ELEMENT:L=new Int8Array(u.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:L=new Int16Array(u.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:L=new Int32Array(u.buffer,w);break}c=0;for(let C=0;C<E;C++){const N=d[hr*C+ao],M=new Float32Array(N+2);T.push(M);for(let I=0;I<hr-1;I++)M[I]=d[hr*C+ao+I+1];for(let I=0;I<N;I++)M[I+2]=M[I]+L[c++]}return{areContours:b,thickness:v,outlines:T,width:g,height:y}}catch(n){return vt(`decompressSignature: ${n}`),null}}}class qh extends My{constructor(){super(),super.updateProperties({fill:ct._defaultLineColor,"stroke-width":0})}clone(){const t=new qh;return t.updateAll(this),t}}class Vh extends _o{constructor(t){super(t),super.updateProperties({stroke:ct._defaultLineColor,"stroke-width":1})}clone(){const t=new Vh(this._viewParameters);return t.updateAll(this),t}}class Dn extends ft{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=yt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){ct.initialize(t,n),this._defaultDrawingOptions=new qh,this._defaultDrawnSignatureOptions=new Vh(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return xt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:l,areContours:u,description:c,uuid:d,heightInPage:p}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,v=Ji.processDrawnLines({lines:r,pageWidth:g,pageHeight:y,rotation:b,innerMargin:Dn._INNER_MARGIN,mustSmooth:l,areContours:u});this.addSignature(v,p,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:r,height:l}=this.#n,u=Math.max(r,l),c=Ji.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:r,height:l},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.signatureManager&&this.#e!==null&&(await t.addEditSignatureButton(this._uiManager.signatureManager,this.#i,this.#e),t.show()),t):null}addSignature(t,n,s,r){const{x:l,y:u}=this,{outline:c}=this.#n=t;this.#t=c instanceof gh,this.#e=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let d;this.#t?d=Dn.getDefaultDrawingOptions():(d=Dn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[p,g]=this.parentDimensions,[,y]=this.pageDimensions;let b=n/y;b=b>=1?.5:b,this.width*=b/this.height,this.width>=1&&(b*=.9/this.width,this.width=.9),this.height=b,this.setDims(p*this.width,g*this.height),this.x=l,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Ji.process(t,n,s,r,Dn._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return Ji.extractContoursFromText(t,n,s,r,l,Dn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Ji.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:r,innerMargin:Dn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Dn.getDefaultDrawingOptions():(this._drawingOptions=Dn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":l}}=this,u={annotationType:yt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:l,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(u.paths={lines:n,points:s},u.uuid=this.#i,u.isCopy=!0):u.lines=n,this.#e&&(u.accessibilityData={type:"Figure",alt:this.#e}),u}static deserializeDraw(t,n,s,r,l,u){return u.areContours?gh.deserialize(t,n,s,r,l,u):kr.deserialize(t,n,s,r,l,u)}static async deserialize(t,n,s){const r=await super.deserialize(t,n,s);return r.#t=t.areContours,r.#e=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class vE extends ct{#t=null;#e=null;#n=null;#i=null;#a=null;#s="";#o=null;#l=!1;#h=null;#u=!1;#d=!1;static _type="stamp";static _editorType=yt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){ct.initialize(t,n)}static isHandlingMimeForPasting(t){return po.includes(t)}static paste(t,n){n.pasteEditor({mode:yt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#c(t,n=!1){if(!t){this.remove();return}this.#t=t.bitmap,n||(this.#e=t.id,this.#u=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:u}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:l,height:u,channels:r.length/(l*u)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#r(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#c(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#c(r)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#c(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=po.join(",");const n=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#c(r)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#r();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#r(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#l)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#l||(this.#t?this.#p():this.#r()),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#l=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#h!==null&&clearTimeout(this.#h);const t=200;this.#h=setTimeout(()=>{this.#h=null,this.#g()},t)}#p(){const{div:t}=this;let{width:n,height:s}=this.#t;const[r,l]=this.pageDimensions,u=.75;if(this.width)n=this.width*r,s=this.height*l;else if(n>u*r||s>u*l){const g=Math.min(u*r/n,u*l/s);n*=g,s*=g}const[c,d]=this.parentDimensions;this.setDims(n*c/r,s*d/l),this._uiManager.enableWaiting(!1);const p=this.#o=document.createElement("canvas");p.setAttribute("role","img"),this.addContainer(p),this.width=n/r,this.height=s/l,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s)}copyCanvas(t,n,s=!1){t||(t=224);const{width:r,height:l}=this.#t,u=new An;let c=this.#t,d=r,p=l,g=null;if(n){if(r>n||l>n){const I=Math.min(n/r,n/l);d=Math.floor(r*I),p=Math.floor(l*I)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*u.sx),v=g.height=Math.ceil(p*u.sy);this.#u||(c=this.#m(b,v));const E=g.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",T="#42414d");const w=15,L=w*u.sx,C=w*u.sy,N=new OffscreenCanvas(L*2,C*2),M=N.getContext("2d");M.fillStyle=S,M.fillRect(0,0,L*2,C*2),M.fillStyle=T,M.fillRect(0,0,L,C),M.fillRect(L,C,L,C),E.fillStyle=E.createPattern(N,"repeat"),E.fillRect(0,0,b,v),E.drawImage(c,0,0,c.width,c.height,0,0,b,v)}let y=null;if(s){let b,v;if(u.symmetric&&c.width<t&&c.height<t)b=c.width,v=c.height;else if(c=this.#t,r>t||l>t){const T=Math.min(t/r,t/l);b=Math.floor(r*T),v=Math.floor(l*T),this.#u||(c=this.#m(b,v))}const S=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,b,v),y={width:b,height:v,data:S.getImageData(0,0,b,v).data}}return{canvas:g,width:d,height:p,imageData:y}}#m(t,n){const{width:s,height:r}=this.#t;let l=s,u=r,c=this.#t;for(;l>2*t||u>2*n;){const d=l,p=u;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(l,u);g.getContext("2d").drawImage(c,0,0,d,p,0,0,l,u),c=g.transferToImageBitmap()}return c}#g(){const[t,n]=this.parentDimensions,{width:s,height:r}=this,l=new An,u=Math.ceil(s*t*l.sx),c=Math.ceil(r*n*l.sy),d=this.#o;if(!d||d.width===u&&d.height===c)return;d.width=u,d.height=c;const p=this.#u?this.#t:this.#m(u,c),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,u,c)}#y(t){if(t){if(this.#u){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#u){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*ss.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*ss.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(r,l);return u.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,l),u.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,n,s){let r=null,l=!1;if(t instanceof xy){const{data:{rect:S,rotation:T,id:w,structParent:L,popupRef:C},container:N,parent:{page:{pageNumber:M}},canvas:I}=t;let H,X;I?(delete t.canvas,{id:H,bitmap:X}=s.imageManager.getFromCanvas(N.id,I),I.remove()):(l=!0,t._hasNoCanvas=!0);const $=(await n._structTree.getAriaAttributes(`${Ch}${w}`))?.get("aria-label")||"";r=t={annotationType:yt.STAMP,bitmapId:H,bitmap:X,pageIndex:M-1,rect:S.slice(0),rotation:T,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:L,popupRef:C}}const u=await super.deserialize(t,n,s),{rect:c,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:b}=t;l?(s.addMissingCanvas(t.id,u),u.#l=!0):g&&s.imageManager.isValidId(g)?(u.#e=g,d&&(u.#t=d)):u.#i=p,u.#u=y;const[v,E]=u.pageDimensions;return u.width=(c[2]-c[0])/v,u.height=(c[3]-c[1])/E,u.annotationElementId=t.id||null,b&&(u.altTextData=b),u._initialData=r,u.#d=!!r,u}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:yt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const c=this.#b(s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||=new Map;const u=this.#u?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:u,serialized:s}),s.bitmap=this.#y(!1);else if(this.#u){const c=n.stamps.get(this.#e);u>c.area&&(c.area=u,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return s}#b(t){const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===n,l=(t.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class On{#t;#e=!1;#n=null;#i=null;#a=null;#s=new Map;#o=!1;#l=!1;#h=!1;#u=null;#d=null;#c=null;#f=null;#r;static _initialized=!1;static#p=new Map([ge,Gh,vE,ee,Dn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:s,structTreeLayer:r,accessibilityManager:l,annotationLayer:u,drawLayer:c,textLayer:d,viewport:p,l10n:g}){const y=[...On.#p.values()];if(!On._initialized){On._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#r=t,this.pageIndex=n,this.div=s,this.#t=l,this.#n=u,this.viewport=p,this.#c=d,this.drawLayer=c,this._structTree=r,this.#r.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===yt.NONE}updateToolbar(t){this.#r.updateToolbar(t)}updateMode(t=this.#r.getMode()){switch(this.#v(),t){case yt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case yt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case yt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const s of On.#p.values())n.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#c?.div}setEditingState(t){this.#r.setEditingState(t)}addCommands(t){this.#r.addCommands(t)}cleanUndoStack(t){this.#r.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#h=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of this.#s.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#r.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!this.#n){this.#h=!1;return}const n=this.#n.getEditableAnnotations();for(const s of n){if(s.hide(),this.#r.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#h=!1}disable(){this.#l=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,n=new Map;for(const r of this.#s.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else n.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#n){const r=this.#n.getEditableAnnotations();for(const l of r){const{id:u}=l.data;if(this.#r.isDeletedAnnotationElement(u))continue;let c=n.get(u);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=t.get(u),c&&(this.#r.addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of On.#p.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#l=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#r.getActive()!==t&&this.#r.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#c?.div&&!this.#f){this.#f=new AbortController;const t=this.#r.combinedSignal(this.#f);this.#c.div.addEventListener("pointerdown",this.#m.bind(this),{signal:t}),this.#c.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#c?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#c.div.classList.remove("highlighting"))}#m(t){this.#r.unselectAll();const{target:n}=t;if(n===this.#c.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#c.div.contains(n)){const{isMac:s}=Ee.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#r.showAllEditors("highlight",!0,!0),this.#c.div.classList.add("free"),this.toggleDrawing(),ee.startHighlighting(this,this.#r.direction==="ltr",{target:this.#c.div,x:t.x,y:t.y}),this.#c.div.addEventListener("pointerup",()=>{this.#c.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#r.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:t}),this.div.addEventListener("pointercancel",n,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:n}=t;n&&this.#r.isDeletedAnnotationElement(n)&&this.#r.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#l&&t.annotationElementId&&this.#r.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#r.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#r.addDeletedAnnotationElement(t.annotationElementId),ct.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#r.addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#h),this.#r.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:n,undo:s,mustExec:!1})}getNextId(){return this.#r.getId()}get#g(){return On.#p.get(this.#r.getMode())}combinedSignal(t){return this.#r.combinedSignal(t)}#y(t){const n=this.#g;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}async pasteEditor(t,n){this.updateToolbar(t),await this.#r.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#b(),l=this.getNextId(),u=this.#y({parent:this,id:l,x:s,y:r,uiManager:this.#r,isCentered:!0,...n});u&&this.add(u)}async deserialize(t){return await On.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#r)||null}createAndAddNewEditor(t,n,s={}){const r=this.getNextId(),l=this.#y({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#r,isCentered:n,...s});return l&&this.add(l),l}#b(){const{x:t,y:n,width:s,height:r}=this.div.getBoundingClientRect(),l=Math.max(0,t),u=Math.max(0,n),c=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,n+r),p=(l+c)/2-t,g=(u+d)/2-n,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#b(),!0,t)}setSelected(t){this.#r.setSelected(t)}toggleSelected(t){this.#r.toggleSelected(t)}unselect(t){this.#r.unselect(t)}pointerup(t){const{isMac:n}=Ee.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div||!this.#o||(this.#o=!1,this.#g?.isDrawer&&this.#g.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#r.getMode();if(s===yt.STAMP||s===yt.SIGNATURE){this.#r.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#r.getMode()===yt.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:n}=Ee.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(this.#o=!0,this.#g?.isDrawer){this.startDrawingSession(t);return}const s=this.#r.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#u){this.#g.startDrawing(this,this.#r,!1,t);return}this.#r.setCurrentDrawingSession(this),this.#u=new AbortController;const n=this.#r.combinedSignal(this.#u);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:n}),this.#g.startDrawing(this,this.#r,!1,t)}pause(t){if(t){const{activeElement:n}=document;this.div.contains(n)&&(this.#d=n);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#u?(this.#r.setCurrentDrawingSession(null),this.#u.abort(),this.#u=null,this.#d=null,this.#g.endDrawing(t)):null}findNewParent(t,n,s){const r=this.#r.findParent(n,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#u?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#u&&this.#g.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#v(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Oi(this.div,t);for(const n of this.#r.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#r.commitOrRemove(),this.#v();const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Oi(this.div,{rotation:s}),n!==s)for(const r of this.#s.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#r.viewParameters.realScale}}class Se{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const n of this.#e.values())n.remove(),t.append(n);this.#t=t}}static get _svgFactory(){return xt(this,"_svgFactory",new Er)}static#a(t,[n,s,r,l]){const{style:u}=t;u.top=`${100*s}%`,u.left=`${100*n}%`,u.width=`${100*r}%`,u.height=`${100*l}%`}#s(){const t=Se._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,n){const s=Se._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${n}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const l=Se._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${n}`),l.classList.add("clip"),r}#l(t,n){for(const[s,r]of Object.entries(n))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,n=!1,s=!1){const r=Se.#i++,l=this.#s(),u=Se._svgFactory.createElement("defs");l.append(u);const c=Se._svgFactory.createElement("path");u.append(c);const d=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#n.set(r,c);const p=s?this.#o(u,d):null,g=Se._svgFactory.createElement("use");return l.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(l,t),this.#e.set(r,l),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,n){const s=Se.#i++,r=this.#s(),l=Se._svgFactory.createElement("defs");r.append(l);const u=Se._svgFactory.createElement("path");l.append(u);const c=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke");let d;if(n){const y=Se._svgFactory.createElement("mask");l.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Se._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=Se._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const p=Se._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${c}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return r.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,n){this.#n.delete(t),this.updateProperties(t,n)}updateProperties(t,n){if(!n)return;const{root:s,bbox:r,rootClass:l,path:u}=n,c=typeof t=="number"?this.#e.get(t):t;if(c){if(s&&this.#l(c,s),r&&Se.#a(c,r),l){const{classList:d}=c;for(const[p,g]of Object.entries(l))d.toggle(p,g)}if(u){const p=c.firstChild.firstChild;this.#l(p,u)}}}updateParent(t,n){if(n===this)return;const s=this.#e.get(t);s&&(n.#t.append(s),this.#e.delete(t),n.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:fh};globalThis.pdfjsLib={AbortException:ni,AnnotationEditorLayer:On,AnnotationEditorParamsType:Ct,AnnotationEditorType:yt,AnnotationEditorUIManager:ii,AnnotationLayer:jh,AnnotationMode:Nn,AnnotationType:te,build:Ay,ColorPicker:en,createValidAbsoluteUrl:wh,DOMSVGFactory:Er,DrawLayer:Se,FeatureTest:Ee,fetchData:la,getDocument:Bh,getFilenameFromUrl:Jm,getPdfFilenameFromUrl:ty,getUuid:xh,getXfaPageViewport:ey,GlobalWorkerOptions:Li,ImageKind:gr,InvalidPDFException:fo,isDataScheme:Mr,isPdfFile:So,isValidExplicitDest:ay,MathClamp:Le,noContextMenu:gn,normalizeUnicode:Qm,OPS:br,OutputScale:An,PasswordResponses:Km,PDFDataRangeTransport:Hh,PDFDateString:Rh,PDFWorker:ia,PermissionFlag:$m,PixelsPerInch:ss,RenderingCancelledException:Ao,ResponseException:vr,setLayerDimensions:Oi,shadow:xt,SignatureExtractor:Ji,stopEvent:ne,SupportedImageMimeTypes:po,TextLayer:Ar,TouchManager:Lr,updateUrlHash:Th,Util:ot,VerbosityLevel:xr,version:Ih,XfaLayer:Fh};const AE=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ni,AnnotationEditorLayer:On,AnnotationEditorParamsType:Ct,AnnotationEditorType:yt,AnnotationEditorUIManager:ii,AnnotationLayer:jh,AnnotationMode:Nn,AnnotationType:te,ColorPicker:en,DOMSVGFactory:Er,DrawLayer:Se,FeatureTest:Ee,GlobalWorkerOptions:Li,ImageKind:gr,InvalidPDFException:fo,MathClamp:Le,OPS:br,OutputScale:An,PDFDataRangeTransport:Hh,PDFDateString:Rh,PDFWorker:ia,PasswordResponses:Km,PermissionFlag:$m,PixelsPerInch:ss,RenderingCancelledException:Ao,ResponseException:vr,SignatureExtractor:Ji,SupportedImageMimeTypes:po,TextLayer:Ar,TouchManager:Lr,Util:ot,VerbosityLevel:xr,XfaLayer:Fh,build:Ay,createValidAbsoluteUrl:wh,fetchData:la,getDocument:Bh,getFilenameFromUrl:Jm,getPdfFilenameFromUrl:ty,getUuid:xh,getXfaPageViewport:ey,isDataScheme:Mr,isPdfFile:So,isValidExplicitDest:ay,noContextMenu:gn,normalizeUnicode:Qm,setLayerDimensions:Oi,shadow:xt,stopEvent:ne,updateUrlHash:Th,version:Ih},Symbol.toStringTag,{value:"Module"})),SE=["onCopy","onCut","onPaste"],EE=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],_E=["onFocus","onBlur"],wE=["onInput","onInvalid","onReset","onSubmit"],TE=["onLoad","onError"],xE=["onKeyDown","onKeyPress","onKeyUp"],CE=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],RE=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],ME=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],DE=["onSelect"],LE=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],OE=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],NE=["onScroll"],kE=["onWheel"],PE=["onAnimationStart","onAnimationEnd","onAnimationIteration"],BE=["onTransitionEnd"],zE=["onToggle"],HE=["onChange"],IE=[...SE,...EE,..._E,...wE,...TE,...xE,...CE,...RE,...ME,...DE,...LE,...OE,...NE,...kE,...PE,...BE,...HE,...zE];function Dy(h,t){const n={};for(const s of IE){const r=h[s];r&&(t?n[s]=l=>r(l,t(s)):n[s]=r)}return n}function Pr(h){let t=!1;return{promise:new Promise((s,r)=>{h.then(l=>!t&&s(l)).catch(l=>!t&&r(l))}),cancel(){t=!0}}}function Ly(h){var t,n,s="";if(typeof h=="string"||typeof h=="number")s+=h;else if(typeof h=="object")if(Array.isArray(h)){var r=h.length;for(t=0;t<r;t++)h[t]&&(n=Ly(h[t]))&&(s&&(s+=" "),s+=n)}else for(n in h)h[n]&&(s&&(s+=" "),s+=n);return s}function wo(){for(var h,t,n=0,s="",r=arguments.length;n<r;n++)(h=arguments[n])&&(t=Ly(h))&&(s&&(s+=" "),s+=t);return s}var FE="Invariant failed";function Ut(h,t){if(!h)throw new Error(FE)}var ah,Am;function UE(){if(Am)return ah;Am=1;var h=function(){};return ah=h,ah}var jE=UE();const Oe=i0(jE);var Sm=Object.prototype.hasOwnProperty;function Em(h,t,n){for(n of h.keys())if(ta(n,t))return n}function ta(h,t){var n,s,r;if(h===t)return!0;if(h&&t&&(n=h.constructor)===t.constructor){if(n===Date)return h.getTime()===t.getTime();if(n===RegExp)return h.toString()===t.toString();if(n===Array){if((s=h.length)===t.length)for(;s--&&ta(h[s],t[s]););return s===-1}if(n===Set){if(h.size!==t.size)return!1;for(s of h)if(r=s,r&&typeof r=="object"&&(r=Em(t,r),!r)||!t.has(r))return!1;return!0}if(n===Map){if(h.size!==t.size)return!1;for(s of h)if(r=s[0],r&&typeof r=="object"&&(r=Em(t,r),!r)||!ta(s[1],t.get(r)))return!1;return!0}if(n===ArrayBuffer)h=new Uint8Array(h),t=new Uint8Array(t);else if(n===DataView){if((s=h.byteLength)===t.byteLength)for(;s--&&h.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(h)){if((s=h.byteLength)===t.byteLength)for(;s--&&h[s]===t[s];);return s===-1}if(!n||typeof h=="object"){s=0;for(n in h)if(Sm.call(h,n)&&++s&&!Sm.call(t,n)||!(n in t)||!ta(h[n],t[n]))return!1;return Object.keys(t).length===s}}return h!==h&&t!==t}const Oy=P.createContext(null);function ea({children:h,type:t}){return tt.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:h})}const GE="noopener noreferrer nofollow";class qE{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ut(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Ut(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(n=>{Ut(this.pdfDocument),Ut(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(n):Array.isArray(t)?n(t):t.then(n)}).then(n=>{Ut(Array.isArray(n));const s=n[0];new Promise(r=>{Ut(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(l=>{r(l)}).catch(()=>{Ut(!1)}):typeof s=="number"?r(s):Ut(!1)}).then(r=>{const l=r+1;Ut(this.pdfViewer),Ut(l>=1&&l<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:r,pageNumber:l})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const n=t-1;Ut(this.pdfViewer),Ut(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:t})}addLinkAttributes(t,n,s){t.href=n,t.rel=this.externalLinkRel||GE,t.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const _m={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},To=typeof window<"u",Ny=To&&window.location.protocol==="file:";function VE(h){return typeof h<"u"}function Zi(h){return VE(h)&&h!==null}function XE(h){return typeof h=="string"}function YE(h){return h instanceof ArrayBuffer}function $E(h){return Ut(To),h instanceof Blob}function mh(h){return XE(h)&&/^data:/.test(h)}function wm(h){Ut(mh(h));const[t="",n=""]=h.split(",");return t.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function KE(){return To&&window.devicePixelRatio||1}const ky="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Tm(){Oe(!Ny,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ky}`)}function WE(){Oe(!Ny,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${ky}`)}function rs(h){h?.cancel&&h.cancel()}function yh(h,t){return Object.defineProperty(h,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(h,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(h,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(h,"originalHeight",{get(){return this.view[3]},configurable:!0}),h}function QE(h){return h.name==="RenderingCancelledException"}function ZE(h){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return n(new Error("Error while reading a file."));t(s.result)},s.onerror=r=>{if(!r.target)return n(new Error("Error while reading a file."));const{error:l}=r.target;if(!l)return n(new Error("Error while reading a file."));switch(l.code){case l.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case l.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case l.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},s.readAsArrayBuffer(h)})}function JE(h,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return h}}function sa(){return P.useReducer(JE,{value:void 0,error:void 0})}var xm=function(h,t){var n={};for(var s in h)Object.prototype.hasOwnProperty.call(h,s)&&t.indexOf(s)<0&&(n[s]=h[s]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(h);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(h,s[r])&&(n[s[r]]=h[s[r]]);return n};const{PDFDataRangeTransport:t_}=AE,e_=(h,t)=>{switch(t){case _m.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");h(n);break}case _m.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");h(n);break}}};function Cm(h){return typeof h=="object"&&h!==null&&("data"in h||"range"in h||"url"in h)}const n_=P.forwardRef(function(t,n){var{children:s,className:r,error:l="Failed to load PDF file.",externalLinkRel:u,externalLinkTarget:c,file:d,inputRef:p,imageResourcesPath:g,loading:y="Loading PDF…",noData:b="No PDF file specified.",onItemClick:v,onLoadError:E,onLoadProgress:S,onLoadSuccess:T,onPassword:w=e_,onSourceError:L,onSourceSuccess:C,options:N,renderMode:M,rotate:I,scale:H}=t,X=xm(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[$,Z]=sa(),{value:Q,error:at}=$,[bt,ut]=sa(),{value:lt,error:O}=bt,U=P.useRef(new qE),J=P.useRef([]),mt=P.useRef(void 0),R=P.useRef(void 0);d&&d!==mt.current&&Cm(d)&&(Oe(!ta(d,mt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),mt.current=d),N&&N!==R.current&&(Oe(!ta(N,R.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),R.current=N);const q=P.useRef({scrollPageIntoView:Ot=>{const{dest:se,pageNumber:Xt,pageIndex:de=Xt-1}=Ot;if(v){v({dest:se,pageIndex:de,pageNumber:Xt});return}const ai=J.current[de];if(ai){ai.scrollIntoView();return}Oe(!1,`An internal link leading to page ${Xt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(n,()=>({linkService:U,pages:J,viewer:q}),[]);function W(){C&&C()}function K(){at&&(Oe(!1,at.toString()),L&&L(at))}function nt(){Z({type:"RESET"})}P.useEffect(nt,[d,Z]);const pt=P.useCallback(async()=>{if(!d)return null;if(typeof d=="string")return mh(d)?{data:wm(d)}:(Tm(),{url:d});if(d instanceof t_)return{range:d};if(YE(d))return{data:d};if(To&&$E(d))return{data:await ZE(d)};if(Ut(typeof d=="object"),Ut(Cm(d)),"url"in d&&typeof d.url=="string"){if(mh(d.url)){const{url:Ot}=d,se=xm(d,["url"]),Xt=wm(Ot);return Object.assign({data:Xt},se)}Tm()}return d},[d]);P.useEffect(()=>{const Ot=Pr(pt());return Ot.promise.then(se=>{Z({type:"RESOLVE",value:se})}).catch(se=>{Z({type:"REJECT",error:se})}),()=>{rs(Ot)}},[pt,Z]),P.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){K();return}W()}},[Q]);function st(){lt&&(T&&T(lt),J.current=new Array(lt.numPages),U.current.setDocument(lt))}function At(){O&&(Oe(!1,O.toString()),E&&E(O))}P.useEffect(function(){ut({type:"RESET"})},[ut,Q]),P.useEffect(function(){if(!Q)return;const se=N?Object.assign(Object.assign({},Q),N):Q,Xt=Bh(se);S&&(Xt.onProgress=S),w&&(Xt.onPassword=w);const de=Xt,ai=de.promise.then(ri=>{ut({type:"RESOLVE",value:ri})}).catch(ri=>{de.destroyed||ut({type:"REJECT",error:ri})});return()=>{ai.finally(()=>de.destroy())}},[N,ut,Q]),P.useEffect(()=>{if(!(typeof lt>"u")){if(lt===!1){At();return}st()}},[lt]),P.useEffect(function(){U.current.setViewer(q.current),U.current.setExternalLinkRel(u),U.current.setExternalLinkTarget(c)},[u,c]);const Rt=P.useCallback((Ot,se)=>{J.current[Ot]=se},[]),ce=P.useCallback(Ot=>{delete J.current[Ot]},[]),Pt=P.useMemo(()=>({imageResourcesPath:g,linkService:U.current,onItemClick:v,pdf:lt,registerPage:Rt,renderMode:M,rotate:I,scale:H,unregisterPage:ce}),[g,v,lt,Rt,M,I,H,ce]),Be=P.useMemo(()=>Dy(X,()=>lt),[X,lt]);function Ve(){return tt.jsx(Oy.Provider,{value:Pt,children:s})}function he(){return d?lt==null?tt.jsx(ea,{type:"loading",children:typeof y=="function"?y():y}):lt===!1?tt.jsx(ea,{type:"error",children:typeof l=="function"?l():l}):Ve():tt.jsx(ea,{type:"no-data",children:typeof b=="function"?b():b})}return tt.jsx("div",Object.assign({className:wo("react-pdf__Document",r),ref:p},Be,{children:he()}))});function Py(){return P.useContext(Oy)}function By(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];var n=h.filter(Boolean);if(n.length<=1){var s=n[0];return s||null}return function(l){for(var u=0,c=n;u<c.length;u++){var d=c[u];typeof d=="function"?d(l):d&&(d.current=l)}}}const zy=P.createContext(null),Hy={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},i_=/^H(\d+)$/;function s_(h){return h in Hy}function xo(h){return"children"in h}function Iy(h){return xo(h)?h.children.length===1&&0 in h.children&&"id"in h.children[0]:!1}function a_(h){const t={};if(xo(h)){const{role:n}=h,s=n.match(i_);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(s_(n)){const r=Hy[n];r&&(t.role=r)}}return t}function Fy(h){const t={};if(xo(h)){if(h.alt!==void 0&&(t["aria-label"]=h.alt),h.lang!==void 0&&(t.lang=h.lang),Iy(h)){const[n]=h.children;if(n){const s=Fy(n);return Object.assign(Object.assign({},t),s)}}}else"id"in h&&(t["aria-owns"]=h.id);return t}function r_(h){return h?Object.assign(Object.assign({},a_(h)),Fy(h)):null}function Uy({className:h,node:t}){const n=P.useMemo(()=>r_(t),[t]),s=P.useMemo(()=>!xo(t)||Iy(t)?null:t.children.map((r,l)=>tt.jsx(Uy,{node:r},l)),[t]);return tt.jsx("span",Object.assign({className:h},n,{children:s}))}function Co(){return P.useContext(zy)}function l_(){const h=Co();Ut(h);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=h,[s,r]=sa(),{value:l,error:u}=s,{customTextRenderer:c,page:d}=h;function p(){l&&n&&n(l)}function g(){u&&(Oe(!1,u.toString()),t&&t(u))}return P.useEffect(function(){r({type:"RESET"})},[r,d]),P.useEffect(function(){if(c||!d)return;const b=Pr(d.getStructTree()),v=b;return b.promise.then(E=>{r({type:"RESOLVE",value:E})}).catch(E=>{r({type:"REJECT",error:E})}),()=>rs(v)},[c,d,r]),P.useEffect(()=>{if(l!==void 0){if(l===!1){g();return}p()}},[l]),l?tt.jsx(Uy,{className:"react-pdf__Page__structTree structTree",node:l}):null}const Rm=Nn;function o_(h){const t=Co();Ut(t);const n=Object.assign(Object.assign({},t),h),{_className:s,canvasBackground:r,devicePixelRatio:l=KE(),onRenderError:u,onRenderSuccess:c,page:d,renderForms:p,renderTextLayer:g,rotate:y,scale:b}=n,{canvasRef:v}=h;Ut(d);const E=P.useRef(null);function S(){d&&c&&c(yh(d,b))}function T(N){QE(N)||(Oe(!1,N.toString()),u&&u(N))}const w=P.useMemo(()=>d.getViewport({scale:b*l,rotation:y}),[l,d,y,b]),L=P.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);P.useEffect(function(){if(!d)return;d.cleanup();const{current:M}=E;if(!M)return;M.width=w.width,M.height=w.height,M.style.width=`${Math.floor(L.width)}px`,M.style.height=`${Math.floor(L.height)}px`,M.style.visibility="hidden";const I={annotationMode:p?Rm.ENABLE_FORMS:Rm.ENABLE,canvasContext:M.getContext("2d",{alpha:!1}),viewport:w};r&&(I.background=r);const H=d.render(I),X=H;return H.promise.then(()=>{M.style.visibility="",S()}).catch(T),()=>rs(X)},[r,d,p,w,L]);const C=P.useCallback(()=>{const{current:N}=E;N&&(N.width=0,N.height=0)},[]);return P.useEffect(()=>C,[C]),tt.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:By(v,E),style:{display:"block",userSelect:"none"},children:g?tt.jsx(l_,{}):null})}function u_(h){return"str"in h}function c_(){const h=Co();Ut(h);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:l,page:u,pageIndex:c,pageNumber:d,rotate:p,scale:g}=h;Ut(u);const[y,b]=sa(),{value:v,error:E}=y,S=P.useRef(null);Oe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){v&&s&&s(v)}function w(){E&&(Oe(!1,E.toString()),n&&n(E))}P.useEffect(function(){b({type:"RESET"})},[u,b]),P.useEffect(function(){if(!u)return;const X=Pr(u.getTextContent()),$=X;return X.promise.then(Z=>{b({type:"RESOLVE",value:Z})}).catch(Z=>{b({type:"REJECT",error:Z})}),()=>rs($)},[u,b]),P.useEffect(()=>{if(v!==void 0){if(v===!1){w();return}T()}},[v]);const L=P.useCallback(()=>{l&&l()},[l]),C=P.useCallback(H=>{Oe(!1,H.toString()),r&&r(H)},[r]);function N(){const H=S.current;H&&H.classList.add("selecting")}function M(){const H=S.current;H&&H.classList.remove("selecting")}const I=P.useMemo(()=>u.getViewport({scale:g,rotation:p}),[u,p,g]);return P.useLayoutEffect(function(){if(!u||!v)return;const{current:X}=S;if(!X)return;X.innerHTML="";const $=u.streamTextContent({includeMarkedContent:!0}),Z={container:X,textContentSource:$,viewport:I},Q=new Ar(Z),at=Q;return Q.render().then(()=>{const bt=document.createElement("div");bt.className="endOfContent",X.append(bt);const ut=X.querySelectorAll('[role="presentation"]');if(t){let lt=0;v.items.forEach((O,U)=>{if(!u_(O))return;const J=ut[lt];if(!J)return;const mt=t(Object.assign({pageIndex:c,pageNumber:d,itemIndex:U},O));J.innerHTML=mt,lt+=O.str&&O.hasEOL?2:1})}L()}).catch(C),()=>rs(at)},[t,C,L,u,c,d,v,I]),tt.jsx("div",{className:wo("react-pdf__Page__textContent","textLayer"),onMouseUp:M,onMouseDown:N,ref:S})}function h_(){const h=Py(),t=Co();Ut(t);const n=Object.assign(Object.assign({},h),t),{imageResourcesPath:s,linkService:r,onGetAnnotationsError:l,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:d,page:p,pdf:g,renderForms:y,rotate:b,scale:v=1}=n;Ut(g),Ut(p),Ut(r);const[E,S]=sa(),{value:T,error:w}=E,L=P.useRef(null);Oe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){T&&u&&u(T)}function N(){w&&(Oe(!1,w.toString()),l&&l(w))}P.useEffect(function(){S({type:"RESET"})},[S,p]),P.useEffect(function(){if(!p)return;const $=Pr(p.getAnnotations()),Z=$;return $.promise.then(Q=>{S({type:"RESOLVE",value:Q})}).catch(Q=>{S({type:"REJECT",error:Q})}),()=>{rs(Z)}},[S,p]),P.useEffect(()=>{if(T!==void 0){if(T===!1){N();return}C()}},[T]);function M(){d&&d()}function I(X){Oe(!1,`${X}`),c&&c(X)}const H=P.useMemo(()=>p.getViewport({scale:v,rotation:b}),[p,b,v]);return P.useEffect(function(){if(!g||!p||!r||!T)return;const{current:$}=L;if(!$)return;const Z=H.clone({dontFlip:!0}),Q={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:$,l10n:null,page:p,structTreeLayer:null,viewport:Z},at={annotations:T,annotationStorage:g.annotationStorage,div:$,imageResourcesPath:s,linkService:r,page:p,renderForms:y,viewport:Z};$.innerHTML="";try{new jh(Q).render(at),M()}catch(bt){I(bt)}return()=>{}},[T,s,r,p,g,y,H]),tt.jsx("div",{className:wo("react-pdf__Page__annotations","annotationLayer"),ref:L})}var d_=function(h,t){var n={};for(var s in h)Object.prototype.hasOwnProperty.call(h,s)&&t.indexOf(s)<0&&(n[s]=h[s]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(h);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(h,s[r])&&(n[s[r]]=h[s[r]]);return n};const Mm=1;function f_(h){const t=Py(),n=Object.assign(Object.assign({},t),h),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:l,canvasRef:u,children:c,className:d,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",height:v,inputRef:E,loading:S="Loading page…",noData:T="No page specified.",onGetAnnotationsError:w,onGetAnnotationsSuccess:L,onGetStructTreeError:C,onGetStructTreeSuccess:N,onGetTextError:M,onGetTextSuccess:I,onLoadError:H,onLoadSuccess:X,onRenderAnnotationLayerError:$,onRenderAnnotationLayerSuccess:Z,onRenderError:Q,onRenderSuccess:at,onRenderTextLayerError:bt,onRenderTextLayerSuccess:ut,pageIndex:lt,pageNumber:O,pdf:U,registerPage:J,renderAnnotationLayer:mt=!0,renderForms:R=!1,renderMode:q="canvas",renderTextLayer:W=!0,rotate:K,scale:nt=Mm,unregisterPage:pt,width:st}=n,At=d_(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Rt,ce]=sa(),{value:Pt,error:Be}=Rt,Ve=P.useRef(null);Ut(U);const he=Zi(O)?O-1:lt??null,Ot=O??(Zi(lt)?lt+1:null),se=K??(Pt?Pt.rotate:null),Xt=P.useMemo(()=>{if(!Pt)return null;let ae=1;const Xe=nt??Mm;if(st||v){const me=Pt.getViewport({scale:1,rotation:se});st?ae=st/me.width:v&&(ae=v/me.height)}return Xe*ae},[v,Pt,se,nt,st]);P.useEffect(function(){return()=>{Zi(he)&&r&&pt&&pt(he)}},[r,U,he,pt]);function de(){if(X){if(!Pt||!Xt)return;X(yh(Pt,Xt))}if(r&&J){if(!Zi(he)||!Ve.current)return;J(he,Ve.current)}}function ai(){Be&&(Oe(!1,Be.toString()),H&&H(Be))}P.useEffect(function(){ce({type:"RESET"})},[ce,U,he]),P.useEffect(function(){if(!U||!Ot)return;const Xe=Pr(U.getPage(Ot)),me=Xe;return Xe.promise.then(oa=>{ce({type:"RESOLVE",value:oa})}).catch(oa=>{ce({type:"REJECT",error:oa})}),()=>rs(me)},[ce,U,Ot]),P.useEffect(()=>{if(Pt!==void 0){if(Pt===!1){ai();return}de()}},[Pt,Xt]);const ri=P.useMemo(()=>Pt&&Zi(he)&&Ot&&Zi(se)&&Zi(Xt)?{_className:s,canvasBackground:l,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:w,onGetAnnotationsSuccess:L,onGetStructTreeError:C,onGetStructTreeSuccess:N,onGetTextError:M,onGetTextSuccess:I,onRenderAnnotationLayerError:$,onRenderAnnotationLayerSuccess:Z,onRenderError:Q,onRenderSuccess:at,onRenderTextLayerError:bt,onRenderTextLayerSuccess:ut,page:Pt,pageIndex:he,pageNumber:Ot,renderForms:R,renderTextLayer:W,rotate:se,scale:Xt}:null,[s,l,g,y,w,L,C,N,M,I,$,Z,Q,at,bt,ut,Pt,he,Ot,R,W,se,Xt]),Br=P.useMemo(()=>Dy(At,()=>Pt&&(Xt?yh(Pt,Xt):void 0)),[At,Pt,Xt]),Bn=`${he}@${Xt}/${se}`;function Ro(){switch(q){case"custom":return Ut(p),tt.jsx(p,{},`${Bn}_custom`);case"none":return null;case"canvas":default:return tt.jsx(o_,{canvasRef:u},`${Bn}_canvas`)}}function zr(){return W?tt.jsx(c_,{},`${Bn}_text`):null}function Mo(){return mt?tt.jsx(h_,{},`${Bn}_annotations`):null}function Do(){return tt.jsxs(zy.Provider,{value:ri,children:[Ro(),zr(),Mo(),c]})}function Ni(){return Ot?U===null||Pt===void 0||Pt===null?tt.jsx(ea,{type:"loading",children:typeof S=="function"?S():S}):U===!1||Pt===!1?tt.jsx(ea,{type:"error",children:typeof b=="function"?b():b}):Do():tt.jsx(ea,{type:"no-data",children:typeof T=="function"?T():T})}return tt.jsx("div",Object.assign({className:wo(s,d),"data-page-number":Ot,ref:By(E,Ve),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Xt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:l||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Br,{children:Ni()}))}WE();Li.workerSrc="pdf.worker.mjs";Li.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${Ih}/pdf.worker.min.mjs`;const Dm=({pdf_endpoint:h})=>{const[t,n]=P.useState(null),[s,r]=P.useState(null),[l,u]=P.useState(0),[c,d]=P.useState(!0),[p,g]=P.useState(null);P.useEffect(()=>{(async()=>{const T="https://hkv4l2o0rg.execute-api.us-east-1.amazonaws.com/prod/";try{const w=await fetch(`${T}api/pdf/${h}`,{headers:{Accept:"application/pdf"}});if(!w.ok)throw new Error(`Failed to fetch PDF: ${w.status} ${w.statusText} `);if(!w.headers.get("content-type")?.includes("application/pdf"))throw new Error("Response is not a PDF file");const C=await w.arrayBuffer(),N=new Uint8Array(C);if(new TextDecoder().decode(N.slice(0,4))!=="%PDF")throw new Error("Response is not a valid PDF file");const I=new Blob([C],{type:"application/pdf"});if(I.size<1e3)throw new Error("PDF file appears to be too small");const H=URL.createObjectURL(I);n(H),r(I)}catch(w){console.error("Error fetching PDF:",w),g(w instanceof Error?w.message:"Failed to load PDF")}finally{d(!1)}})()},[]);const y=()=>{if(s){const S=URL.createObjectURL(s),T=document.createElement("a");T.href=S,T.download=`${h}.pdf`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(S)}},b=()=>{if(s){const S=URL.createObjectURL(s);window.open(S,"_blank")}},v=S=>{u(S.numPages)},E=S=>{console.error("PDF load error:",S),g("Failed to load PDF document")};return c?tt.jsx("div",{className:"flex justify-center items-center p-8 text-lg",children:"Loading PDF..."}):p?tt.jsxs("div",{className:"flex justify-center items-center p-8 text-lg text-red-500",children:["[Error] ",p]}):t?tt.jsxs("div",{className:"flex flex-col items-center p-8 max-w-full",children:[tt.jsx("div",{className:"w-full flex justify-start mb-4 pt-4",children:tt.jsxs("div",{className:"flex gap-2",children:[tt.jsxs("button",{onClick:b,className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-1.5 px-4 rounded text-sm shadow-sm transition-colors duration-200 flex items-center gap-1.5",children:[tt.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in New Tab"]}),tt.jsxs("button",{onClick:y,className:"bg-black hover:bg-gray-800 text-white font-medium py-1.5 px-4 rounded text-sm shadow-sm transition-colors duration-200 flex items-center gap-1.5",children:[tt.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]})]})}),tt.jsx(n_,{file:t,onLoadSuccess:v,onLoadError:E,loading:tt.jsx("div",{className:"text-center p-4",children:"Loading PDF document..."}),error:tt.jsx("div",{className:"text-center p-4 text-red-500",children:"Failed to load PDF"}),className:"max-w-full",children:Array.from(new Array(l),(S,T)=>tt.jsx(f_,{pageNumber:T+1,scale:1.5,renderTextLayer:!0,renderAnnotationLayer:!0,className:"mb-8 shadow-lg max-w-full"},`page_${T+1} `))}),l>0&&tt.jsxs("div",{className:"mt-4 text-gray-600 text-sm",children:["Total pages: ",l]})]}):tt.jsx("div",{className:"flex justify-center items-center p-8 text-lg text-gray-500",children:"No PDF data available"})};function p_(){return tt.jsx("main",{className:"pt-16",children:tt.jsxs("p",{className:"body-text",children:["hey , how's it going. ",tt.jsx("br",{})]})})}function g_(){const h=[{children:"Home",href:"/"},{children:"About",href:"/about"},{children:"Projects",href:"/projects"}],t=[{children:"Contact",href:"/contact"}];return tt.jsxs(CA,{children:[tt.jsx(zA,{leftButtons:h,rightButtons:t}),tt.jsxs(sA,{children:[tt.jsx(ro,{path:"/",element:tt.jsx(p_,{})}),tt.jsx(ro,{path:"/ta-resume",element:tt.jsx(Dm,{pdf_endpoint:"ta-resume"})}),tt.jsx(ro,{path:"/gpu-resume",element:tt.jsx(Dm,{pdf_endpoint:"gpu-resume"})})]})]})}f0.createRoot(document.getElementById("root")).render(tt.jsx(P.StrictMode,{children:tt.jsx(g_,{})}));
